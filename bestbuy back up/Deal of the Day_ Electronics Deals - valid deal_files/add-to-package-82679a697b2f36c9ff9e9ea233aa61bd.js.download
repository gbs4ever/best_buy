/* Src File:"sc-activated-transaction-types-lightbox/dist/add-to-package-82679a697b2f36c9ff9e9ea233aa61bd.js" @ Mon Jan 28 2019 15:20:38 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: origin/release/19.05 BUILD_CAUSE: MANUALTRIGGER Build Version: version-not-found */

define(["backbone","dust","lodash","bluebird","eventmanager","jquery","sc-meta-layer/javascript/metaLayer"],function(e,t,r,n,i,o,s){return function(e){function t(n){if(r[n])return r[n].exports;var module=r[n]={i:n,l:!1,exports:{}};return e[n].call(module.exports,module,module.exports,t),module.l=!0,module.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(exports,e,r){t.o(exports,e)||Object.defineProperty(exports,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return t.d(e,"a",e),e},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=38)}([function(module,exports){module.exports=function(e){var t=function(e){function t(e,t){return e.w('<div class="hide alertContainer"><div class="packageNotInCart"><div class="c-alert-container role-alert" role="alert"><div class="c-alert c-alert-level-danger"><div class="c-alert-icon fill-white-base"><svg class="svg--alert-octagon svg-size-m" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path class="svg__path--alert-octagon" d="M22.642 0.015l-13.249-0.015-9.379 9.358-0.015 13.249 9.358 9.379 13.249 0.015 9.379-9.358 0.015-13.249zM16 24.397c-0.015 0-0.034 0.001-0.052 0.001-1.131 0-2.048-0.917-2.048-2.048s0.917-2.048 2.048-2.048c0.018 0 0.036 0 0.055 0.001-0.001-0 0-0 0.002-0 1.14 0 2.068 0.911 2.095 2.044-0.008 1.135-0.928 2.050-2.061 2.050-0.013 0-0.027-0-0.040-0zM17.784 16.682c-0.037 0.975-0.775 1.767-1.722 1.888l-0.167 0.001c-0.735 0-1.732-0.892-1.679-1.994l-0.472-7.033c0-1.102 1.050-1.942 2.152-1.942h0.21c1.207 0 2.152 0.84 2.152 1.942z"></path></svg></div><div class="c-alert-content danger"><p class="message errorMessageLightbox"></p></div></div></div></div></div>')}return t.__dustBody=!0,t}(),r=function(r,n){if(!n)throw new Error("callback is required");return e.render(t,r,n)};return r.template=t,r}},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body wide"><div><p class="lightbox__header">Are you a current ').f(t.getPath(!1,["carrier","displayName"]),t,"h").w(" customer?</p></div><hr>").p(r,t,t,{}).w('<div class="lightbox__ttype-container"><div class="lightbox__carrier-image"><img class="img-responsive" src="').f(t.getPath(!1,["carrier","carrierLogo"]),t,"h").w('"></img></div><div class="lightbox__ttype-details"><div class="lightbox__ttype-options-container">').s(t.get(["UPGRADE"],!1),t,{block:n},{}).s(t.get(["ADD_ON"],!1),t,{block:s},{}).s(t.get(["NEW"],!1),t,{block:d},{}).w('<div class ="lightbox__error').x(t.get(["showError"],!1),t,{block:g},{}).w("\"><span id='unique-error-id' aria-live='polite' class='help-block' aria-hidden='true'><i class='ficon-alert-triangle'></i><span class='help-block-text'>Please select an option to continue.</span></span></div></div></div></div><div class=\"lightbox__cd-footer\">").h("eq",t,{else:y,block:m},{key:t.get(["viewType"],!1),value:"s"},"h").w("</div></div>")}function n(e,t){return e.w('<button id ="upgrade-button" data-track="upgrade" class ="lightbox__ttype-option ').h("eq",t,{block:i},{key:t.get(["selectedTransactionType"],!1),value:"UPGRADE"},"h").w('">').h("eq",t,{else:o,block:a},{key:t.get(["viewType"],!1),value:"l"},"h").w("</button>")}function i(e,t){return e.w(" selected ")}function o(e,t){return e.w('<div class="lightbox__cd-context"><p class="lightbox__cd-label">Yes</p><p class="lightbox__cd-text"> Upgrade my current device.</p></div>')}function a(e,t){return e.w('<div><p class="lightbox__cd-label">Yes</p></div><hr class="lightbox__cd-hr-2" ><div><p>Upgrade my current device.</p></div>')}function s(e,t){return e.w('<button id ="add-on-button" data-track="add-a-line" class ="lightbox__ttype-option ').h("eq",t,{block:l},{key:t.get(["selectedTransactionType"],!1),value:"ADD_ON"},"h").w('">').h("eq",t,{else:c,block:u},{key:t.get(["viewType"],!1),value:"l"},"h").w("</button>")}function l(e,t){return e.w(" selected ")}function c(e,t){return e.w('<div class="lightbox__cd-context"><p class="lightbox__cd-label">Yes</p><p class="lightbox__cd-text"> Add a new line to my account.</p></div>')}function u(e,t){return e.w('<div><p class="lightbox__cd-label">Yes</p></div><hr class="lightbox__cd-hr-2" ><div><p>Add a new line to my account.</p></div>')}function d(e,t){return e.w('<button id ="new-button" data-track="new" class ="lightbox__ttype-option ').h("eq",t,{block:f},{key:t.get(["selectedTransactionType"],!1),value:"NEW"},"h").w('">').h("eq",t,{else:p,block:h},{key:t.get(["viewType"],!1),value:"l"},"h").w("</button>")}function f(e,t){return e.w(" selected ")}function p(e,t){return e.w('<div class="lightbox__cd-context"><p class="lightbox__cd-label">No</p><p class="lightbox__cd-text"> Create a new account for me.</p></div>')}function h(e,t){return e.w('<div><p class="lightbox__cd-label">No</p></div><hr class="lightbox__cd-hr-2" ><div><p>Create a new account for me.</p></div>')}function g(e,t){return e.w(" lightbox__error-show ")}function y(e,t){return e.x(t.get(["step"],!1),t,{block:b},{}).w('<div class="lightbox__cd-continue">').h("eq",t,{block:_},{key:t.get(["buttonType"],!1),value:"AVAILABLE"},"h").h("eq",t,{block:v},{key:t.get(["buttonType"],!1),value:"PRE_ORDER"},"h").w("</div>")}function b(e,t){return e.w('<a id="step2-go-previous" href="#" class="lightbox__go-prev-link">Go to previous page</a>')}function _(e,t){return e.w('<a id="step2-continue" class="lightbox__button btn btn-lg btn-secondary">Continue</a>')}function v(e,t){return e.w('<a id="step2-continue" class="lightbox__button btn btn-lg btn-primary btn-leading-ficon"><i class="ficon-size-s ficon-cart" aria-hidden="true"></i>Pre-Order</a>')}function m(e,t){return e.w('<div class="lightbox__cd-continue">').h("eq",t,{block:w},{key:t.get(["buttonType"],!1),value:"AVAILABLE"},"h").h("eq",t,{block:T},{key:t.get(["buttonType"],!1),value:"PRE_ORDER"},"h").w("</div>").x(t.get(["step"],!1),t,{block:E},{})}function w(e,t){return e.w('<a id="step2-continue" class="lightbox__button btn btn-lg btn-secondary">Continue</a>')}function T(e,t){return e.w('<a id="step2-continue" class="lightbox__button btn btn-lg btn-primary btn-leading-ficon"><i class="ficon-size-s ficon-cart" aria-hidden="true"></i>Pre-Order</a>')}function E(e,t){return e.w('<a id="step2-go-previous" href="#" class="lightbox__go-prev-link">Go to previous page</a>')}return t.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,v.__dustBody=!0,m.__dustBody=!0,w.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ANALYTICS_LABEL={ADD_PACKAGE_TO_CART:"@connected-devices/addPackageToCart"},exports.AVAILABILITY={AVAILABLE:"AVAILABLE",PRE_ORDER:"PRE_ORDER",NOT_TRANSACTABLE:"NOT_TRANSACTABLE"},exports.CARRIER_ID={ATT:"ATT",SPR:"SPR",VEZ:"VEZ"},exports.CONNECTION_TYPE={UNLOCKEDPHONE:"UNLOCKEDPHONE",VOICEPOSTPAID:"VOICEPOSTPAID"},exports.DEVICE_TYPE={DEVICE:"device",PHONE:"phone"},exports.PURCHASE_TYPE={FINANCED:"FINANCED",IB:"IB",LEASED:"LEASED",SUBSIDIZED:"SUBSIDIZED"},exports.TRANSACTION_TYPE={UPGRADE:"UPGRADE",ADD_ON:"ADD_ON",NEW:"NEW"}},function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=e(37),r=function(e){return e&&e.__esModule?e:{default:e}}(t);exports.default={urlRoot:function(){var e=r.default.get("env_appServer");return e&&e.startsWith("https:")?r.default.get("env_appServer"):r.default.get("env_appServerSSL")}},module.exports=exports.default},function(module,exports){module.exports=e},function(module,exports){module.exports=t},function(module,exports){module.exports=r},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div class="lightbox-3__content"><p class="lightbox-3__header">Are you trying to upgrade or add a new line to your account?</p><hr class="horizontal-separator" /><div class="col-1">').p(r,t,t,{}).w('<p class="lightbox-3__details">This ').f(t.get(["deviceType"],!1),t,"h").w(" is only available for current ").f(t.getPath(!1,["carrier","displayName"]),t,"h").w(' customers.</p><a data-ttype="UPGRADE" data-track="upgrade" class="lightbox-3__button btn btn-lg btn-tertiary pull-left onClickButtonTType marginRight">Upgrade My Device</a><a data-ttype="ADD_ON" data-track="add-a-line" class="lightbox-3__button btn btn-lg btn-tertiary pull-left onClickButtonTType">Add a New Line</a></div>').x(t.get(["step"],!1),t,{block:n},{}).w("</div>")}function n(e,t){return e.w('<a id="step2-go-previous" href="#" class="lightbox-3__go-prev-link">Go to previous page</a>')}return t.__dustBody=!0,n.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports,e){module.exports=function(t){var r=e(16)(t),n=e(17)(t),i=e(1)(t),o=e(20)(t),a=e(1)(t),s=e(1)(t),l=e(1)(t),c=e(1)(t),u=e(7)(t),d=e(7)(t),f=function(e){function t(e,t){return e.h("select",t,{block:f},{key:t.get(["lightboxType"],!1)},"h")}function f(e,t){return e.h("eq",t,{block:p},{value:"NEW_IN_CART"},"h").h("eq",t,{block:h},{value:"NOT_TRANSACTABLE"},"h").h("eq",t,{block:g},{value:"ALL_TRANSACTION_TYPE"},"h").h("eq",t,{block:y},{value:"ONE_TRANSACTION_TYPE"},"h").h("eq",t,{block:b},{value:"ADD_ON_NEW"},"h").h("eq",t,{block:_},{value:"NEW_ADD_ON"},"h").h("eq",t,{block:v},{value:"UPGRADE_NEW"},"h").h("eq",t,{block:m},{value:"NEW_UPGRADE"},"h").h("eq",t,{block:w},{value:"UPGRADE_ADD_ON"},"h").h("eq",t,{block:T},{value:"ADD_ON_UPGRADE"},"h")}function p(e,t){return e.p(r,t,t,{})}function h(e,t){return e.p(n,t,t,{})}function g(e,t){return e.p(i,t,t,{})}function y(e,t){return e.p(o,t,t,{})}function b(e,t){return e.p(a,t,t,{})}function _(e,t){return e.p(s,t,t,{})}function v(e,t){return e.p(l,t,t,{})}function m(e,t){return e.p(c,t,t,{})}function w(e,t){return e.p(u,t,t,{})}function T(e,t){return e.p(d,t,t,{})}return t.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,v.__dustBody=!0,m.__dustBody=!0,w.__dustBody=!0,T.__dustBody=!0,t}(),p=function(e,r){if(!r)throw new Error("callback is required");return t.render(f,e,r)};return p.template=f,p}},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body wide"><div><p class="lightbox__header">Let\'s start by choosing a carrier</p></div><hr>').p(r,t,t,{}).w('<div class="lightbox__container"><div class="lightbox__image-div"><img class="img-responsive" src="').f(t.get(["largeImageUrl"],!1),t,"h").w('"></img></div><div class="lightbox__carrier-details').h("eq",t,{block:n},{key:t.get(["viewType"],!1),value:"l"},"h").w('"><p class="lightbox__cd-heading').x(t.get(["hideBodyCopy"],!1),t,{block:o},{}).w('">With an unlocked phone, you can switch carriers whenever you want and take it wherever you go. Get a discount on yours when you activate it today with one of the carriers below.</p><div class="lightbox__cd-container">').s(t.get(["carrierOptions"],!1),t,{block:a},{}).w('<button id="unlocked-activate-later" class="lightbox__cd-carrier-option ').h("eq",t,{block:h},{key:t.get(["selectedCarrierCode"],!1),value:"ACTIVATELATER"},"h").w('">').h("eq",t,{else:g,block:y},{key:t.get(["viewType"],!1),value:"l"},"h").w("</button></div>").s(t.get(["carrierOptions"],!1),t,{block:b},{}).x(t.get(["showError"],!1),t,{block:v},{}).w('</div></div><div class="lightbox__cd-footer">').x(t.get(["showGoToCart"],!1),t,{else:m,block:E},{}).w("</div></div>")}function n(e,t){return e.x(t.get(["hideBodyCopy"],!1),t,{block:i},{})}function i(e,t){return e.w(" center")}function o(e,t){return e.w(" hide")}function a(e,t){return e.w('<button id="unlocked-select-carrier" class="lightbox__cd-carrier-option ').h("eq",t,{block:s},{key:t.get(["carrierCode"],!1),value:t.get(["selectedCarrierCode"],!1)},"h").w('" data-value="').f(t.get(["carrierCode"],!1),t,"h").w('">').h("eq",t,{else:l,block:d},{key:t.get(["viewType"],!1),value:"l"},"h").w("</button>")}function s(e,t){return e.w(" selected ")}function l(e,t){return e.w('<div><img src="').f(t.get(["carrierLogo"],!1),t,"h").w('" class="lightbox__cd-carrier-logo" alt="carrier logo"> </img><p class="lightbox__cd-price-label">').x(t.get(["superScript"],!1),t,{block:c},{}).w('<b class="lightbox__cd-price">$').f(t.get(["startingPrice"],!1),t,"h").x(t.get(["superScript"],!1),t,{block:u},{}).w("</b></p></div>")}function c(e,t){return e.w(" Starting at ")}function u(e,t){return e.w("<sup>").f(t.get(["superScript"],!1),t,"h").w("</sup>")}function d(e,t){return e.w('<div><img src="').f(t.get(["carrierLogo"],!1),t,"h").w('" class="lightbox__cd-carrier-logo" alt="carrier logo"> </img></div><hr class="lightbox__cd-hr-1"><div class="lightbox__cd-pricing"><p class="lightbox__cd-price-label">').x(t.get(["superScript"],!1),t,{block:f},{}).w('</p><span class="lightbox__cd-price"><b>$').f(t.get(["startingPrice"],!1),t,"h").x(t.get(["superScript"],!1),t,{block:p},{}).w("</b></span></div>")}function f(e,t){return e.w(" Starting at")}function p(e,t){return e.w("<sup>").f(t.get(["superScript"],!1),t,"h").w("</sup>")}function h(e,t){return e.w(" selected ")}function g(e,t){return e.w('<div class="lightbox__cd-carrier-details-div">Activate Later</div><div class="lightbox__cd-pricing"> <b>$').f(t.get(["replacementPrice"],!1),t,"h").w(" </b> </div>")}function y(e,t){return e.w('<div class="lightbox__cd-carrier-details-div">Activate Later</div><hr class="lightbox__cd-hr-1"><div class="lightbox__cd-pricing"> <span class="lightbox__cd-price"><b>$').f(t.get(["replacementPrice"],!1),t,"h").w(" </b></span> </div>")}function b(e,t){return e.w('<p class="lightbox__cd-disclaimer">').x(t.get(["superScript"],!1),t,{block:_},{}).w("</p>")}function _(e,t){return e.w("<sup>").f(t.get(["superScript"],!1),t,"h").w("</sup>").f(t.get(["disclaimer"],!1),t,"h")}function v(e,t){return e.w("<span id='unique-error-id' aria-live='polite' class='help-block' aria-hidden='true'><i class='ficon-alert-triangle'></i><span class='help-block-text'>Please select an option to continue.</span></span>")}function m(e,t){return e.w('<div class="lightbox__cd-continue">').h("eq",t,{else:w,block:T},{key:t.get(["buttonType"],!1),value:"NOT_TRANSACTABLE"},"h").w("</div>")}function w(e,t){return e.w('<a id="step1-continue" class="lightbox__button btn btn-lg btn-secondary">Continue</a>')}function T(e,t){return e}function E(e,t){return e.w('<div class="lightbox__cd-continue">').h("eq",t,{block:k},{key:t.get(["buttonType"],!1),value:"AVAILABLE"},"h").h("eq",t,{block:A},{key:t.get(["buttonType"],!1),value:"PRE_ORDER"},"h").w("</div>")}function k(e,t){return e.w('<a id="step1-go-to-cart" class="lightbox__button btn btn-lg btn-secondary">Go to Cart</a>')}function A(e,t){return e.w('<a id="step1-go-to-cart" class="lightbox__button btn btn-lg btn-primary btn-leading-ficon"><i class="ficon-size-s ficon-cart" aria-hidden="true"></i>Pre-Order</a>')}return t.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,v.__dustBody=!0,m.__dustBody=!0,w.__dustBody=!0,T.__dustBody=!0,E.__dustBody=!0,k.__dustBody=!0,A.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=exports.getCookies=function(){return(document.cookie.split("; ")||[]).reduce(function(e,r){var n=r.split(/=(.+)/),i=t(n,2),o=i[0],a=i[1];return e[o]=a,e},{})};exports.getCookie=function(e){return r()[e]}},function(module,exports,e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(6),i=t(n),o=e(4),a=t(o),s=e(5),l=t(s),c=e(24),u=t(c),d=e(3),f=t(d),p=e(19),h=t(p),g=e(35),y=t(g),b=e(18),_=t(b),v=e(15),m=t(v),w=e(9),T=t(w),E=e(8),k=t(E),A=e(1),C=t(A),O=e(2),N=e(14),x=e(21),I=a.default.View.extend({events:{"click #upgrade-button":"upgradeOnClick","click #add-on-button":"addOnOnClick","click #new-button":"newOnClick","click #unlocked-select-carrier":"selectCarrierOnClick","click #unlocked-activate-later":"activateLaterOnClick","click #step1-continue":"step1OnContinue","click #step1-go-to-cart":"step1GoToCart","click #step2-continue":"step2OnContinue","click #step2-go-previous":"step2OnGoPrevious","click .onClickButtonTType":"onClickButtonTType"},initialize:function(e){i.default.bindAll(this,"buildUrl"),this.skuId=e.skuId,this.listingId=e.listingId,this.sellerId=e.sellerId,this.purchaseType=e.purchaseType,this.numberOfPayments=e.numberOfPayments},buyUnactivatedView:null,template:(0,h.default)(l.default),render:function(){var e=i.default.extend(this.model.toJSON(),this.templateHelpers());return this.template(e,i.default.bind(function(e,t){this.$el.html(t),this.$el.one("hidden.bs.modal",i.default.bind(this.afterModalClosed,this))},this)),this},renderModalContent:function(e){var t=i.default.extend(this.model.toJSON(),this.templateHelpers());return this.template=e,this.template(t,i.default.bind(function(e,t){this.$(".modal-body-content").html(t),this.$(".modal-body-content").one("hidden.bs.modal",i.default.bind(this.afterModalClosed,this))},this)),this},buildUrl:function(e){var t=this.model.get("selectedTransactionType"),r=this.model.get("selectedCarrierCode"),n=this.model.get("transactionTypes"),o=this.model.get("connectionType"),a=i.default.filter(n,{transactionType:t})[0].packageBuilderUrl;if(!a)switch(t){case O.TRANSACTION_TYPE.UPGRADE:a="/wireless/updateaccount";break;case O.TRANSACTION_TYPE.ADD_ON:a="/wireless/addaccount";break;case O.TRANSACTION_TYPE.NEW:a="/wireless/createaccount"}var s=f.default.urlRoot()+a;return e&&(s+="?skuId="+this.skuId+"&transactionType="+t+"&connectionType="+o,this.listingId&&(s+="&listingId="+this.listingId),this.purchaseType&&(s+="&purchaseType="+this.purchaseType),this.numberOfPayments&&(s+="&numberOfPayments="+this.numberOfPayments),r&&(s+="&carrierCode="+r)),s},getButtonType:function(e){return e||O.AVAILABILITY.AVAILABLE},connectionType:function(e){return e===O.CONNECTION_TYPE.VOICEPOSTPAID||e===O.CONNECTION_TYPE.UNLOCKEDPHONE?O.DEVICE_TYPE.PHONE:O.DEVICE_TYPE.DEVICE},setCarrier:function(e){var t=void 0;return this.model.get("selectedCarrierCode")&&2===this.model.get("step")?t=i.default.filter(this.model.get("carrierOptions"),{carrierCode:this.model.get("selectedCarrierCode")})[0]:e.connectionType!==O.CONNECTION_TYPE.UNLOCKEDPHONE&&(t=this.model.get("carrierOptions")[0]),t},lightboxType:function(e){this.model.set("lightboxType",e.map(function(e){return e.transactionType}).sort().join("&"))},getTransactionTypeInCart:function(){return this.model.get("packageInCart")&&this.model.get("packageInCart").transactionType},templateHelpers:function(){var e=this,t=this.getButtonType(this.model.get("availability")),n=this.model.get("connectionType"),o=this.getTransactionTypeInCart(),a=this.model.get("packageInCart")&&this.model.get("packageInCart").count,s=[],l=void 0;if(l=n===O.CONNECTION_TYPE.UNLOCKEDPHONE?i.default.filter(this.model.get("transactionTypes"),function(t){return i.default.contains(t.activatedDeviceItems,i.default.find(t.activatedDeviceItems,{carrierCode:e.model.get("selectedCarrierCode")}))}):i.default.reject(this.model.get("transactionTypes"),{isPresent:!1}),s=i.default.reduce(l,function(e,t){return e[t.transactionType]=i.default.omit(t,"transactionType"),e},{},this),Object.keys(s).length>2&&this.model.set("lightboxType","ALL_TRANSACTION_TYPE"),1===Object.keys(s).length&&this.model.set("lightboxType","ONE_TRANSACTION_TYPE"),2===Object.keys(s).length){var c=Object.keys(s)[0]+"_"+Object.keys(s)[1];e.model.set("lightboxType",c)}if(t===O.AVAILABILITY.NOT_TRANSACTABLE)this.model.set("lightboxType","ALL_TRANSACTION_TYPE");else if(null!==o&&void 0!==o)switch(o){case O.TRANSACTION_TYPE.NEW:this.model.set("lightboxType","NEW_IN_CART"),y.default.trigger("pageEvent:error:client",r({},O.ANALYTICS_LABEL.ADD_PACKAGE_TO_CART,["Can't buy multiple with new account"]));break;case"NOT_TRANSACTABLE":this.model.set("lightboxType","NOT_TRANSACTABLE"),y.default.trigger("pageEvent:error:client",r({},O.ANALYTICS_LABEL.ADD_PACKAGE_TO_CART,["Can't buy with max devices"]));break;case O.TRANSACTION_TYPE.UPGRADE:var u=e.model.get("lightboxType");"UPGRADE_ADD_ON"===u||"ALL_TRANSACTION_TYPE"===u?this.model.set("lightboxType","UPGRADE_ADD_ON"):(s.UPGRADE?(delete s.ADD_ON,delete s.NEW):delete s.NEW,this.model.set("lightboxType","ONE_TRANSACTION_TYPE")),y.default.trigger("pageEvent:error:client",r({},O.ANALYTICS_LABEL.ADD_PACKAGE_TO_CART,["Can't upgrade two lines"]));break;case O.TRANSACTION_TYPE.ADD_ON:var d=e.model.get("lightboxType");"UPGRADE_ADD_ON"===d||"ALL_TRANSACTION_TYPE"===d?this.model.set("lightboxType","UPGRADE_ADD_ON"):(s.ADD_ON?(delete s.UPGRADE,delete s.NEW):delete s.NEW,this.model.set("lightboxType","ONE_TRANSACTION_TYPE")),y.default.trigger("pageEvent:error:client",r({},O.ANALYTICS_LABEL.ADD_PACKAGE_TO_CART,["Can't add two lines"]))}return n===O.CONNECTION_TYPE.UNLOCKEDPHONE&&"NOT_TRANSACTABLE"!==o?this.model.set("templateType","UNLOCKED_PHONE"):this.model.set("templateType","PACKAGE_CART"),s.deviceType=this.connectionType(this.model.get("connectionType")),s.lightboxType=this.model.get("lightboxType"),s.url=f.default.urlRoot()+"/cart",s.count=a,s.templateType=this.model.get("templateType"),s.connectionType=this.model.get("connectionType"),s.replacementPrice=this.model.get("replacementPrice"),s.selectedCarrierCode=this.model.get("selectedCarrierCode"),s.carrier=this.setCarrier(s),s.buttonType=t,s},afterModalClosed:function(){this.remove()},onClickButtonTType:function(e){this.getTransactionTypeInCart()===O.TRANSACTION_TYPE.UPGRADE&&$(e.target.attributes["data-ttype"]).val()===O.TRANSACTION_TYPE.UPGRADE?this.renderModalContent((0,_.default)(l.default)):this.getTransactionTypeInCart()===O.TRANSACTION_TYPE.ADD_ON&&$(e.target.attributes["data-ttype"]).val()===O.TRANSACTION_TYPE.ADD_ON?this.renderModalContent((0,m.default)(l.default)):(this.model.set("selectedTransactionType",$(e.target.attributes["data-ttype"]).val()),this.model.get("connectedDevice")?this.callConnectedDeviceEndPoint():window.location.assign(this.buildUrl(!0)))},selectCarrierOnClick:function(e){var t=this.$(e.currentTarget).data("value");this.model.set("selectedCarrierCode",t),this.model.unset("showError"),this.model.unset("showGoToCart"),this.renderModalContent((0,T.default)(l.default))},upgradeOnClick:function(){this.model.set("selectedTransactionType",O.TRANSACTION_TYPE.UPGRADE),this.model.unset("showError"),this.renderModalContent((0,C.default)(l.default))},addOnOnClick:function(){this.model.set("selectedTransactionType",O.TRANSACTION_TYPE.ADD_ON),this.model.unset("showError"),this.renderModalContent((0,C.default)(l.default))},newOnClick:function(){this.model.set("selectedTransactionType",O.TRANSACTION_TYPE.NEW),this.model.unset("showError"),this.renderModalContent((0,C.default)(l.default))},step1OnContinue:function(){this.model.get("selectedCarrierCode")?(this.model.set("step",2),this.model.unset("showError"),this.renderModalContent((0,k.default)(l.default))):(this.model.set("showError",!0),this.renderModalContent((0,T.default)(l.default)))},step1GoToCart:function(){this.goToCart()},step2OnContinue:function(){this.model.get("selectedTransactionType")?(this.model.get("selectedCarrierCode")||this.model.set("selectedCarrierCode",this.model.get("carrier").carrierId),this.model.get("connectedDevice")?this.callConnectedDeviceEndPoint():window.location.assign(this.buildUrl(!0))):(this.model.set("showError",!0),this.renderModalContent((0,C.default)(l.default)))},step2OnGoPrevious:function(){this.model.unset("showError"),this.renderModalContent((0,T.default)(l.default))},activateLaterOnClick:function(){this.model.set("selectedCarrierCode","ACTIVATELATER"),this.model.unset("showError"),this.model.set("showGoToCart",!0),this.renderModalContent((0,T.default)(l.default))},goToCart:function(){return $("#adttlb-modal").addClass("spinner__large--with-overlay"),$("#spinner").addClass("spinner spinner-large"),(0,N.disableElements)("modal"),Promise.resolve((0,u.default)({skuId:this.skuId})).then(function(){window.location.assign(f.default.urlRoot()+"/cart")}).catch(function(e){throw(0,N.enableElements)("modal"),$(".alertContainer").removeClass("hide").addClass("show"),$("#adttlb-modal").removeClass("spinner__large--with-overlay"),$("#spinner").removeClass("spinner spinner-large"),e.msg&&$(".errorMessageLightbox").html(x.markdown.toHTML(e.msg)),e})},callConnectedDeviceEndPoint:function(e){var t=this,r={skuId:this.skuId,transactionType:this.model.get("selectedTransactionType"),connectionType:this.model.get("connectionType"),purchaseType:this.purchaseType,numberOfPayments:this.numberOfPayments};this.model.get("connectionType")===O.CONNECTION_TYPE.UNLOCKEDPHONE&&(r.carrierId=this.model.get("selectedCarrierCode")),$("#adttlb-modal").addClass("spinner__large--with-overlay"),$("#spinner").addClass("spinner spinner-large"),(0,N.disableElements)("modal"),$.ajax({type:"POST",url:f.default.urlRoot()+(0,N.getBeagleApiPath)()+"/connected-device",contentType:"application/json",data:JSON.stringify(r)}).fail(function(e,r,n){try{t.redirectFunc(e)}catch(e){}}).done(function(e,r,n){t.redirectFunc(n)})},redirectFunc:function(e){var t=!1;try{t=e.responseText&&JSON.parse(e.responseText).sendQueryParams}catch(e){}if(200===e.status)window.location.assign(this.buildUrl(t));else if(t)window.location.assign(this.buildUrl(t));else{var r=void 0;try{r=e.responseText&&JSON.parse(e.responseText).errors[0].userMessage}catch(e){}(0,N.enableElements)("modal"),$(".alertContainer").removeClass("hide").addClass("show"),$("#adttlb-modal").removeClass("spinner__large--with-overlay"),$("#spinner").removeClass("spinner spinner-large"),$(".errorMessageLightbox").html(x.markdown.toHTML(r))}}});exports.default=I,module.exports=exports.default},function(module,exports){module.exports=function(e){var t=function(e){function t(e,t){return e.w("<div id=\"adttlb-spinner\"><div class='spinner-lightbox'><i class='spinner spinner-large'><span class='sr-only'>Loading... please wait.</span></i></div></div>")}return t.__dustBody=!0,t}(),r=function(r,n){if(!n)throw new Error("callback is required");return e.render(t,r,n)};return r.template=t,r}},function(module,exports){module.exports=n},function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.getBeagleApiPath=function(){return void 0!==window.liveConfig&&void 0!==window.liveConfig.beagleApiPath&&null!==window.liveConfig.beagleApiPath&&""!==window.liveConfig.beagleApiPath?window.liveConfig.beagleApiPath:"/wireless"},exports.disableElements=function(e){if(e){var t=document.querySelector("."+e);if(t){var r=t.querySelectorAll("a"),n=t.querySelectorAll("button"),i=t.querySelectorAll("input");Array.prototype.forEach.call(r,function(e){return $(e).prop("disabled",!0)}),Array.prototype.forEach.call(n,function(e){e.disabled=!0}),Array.prototype.forEach.call(i,function(e){e.disabled=!0})}}},exports.enableElements=function(e){if(e){var t=document.querySelector("."+e);if(t){var r=t.querySelectorAll("a"),n=t.querySelectorAll("button"),i=t.querySelectorAll("input");Array.prototype.forEach.call(r,function(e){return $(e).prop("disabled",!1)}),Array.prototype.forEach.call(n,function(e){e.disabled=!1}),Array.prototype.forEach.call(i,function(e){e.disabled=!1})}}}},function(module,exports){module.exports=function(e){var t=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div><p class="lightbox-2__header">You can only add one line to your account at a time.</p><hr class="horizontal-separator" /><div class="col-1" ><p class="lightbox-2__details">You\'ll have to finish your current order before you can add another line to your account.</p><a href=').f(t.get(["url"],!1),t,"h").w(' class="lightbox-2__button btn btn-lg btn-tertiary">See My Cart</a></div></div></div>')}return t.__dustBody=!0,t}(),r=function(r,n){if(!n)throw new Error("callback is required");return e.render(t,r,n)};return r.template=t,r}},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div>').p(r,t,t,{}).h("eq",t,{block:n},{key:t.get(["lightboxType"],!1),value:"NEW_IN_CART"},"h").w("</div></div></div>")}function n(e,t){return e.w('<p class="lightbox-2__header">You can only buy one mobile device at a time.</p><hr class="horizontal-separator" /><div class="col-1"><p class="lightbox-2__details">You\'ll have to finish your current order before you can add another device to your new ').f(t.getPath(!1,["carrier","displayName"]),t,"h").w(" account.</p><a href=").f(t.get(["url"],!1),t,"h").w(' class="lightbox-2__button btn btn-lg btn-tertiary">See My Cart</a></div>')}return t.__dustBody=!0,n.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div>').p(r,t,t,{}).h("eq",t,{block:n},{key:t.get(["lightboxType"],!1),value:"NOT_TRANSACTABLE"},"h").w("</div></div></div>")}function n(e,t){return e.w('<p class="lightbox-2__header">You can only buy ').f(t.get(["count"],!1),t,"h").w(" mobile ").h("gt",t,{else:i,block:o},{key:t.get(["count"],!1),value:1},"h").w(' at a time.</p><hr class="horizontal-separator" /><div class="col-1" ><p class="lightbox-2__details">You\'ll have to finish your current order before you can buy another mobile device.</p><a href=').f(t.get(["url"],!1),t,"h").w(' class="lightbox-2__button btn btn-lg btn-tertiary">See My Cart</a></div>')}function i(e,t){return e.w("device")}function o(e,t){return e.w("devices")}return t.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports){module.exports=function(e){var t=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div><p class="lightbox-2__header">You can only upgrade one line on your account at a time.</p><hr class="horizontal-separator" /><div class="col-1"><p class="lightbox-2__details">You\'ll have to finish your current order before you can upgrade another ').f(t.get(["deviceType"],!1),t,"h").w(".</p><a href=").f(t.get(["url"],!1),t,"h").w(' class="lightbox-2__button btn btn-lg btn-tertiary">See My Cart</></div></div></div>')}return t.__dustBody=!0,t}(),r=function(r,n){if(!n)throw new Error("callback is required");return e.render(t,r,n)};return r.template=t,r}},function(module,exports,e){module.exports=function(t){var r=e(8)(t),n=e(9)(t),i=function(e){function t(e,t){return e.w("\t<div ").h("eq",t,{else:i,block:o},{
key:t.get(["viewType"],!1),value:"s"},"h").w('><div id="adttlb-modal" class="modal" role="dialog" aria-labelledby="modal title" aria-describedby="modal description"><div class="modal-dialog" role="document"><div class="modal-content"><i id="spinner" aria-label="loading"></i><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button></div><div class="modal-body-content">').h("select",t,{block:a},{key:t.get(["templateType"],!1)},"h").w("</div></div></div></div></div>")}function i(e,t){return e.w(' class="large-view" ')}function o(e,t){return e.w(' class="small-view" ')}function a(e,t){return e.h("eq",t,{block:s},{value:"PACKAGE_CART"},"h").h("eq",t,{block:l},{value:"UNLOCKED_PHONE"},"h")}function s(e,t){return e.p(r,t,t,{})}function l(e,t){return e.p(n,t,t,{})}return t.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,t}(),o=function(e,r){if(!r)throw new Error("callback is required");return t.render(i,e,r)};return o.template=i,o}},function(module,exports,e){module.exports=function(t){var r=e(0)(t),n=function(e){function t(e,t){return e.w('<div class="modal-body narrow"><div class="lightbox-3__content"><p class="lightbox-3__header">').s(t.get(["UPGRADE"],!1),t,{block:n},{}).s(t.get(["ADD_ON"],!1),t,{block:i},{}).s(t.get(["NEW"],!1),t,{block:o},{}).w('</p><hr class="horizontal-separator" /><div class="col-1" >').p(r,t,t,{}).w('<p class="lightbox-3__details">').s(t.get(["UPGRADE"],!1),t,{block:a},{}).s(t.get(["ADD_ON"],!1),t,{block:s},{}).s(t.get(["NEW"],!1),t,{block:l},{}).w("</p>").s(t.get(["UPGRADE"],!1),t,{block:c},{}).s(t.get(["ADD_ON"],!1),t,{block:u},{}).s(t.get(["NEW"],!1),t,{block:d},{}).w("</div>").x(t.get(["step"],!1),t,{block:f},{}).w("</div></div>")}function n(e,t){return e.w("Are you ready to upgrade?")}function i(e,t){return e.w("Are you adding a new line to your account?")}function o(e,t){return e.w("Do you want to create a new ").f(t.getPath(!1,["carrier","displayName"]),t,"h").w(" account?")}function a(e,t){return e.w("This ").f(t.get(["deviceType"],!1),t,"h").w(" is only available for upgrade-eligible customers.")}function s(e,t){return e.w("This ").f(t.get(["deviceType"],!1),t,"h").w(" is only available for customers adding a new line to an existing ").f(t.getPath(!1,["carrier","displayName"]),t,"h").w(" account.")}function l(e,t){return e.w("This ").f(t.get(["deviceType"],!1),t,"h").w(" is only available for new ").f(t.getPath(!1,["carrier","displayName"]),t,"h").w(" accounts. We'll help you create an account and customize a plan to fit your needs.")}function c(e,t){return e.w('<a data-ttype="UPGRADE" class="lightbox-3__button btn btn-lg btn-tertiary onClickButtonTType">Check Upgrade Status</a>')}function u(e,t){return e.w('<a data-ttype="ADD_ON" class="lightbox-3__button btn btn-lg btn-tertiary onClickButtonTType">Connect to My Account</a>')}function d(e,t){return e.w('<a data-ttype="NEW" class="lightbox-3__button btn btn-lg btn-tertiary onClickButtonTType">Create a New Account</a>')}function f(e,t){return e.w('<a id="step2-go-previous" href="#" class="lightbox-3__go-prev-link">Go to previous page</a>')}return t.__dustBody=!0,n.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,u.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,t}(),i=function(e,r){if(!r)throw new Error("callback is required");return t.render(n,e,r)};return i.template=n,i}},function(module,exports,e){exports.markdown=e(22),exports.parse=exports.markdown.toHTML},function(module,exports,e){!function(t){function r(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var t=e(33);return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(e){for(var t=0,r=-1;-1!==(r=e.indexOf("\n",r+1));)t++;return t}function o(e,t){function r(e){this.len_after=e,this.name="close_"+t}var n=e+"_state",i="strong"==e?"em_state":"strong_state";return function(o,a){if(this[n][0]==t)return this[n].shift(),[o.length,new r(o.length-t.length)];var s=this[i].slice(),l=this[n].slice();this[n].unshift(t);var c=this.processInline(o.substr(t.length)),u=c[c.length-1];this[n].shift();if(u instanceof r){c.pop();return[o.length-u.len_after,[e].concat(c)]}return this[i]=s,this[n]=l,[t.length,t]}}function s(e){for(var t=e.split(""),r=[""],n=!1;t.length;){var i=t.shift();switch(i){case" ":n?r[r.length-1]+=i:r.push("");break;case"'":case'"':n=!n;break;case"\\":i=t.shift();default:r[r.length-1]+=i}}return r}function l(e){return b(e)&&e.length>1&&"object"==typeof e[1]&&!b(e[1])?e[1]:void 0}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){if("string"==typeof e)return c(e);var t=e.shift(),r={},n=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(r=e.shift());e.length;)n.push(u(e.shift()));var i="";for(var o in r)i+=" "+o+'="'+c(r[o])+'"';return"img"==t||"br"==t||"hr"==t?"<"+t+i+"/>":"<"+t+i+">"+n.join("")+"</"+t+">"}function d(e,t,r){var n;r=r||{};var i=e.slice(0);"function"==typeof r.preprocessTreeNode&&(i=r.preprocessTreeNode(i,t));var o=l(i);if(o){i[1]={};for(n in o)i[1][n]=o[n];o=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",o&&delete o.references;break;case"code_block":i[0]="pre",n=o?2:1;var a=["code"];a.push.apply(a,i.splice(n,i.length-n)),i[n]=a;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":i[0]="a";var s=t[o.ref];if(!s)return o.original;delete o.ref,o.href=s.href,s.title&&(o.title=s.title),delete o.original;break;case"img_ref":i[0]="img";var s=t[o.ref];if(!s)return o.original;delete o.ref,o.src=s.href,s.title&&(o.title=s.title),delete o.original}if(n=1,o){for(var c in i[1]){n=2;break}1===n&&i.splice(n,1)}for(;n<i.length;++n)i[n]=d(i[n],t,r);return i}function f(e){for(var t=l(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(f(e[t]),++t)}var h=t.Markdown=function(e){switch(typeof e){case"undefined":this.dialect=h.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in h.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=h.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(e,t){return new h(t).toTree(e)},t.toHTML=function(e,r,n){var i=t.toHTMLTree(e,r,n);return t.renderJsonML(i)},t.toHTMLTree=function(e,t,r){"string"==typeof e&&(e=this.parse(e,t));var n=l(e),i={};n&&n.references&&(i=n.references);var o=d(e,i,r);return f(o),o};var g=h.mk_block=function(e,t,i){1==arguments.length&&(t="\n\n");var o=new String(e);return o.trailing=t,o.inspect=n,o.toSource=r,void 0!=i&&(o.lineNumber=i),o};h.prototype.split_blocks=function(e,t){e=e.replace(/(\r\n|\n|\r)/g,"\n");var r,n=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,o=[],a=1;for(null!=(r=/^(\s*\n)/.exec(e))&&(a+=i(r[0]),n.lastIndex=r[0].length);null!==(r=n.exec(e));)"\n#"==r[2]&&(r[2]="\n",n.lastIndex--),o.push(g(r[1],r[2],a)),a+=i(r[0]);return o},h.prototype.processBlock=function(e,t){var r=this.dialect.block,n=r.__order__;if("__call__"in r)return r.__call__.call(this,e,t);for(var i=0;i<n.length;i++){var o=r[n[i]].call(this,e,t);if(o)return(!b(o)||o.length>0&&!b(o[0]))&&this.debug(n[i],"didn't return a proper array"),o}return[]},h.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},h.prototype.toTree=function(e,t){var r=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{for(this.tree=t||this.tree||["markdown"];r.length;){var i=this.processBlock(r.shift(),r);i.length&&this.tree.push.apply(this.tree,i)}return this.tree}finally{t&&(this.tree=n)}},h.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,e)},h.prototype.loop_re_over_block=function(e,t,r){for(var n,i=t.valueOf();i.length&&null!=(n=e.exec(i));)i=i.substr(n[0].length),r.call(this,n);return i},h.dialects={},h.dialects.Gruber={block:{atxHeader:function(e,t){var r=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(r){var n=["header",{level:r[1].length}];return Array.prototype.push.apply(n,this.processInline(r[2])),r[0].length<e.length&&t.unshift(g(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[n]}},setextHeader:function(e,t){var r=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(r){var n="="===r[2]?1:2,i=["header",{level:n},r[1]];return r[0].length<e.length&&t.unshift(g(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[i]}},code:function(e,t){var r=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(n)){e:for(;;){var i=this.loop_re_over_block(n,e.valueOf(),function(e){r.push(e[1])});if(i.length){t.unshift(g(i,e.trailing));break e}if(!t.length)break e;if(!t[0].match(n))break e;r.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",r.join("\n")]]}},horizRule:function(e,t){var r=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(r){var n=[["hr"]];return r[1]&&n.unshift.apply(n,this.processBlock(r[1],[])),r[3]&&t.unshift(g(r[3])),n}},lists:function(){function e(e){return new RegExp("(?:^("+l+"{0,"+e+"} {0,3})("+o+")\\s+)|(^"+l+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function r(e,t,r,n){if(t)return void e.push(["para"].concat(r));var i=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;n&&e.length>1&&r.unshift(n);for(var o=0;o<r.length;o++){var a=r[o];"string"==typeof a&&i.length>1&&"string"==typeof i[i.length-1]?i[i.length-1]+=a:i.push(a)}}function n(e,t){for(var r=new RegExp("^("+l+"{"+e+"}.*?\\n?)*$"),n=new RegExp("^"+l+"{"+e+"}","gm"),i=[];t.length>0&&r.exec(t[0]);){var o=t.shift(),a=o.replace(n,"");i.push(g(a,o.trailing,o.lineNumber))}return i}function i(e,t,r){var n=e.list,i=n[n.length-1];if(!(i[1]instanceof Array&&"para"==i[1][0]))if(t+1==r.length)i.push(["para"].concat(i.splice(1,i.length-1)));else{var o=i.pop();i.push(["para"].concat(i.splice(1,i.length-1)),o)}}var o="[*+-]|\\d+\\.",a=/[*+-]/,s=new RegExp("^( {0,3})("+o+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(o,l){function c(e){var t=a.exec(e[2])?["bulletlist"]:["numberlist"];return p.push({list:t,indent:e[1]}),t}var u=o.match(s);if(u){for(var d,f,p=[],h=c(u),g=!1,b=[p[0].list];;){for(var _=o.split(/(?=\n)/),v="",m=0;m<_.length;m++){var w="",T=_[m].replace(/^\n/,function(e){return w=e,""}),E=e(p.length);if(u=T.match(E),void 0!==u[1]){v.length&&(r(d,g,this.processInline(v),w),g=!1,v=""),u[1]=t(u[1]);var k=Math.floor(u[1].length/4)+1;if(k>p.length)h=c(u),d.push(h),d=h[1]=["listitem"];else{var A=!1;for(f=0;f<p.length;f++)if(p[f].indent==u[1]){h=p[f].list,p.splice(f+1,p.length-(f+1)),A=!0;break}A||(k++,k<=p.length?(p.splice(k,p.length-k),h=p[k-1].list):(h=c(u),d.push(h))),d=["listitem"],h.push(d)}w=""}T.length>u[0].length&&(v+=w+T.substr(u[0].length))}v.length&&(r(d,g,this.processInline(v),w),g=!1,v="");var C=n(p.length,l);C.length>0&&(y(p,i,this),d.push.apply(d,this.toTree(C,[])));var O=l[0]&&l[0].valueOf()||"";if(!O.match(s)&&!O.match(/^ /))break;o=l.shift();var N=this.dialect.block.horizRule(o,l);if(N){b.push.apply(b,N);break}y(p,i,this),g=!0}return b}}}(),blockquote:function(e,t){if(e.match(/^>/m)){var r=[];if(">"!=e[0]){for(var n=e.split(/\n/),i=[],o=e.lineNumber;n.length&&">"!=n[0][0];)i.push(n.shift()),o++;var a=g(i.join("\n"),"\n",e.lineNumber);r.push.apply(r,this.processBlock(a,[])),e=g(n.join("\n"),e.trailing,o)}for(;t.length&&">"==t[0][0];){var s=t.shift();e=g(e+e.trailing+s,s.trailing,e.lineNumber)}var c=e.replace(/^> ?/gm,""),u=(this.tree,this.toTree(c,["blockquote"])),d=l(u);return d&&d.references&&(delete d.references,_(d)&&u.splice(1,1)),r.push(u),r}},referenceDefn:function(e,t){var r=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(e.match(r)){l(this.tree)||this.tree.splice(1,0,{});var n=l(this.tree);void 0===n.references&&(n.references={});var i=this.loop_re_over_block(r,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=n.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])});return i.length&&t.unshift(g(i,e.trailing)),[]}},para:function(e,t){return[["para"].concat(this.processInline(e))]}}},h.dialects.Gruber.inline={__oneElement__:function(e,t,r){var n,i;if(t=t||this.dialect.inline.__patterns__,!(n=new RegExp("([\\s\\S]*?)("+(t.source||t)+")").exec(e)))return[e.length,e];if(n[1])return[n[1].length,n[1]];var i;return n[2]in this.dialect.inline&&(i=this.dialect.inline[n[2]].call(this,e.substr(n.index),n,r||[])),i=i||[n[2].length,n[2]]},__call__:function(e,t){function r(e){"string"==typeof e&&"string"==typeof i[i.length-1]?i[i.length-1]+=e:i.push(e)}for(var n,i=[];e.length>0;)n=this.dialect.inline.__oneElement__.call(this,e,t,i),e=e.substr(n.shift()),y(n,r);return i},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var r={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(r.title=t[4]),[t[0].length,["img",r]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,"!["]},"[":function(e){var t=String(e),r=h.DialectHelpers.inline_until_char.call(this,e.substr(1),"]");if(!r)return[1,"["];var n,i,o=1+r[0],a=r[1];e=e.substr(o);var s=e.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(s){var l=s[1];if(o+=s[0].length,l&&"<"==l[0]&&">"==l[l.length-1]&&(l=l.substring(1,l.length-1)),!s[3])for(var c=1,u=0;u<l.length;u++)switch(l[u]){case"(":c++;break;case")":0==--c&&(o-=l.length-u,l=l.substring(0,u))}return l=this.dialect.inline.__call__.call(this,l,/\\/)[0],i={href:l||""},void 0!==s[3]&&(i.title=s[3]),n=["link",i].concat(a),[o,n]}return s=e.match(/^\s*\[(.*?)\]/),s?(o+=s[0].length,i={ref:(s[1]||String(a)).toLowerCase(),original:t.substr(0,o)},n=["link_ref",i].concat(a),[o,n]):1==a.length&&"string"==typeof a[0]?(i={ref:a[0].toLowerCase(),original:t.substr(0,o)},n=["link_ref",i,a[0]],[o,n]):[1,"["]},"<":function(e){var t;return null!=(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"==t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(e){return[3,["linebreak"]]}},h.dialects.Gruber.inline["**"]=o("strong","**"),h.dialects.Gruber.inline.__=o("strong","__"),h.dialects.Gruber.inline["*"]=o("em","*"),h.dialects.Gruber.inline._=o("em","_"),h.buildBlockOrder=function(e){var t=[];for(var r in e)"__order__"!=r&&"__call__"!=r&&t.push(r);e.__order__=t},h.buildInlinePatterns=function(e){var t=[];for(var r in e)if(!r.match(/^__.*__$/)){var n=r.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1==r.length?n:"(?:"+n+")")}t=t.join("|"),e.__patterns__=t;var i=e.__call__;e.__call__=function(e,r){return void 0!=r?i.call(this,e,r):i.call(this,e,t)}},h.DialectHelpers={},h.DialectHelpers.inline_until_char=function(e,t){for(var r=0,n=[];;){if(e.charAt(r)==t)return r++,[r,n];if(r>=e.length)return null;var i=this.dialect.inline.__oneElement__.call(this,e.substr(r));r+=i[0],n.push.apply(n,i.slice(1))}},h.subclassDialect=function(e){function t(){}function r(){}return t.prototype=e.block,r.prototype=e.inline,{block:new t,inline:new r}},h.buildBlockOrder(h.dialects.Gruber.block),h.buildInlinePatterns(h.dialects.Gruber.inline),h.dialects.Maruku=h.subclassDialect(h.dialects.Gruber),h.dialects.Maruku.processMetaHash=function(e){for(var t=s(e),r={},n=0;n<t.length;++n)if(/^#/.test(t[n]))r.id=t[n].substring(1);else if(/^\./.test(t[n]))r.class?r.class=r.class+t[n].replace(/./," "):r.class=t[n].substring(1);else if(/\=/.test(t[n])){var i=t[n].split(/\=/);r[i[0]]=i[1]}return r},h.dialects.Maruku.block.document_meta=function(e,t){if(!(e.lineNumber>1)&&e.match(/^(?:\w+:.*\n)*\w+:.*$/)){l(this.tree)||this.tree.splice(1,0,{});var r=e.split(/\n/);for(p in r){var n=r[p].match(/(\w+):\s*(.*)$/),i=n[1].toLowerCase(),o=n[2];this.tree[1][i]=o}return[]}},h.dialects.Maruku.block.block_meta=function(e,t){var r=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(r){var n,i=this.dialect.processMetaHash(r[2]);if(""===r[1]){var o=this.tree[this.tree.length-1];if(n=l(o),"string"==typeof o)return;n||(n={},o.splice(1,0,n));for(a in i)n[a]=i[a];return[]}var s=e.replace(/\n.*$/,""),c=this.processBlock(s,[]);n=l(c[0]),n||(n={},c[0].splice(1,0,n));for(a in i)n[a]=i[a];return c}},h.dialects.Maruku.block.definition_list=function(e,t){var r,n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(n=e.match(i)){for(var a=[e];t.length&&i.exec(t[0]);)a.push(t.shift());for(var s=0;s<a.length;++s){var n=a[s].match(i),l=n[1].replace(/\n$/,"").split(/\n/),c=n[2].split(/\n:\s+/);for(r=0;r<l.length;++r)o.push(["dt",l[r]]);for(r=0;r<c.length;++r)o.push(["dd"].concat(this.processInline(c[r].replace(/(\n)\s+/,"$1"))))}return[o]}},h.dialects.Maruku.block.table=function(e,t){var r,n,i=function(e,t){t=t||"\\s",t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);for(var r,n=[],i=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)");r=e.match(i);)n.push(r[1]),e=r[2];return n.push(e),n},o=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(n=e.match(o))n[3]=n[3].replace(/^\s*\|/gm,"");else if(!(n=e.match(a)))return;var s=["table",["thead",["tr"]],["tbody"]];n[2]=n[2].replace(/\|\s*$/,"").split("|");var l=[];for(y(n[2],function(e){e.match(/^\s*-+:\s*$/)?l.push({align:"right"}):e.match(/^\s*:-+\s*$/)?l.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?l.push({align:"center"}):l.push({})}),n[1]=i(n[1].replace(/\|\s*$/,""),"|"),r=0;r<n[1].length;r++)s[1][1].push(["th",l[r]||{}].concat(this.processInline(n[1][r].trim())));return y(n[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var t=["tr"];for(e=i(e,"|"),r=0;r<e.length;r++)t.push(["td",l[r]||{}].concat(this.processInline(e[r].trim())));s[2].push(t)},this),[s]},h.dialects.Maruku.inline["{:"]=function(e,t,r){if(!r.length)return[2,"{:"];var n=r[r.length-1];if("string"==typeof n)return[2,"{:"];var i=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!i)return[2,"{:"];var o=this.dialect.processMetaHash(i[1]),a=l(n);a||(a={},n.splice(1,0,a));for(var s in o)a[s]=o[s];return[i[0].length,""]},h.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,h.buildBlockOrder(h.dialects.Maruku.block),h.buildInlinePatterns(h.dialects.Maruku.inline);var y,b=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};y=Array.prototype.forEach?function(e,t,r){return e.forEach(t,r)}:function(e,t,r){for(var n=0;n<e.length;n++)t.call(r||e,e[n],n,e)};var _=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0};t.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var r=[];if(t.root)r.push(u(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)r.push(u(e.shift()));return r.join("\n\n")}}(function(){return exports}())},function(module,exports){function e(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function n(e){if(c===clearTimeout)return clearTimeout(e);if((c===t||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function i(){p&&d&&(p=!1,d.length?f=d.concat(f):h=-1,f.length&&o())}function o(){if(!p){var e=r(i);p=!0;for(var t=f.length;t;){for(d=f,f=[];++h<t;)d&&d[h].run();h=-1,t=f.length}d=null,p=!1,n(e)}}function a(e,t){this.fun=e,this.array=t}function s(){}var l,c,u=module.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(t){l=e}try{c="function"==typeof clearTimeout?clearTimeout:t}catch(e){c=t}}();var d,f=[],p=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||p||r(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.prependListener=s,u.prependOnceListener=s,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(module,exports,e){"use strict";function t(e){if("object"!==(void 0===e?"undefined":u(e)))throw new TypeError("addToCart must be passed an object with valid SKU information. OPTIONS PASSED: "+JSON.stringify(e));if("string"!=typeof e.skuId)throw new TypeError("addToCart must be passed an object with valid SKU information. OPTIONS PASSED: "+JSON.stringify(e));if(e.childType&&"string"!=typeof e.childType)throw new TypeError("if childType is passed, it must be a string. OPTIONS PASSED: "+JSON.stringify(e));if(e.childType&&"string"!=typeof e.parentLineItemId)throw new TypeError("if childType is passed, parentLineItemId must also be passed. OPTIONS PASSED: "+JSON.stringify(e));if(e.parentLineItemId&&"string"!=typeof e.parentLineItemId)throw new TypeError("if parentLineItemId is passed, it must be a string. OPTIONS PASSED: "+JSON.stringify(e));if(e.parentLineItemId&&"string"!=typeof e.childType)throw new TypeError("if parentLineItemId is passed, childType must also be passed. OPTIONS PASSED: "+JSON.stringify(e))}function r(e){if(e.length<1)throw new TypeError("addToCart must be passed at least 1 item.");var t=e[0].parentLineItemId;if(e.some(function(e){return e.parentLineItemId!==t}))throw new TypeError("Mixed parentLineItemId is not supported on multi item adds.")}function n(e,t){var r=t.origin;return g({url:(void 0===r?"":r)+"/cart/api/v1/addToCart",data:s(e)})}function i(e){var t=void 0,r={};if(e&&(r=_(e),r.summaryItems&&(r.items=r.summaryItems,delete r.summaryItems),r.errorSummary&&(r.error=r.errorSummary,delete r.errorSummary),r.items&&r.items.forEach(function(e){e.errorSummary&&(e.error=e.errorSummary,delete e.errorSummary)})),r.error)t=r.error;else{if(!(r.items&&r.items[0]&&r.items[0].error))return!1;t=r.items[0].error}return"string"==typeof t.errorCode&&"string"==typeof t.message}function o(e,t){var r=_(e);if(r.items=(e.summaryItems||[]).map(function(e,r){return a(e,t[r]||t)}),delete r.summaryItems,e.errorSummary){var n=r.errorSummary,i=n.message,o=n.errorCode;delete r.errorSummary,r.error=!0,r.msg=i,r.errorCode=o}return 1===r.items.length?f(r,r.items[0]):r.requestOptions=1===t.length?t[0]:t,r}function a(e,t){var r=e.lineId,n=e.skuId,i=e.productId,o=e.errorSummary||e.error,a=p(c({},e,{commerceItemId:r,lineId:null,product:{skuId:n,productId:i},requestOptions:t}));return o?c({},a,{error:!0,errorCode:o.errorCode,msg:o.message}):a}function s(e){return p({items:e.map(function(e){var t=e.childType||null,r=e.giftList||null;return{skuId:e.skuId,quantity:e.quantity,storeId:e.storeId,condition:e.listingId,subscription:e.subscription,parentLineItemId:e.parentLineItemId,associationType:v[t]||t,solutionPackageItem:e.solutionPackageItem,giftList:r&&{giftListId:r.giftlistId,giftListItemId:r.giftlistItemId,giftListType:r.giftlistType,firstName:r.listOwnerFirstName,lastName:r.listOwnerLastName,eventDescription:r.eventDescription,eventDate:r.eventDate}}})})}function l(e){function a(){e.forEach(function(e){return h.trigger("addToCart:done",e)})}var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Array.isArray(e)?e:[e],Promise.resolve().then(function(){return e.forEach(function(e){return t(e)}),r(e),e.forEach(function(e){return h.trigger("addToCart:adding",e)}),n(e,s)}).then(function(t){if(!t)throw new TypeError("Add to cart service returned no body!");var r=o(t,e);return r.items.forEach(function(t,r){h.trigger("addToCart:done:success",t),h.trigger("addToCart:done:successInfo",e[r])}),a(),d(r)}).catch(function(t){var r={errorSummary:{errorCode:"DEFAULTERROR",message:"There was a problem adding your product to cart."},summaryItems:e.map(function(e){return{skuId:e.skuId}})};i(t)?r=t:t.message&&(r.errorSummary.message=t.message);var n=o(r,e);return n.items.forEach(function(e){return h.trigger("addToCart:done:fail",e)}),a(),Promise.reject(n)})}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=e(29),f=e(27),p=e(30),h=e(26),g=e(25),y=e(36),b=e(28),_=function(e){return JSON.parse(JSON.stringify(e))},v={ASSOCIATED_ITEM:"associatedItem",GSINSTALL:"geekSquadInstall",REQUIREDACCESSORY:"requiredAccessory",COMPLETEYOURPURCHASE:"completeYourPurchase",WARRANTY:"warranty"},m=new b(1);module.exports=function(e,t){var r=y.Deferred();return m.add(function(){return l(e,t)}).then(function(e){return r.resolve(e)}).catch(function(e){return r.reject(e)}),r.promise()}},function(module,exports,e){"use strict";module.exports=function(e){var t=e.url,r=e.data;return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.withCredentials=!0,i.onload=function(){var t=i.status,r=i.responseText,o={error:!0},a=!1;try{o=JSON.parse(r),a=!0}catch(e){}a&&t>=200&&t<400?e(o):n(o)},i.onerror=function(){return n(i)},i.send("string"==typeof r?r:JSON.stringify(r))})}},function(module,exports,e){"use strict";module.exports={trigger:function(){if(window.EventManager)return window.EventManager.trigger.apply(window.EventManager,arguments)}}},function(module,exports,e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return null!==e&&"object"===(void 0===e?"undefined":t(e))};module.exports=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce(function(t,n){for(var i in n){var o=n[i];if(null!==o||void 0!==o){var a=t[i];t[i]=r(a)&&r(o)?e(a,o):o}}return t})}},function(module,exports,e){"use strict";var t,r,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,o){"object"===n(exports)?module.exports=o():(t=o,void 0!==(r="function"==typeof t?t.call(exports,e,exports,module):t)&&(module.exports=r))}(0,function(){function e(e,t){this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}var t="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},r=function(){},n=function(e){return e&&"function"==typeof e.then?e:new t(function(t){t(e)})};return e.configure=function(e){t=e},e.prototype.add=function(e){var n=this;return new t(function(t,i,o){if(n.queue.length>=n.maxQueuedPromises)return void i(new Error("Queue limit reached"));n.queue.push({promiseGenerator:e,resolve:t,reject:i,notify:o||r}),n._dequeue()})},e.prototype.getPendingLength=function(){return this.pendingPromises},e.prototype.getQueueLength=function(){return this.queue.length},e.prototype._dequeue=function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t=this.queue.shift();return!!t&&(this.pendingPromises++,n(t.promiseGenerator()).then(function(r){e.pendingPromises--,e._dequeue(),t.resolve(r)},function(r){e.pendingPromises--,e._dequeue(),t.reject(r)},function(e){t.notify(e)}),!0)},e})},function(module,exports,e){"use strict";module.exports=function(e){return new Promise(function(t){return setTimeout(function(){return setTimeout(function(){return t(e)},0)},0)})}},function(module,exports,e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};module.exports=function e(r){if("object"===(void 0===r?"undefined":t(r))){var n=Array.isArray(r)?[]:{};for(var i in r){var o=r[i];r.hasOwnProperty(i)&&null!==o&&void 0!==o&&(n[i]=e(o))}return n}return r}},function(module,exports){"function"==typeof Object.create?module.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(module,exports){module.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(module,exports,e){(function(t,r){function n(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(t)?r.showHidden=t:t&&exports._extend(r,t),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,e,r.depth)}function i(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function s(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return _(n)||(n=s(e,n,r)),n}var i=l(e,t);if(i)return i;var o=Object.keys(t),h=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),k(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(t);if(0===o.length){if(A(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return c(t)}var y="",b=!1,v=["{","}"];if(p(t)&&(b=!0,v=["[","]"]),A(t)){y=" [Function"+(t.name?": "+t.name:"")+"]"}if(w(t)&&(y=" "+RegExp.prototype.toString.call(t)),E(t)&&(y=" "+Date.prototype.toUTCString.call(t)),k(t)&&(y=" "+c(t)),0===o.length&&(!b||0==t.length))return v[0]+y+v[1];if(r<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var m;return m=b?u(e,t,r,h,o):o.map(function(n){return d(e,t,r,h,n,b)}),e.seen.pop(),f(m,y,v)}function l(e,t){if(m(t))return e.stylize("undefined","undefined");if(_(t)){
var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)I(t,String(a))?o.push(d(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,r,n,i,!0))}),o}function d(e,t,r,n,i,o){var a,l,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?l=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(l=e.stylize("[Setter]","special")),I(n,i)||(a="["+i+"]"),l||(e.seen.indexOf(c.value)<0?(l=g(r)?s(e,c.value,null):s(e,c.value,r-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return l;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}function f(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function b(e){return"number"==typeof e}function _(e){return"string"==typeof e}function v(e){return"symbol"==typeof e}function m(e){return void 0===e}function w(e){return T(e)&&"[object RegExp]"===O(e)}function T(e){return"object"==typeof e&&null!==e}function E(e){return T(e)&&"[object Date]"===O(e)}function k(e){return T(e)&&("[object Error]"===O(e)||e instanceof Error)}function A(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}function x(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;exports.format=function(e){if(!_(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,o=i.length,a=String(e).replace(P,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),s=i[r];r<o;s=i[++r])g(s)||!T(s)?a+=" "+s:a+=" "+n(s);return a},exports.deprecate=function(e,n){function i(){if(!o){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),o=!0}return e.apply(this,arguments)}if(m(t.process))return function(){return exports.deprecate(e,n).apply(this,arguments)};if(!0===r.noDeprecation)return e;var o=!1;return i};var S,D={};exports.debuglog=function(e){if(m(S)&&(S=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(S)){var t=r.pid;D[e]=function(){var r=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,t,r)}}else D[e]=function(){};return D[e]},exports.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=p,exports.isBoolean=h,exports.isNull=g,exports.isNullOrUndefined=y,exports.isNumber=b,exports.isString=_,exports.isSymbol=v,exports.isUndefined=m,exports.isRegExp=w,exports.isObject=T,exports.isDate=E,exports.isError=k,exports.isFunction=A,exports.isPrimitive=C,exports.isBuffer=e(32);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",x(),exports.format.apply(exports,arguments))},exports.inherits=e(31),exports._extend=function(e,t){if(!t||!T(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(exports,e(34),e(23))},function(module,exports){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}module.exports=e},function(module,exports){module.exports=i},function(module,exports){module.exports=o},function(module,exports){module.exports=s},function(module,exports,e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(){return window.liveConfig&&window.liveConfig.beagleApiPath?window.liveConfig.beagleApiPath:"/wireless"}function n(){return!(!window.liveConfig||!window.liveConfig.beagleTransactionUrl)&&window.liveConfig.beagleTransactionUrl}function i(e,t){return e+="?skuId="+t.skuId,t.listingId&&(e+="&listingId="+t.listingId),t.sellerId&&(e+="&sellerId="+t.sellerId),t.purchaseType&&(e+="&purchaseType="+t.purchaseType),e}function o(e){if(void 0===e.skuId)throw new ReferenceError("skuId should exist as a property of the params");if("string"!=typeof e.skuId)throw new TypeError("skuId should be a string");var t="l";void 0!==(0,k.getCookie)("bby_rdp")&&(t=(0,k.getCookie)("bby_rdp")),(0,_.default)(y.default)(null,function(e,t){f.default.$("body").append(f.default.$(t))});var o=void 0;if(n()){return o=i(T.default.urlRoot()+r()+n(),e),e.numberOfPayments&&(o+="&numberOfPayments="+e.numberOfPayments),window.location.assign(o),h.default.resolve()}o=i(T.default.urlRoot()+r()+"/transactionTypes",e)+"&v="+t;var l=u.default.partial(f.default.$.ajax,{url:o});if(!document.getElementById("adttlb-modal"))return h.default.resolve(l()).then(function(r){if(a(r)){var n=new m.default({model:new f.default.Model(s(r,t)),skuId:e.skuId,listingId:e.listingId,sellerId:e.sellerId,purchaseType:e.purchaseType,numberOfPayments:e.numberOfPayments});f.default.$("body").append(n.render().el),n.$("#adttlb-modal").modal()}}).lastly(function(){f.default.$("#adttlb-spinner","body").remove()})}function a(e){return e&&!(e.errors&&e.errors.length>0)}function s(e,t){var r=e,n=[],i=[],o=r.carrierDetails,a=r.carrier;if("UNLOCKEDPHONE"===r.connectionType){var s=u.default.find(r.transactionTypes,function(e){return"UPGRADE"===e.transactionType}),c=u.default.find(r.transactionTypes,function(e){return"ADD_ON"===e.transactionType}),d=u.default.find(r.transactionTypes,function(e){return"NEW"===e.transactionType});s&&s.activatedDeviceItems&&(i=s.activatedDeviceItems,i.forEach(function(e){e.upgradePrice=e.price}),n=u.default.union(n,i)),c&&c.activatedDeviceItems&&(i=c.activatedDeviceItems,i.forEach(function(e){e.addOnPrice=e.price}),n=u.default.union(n,i)),d&&d.activatedDeviceItems&&(i=d.activatedDeviceItems,i.forEach(function(e){e.newPrice=e.price}),n=u.default.union(n,i))}if(r.connectionType===E.CONNECTION_TYPE.UNLOCKEDPHONE&&n.length>0&&o){r.hideBodyCopy=!0,n=(0,u.default)(n).groupBy("carrierCode").map(u.default.spread(u.default.assign)).value();var f=1;n.map(function(e){e.startingPrice=Math.min.apply(null,[e.newPrice,e.upgradePrice,e.addOnPrice].filter(function(e){return!isNaN(e)})),e.startingPrice!==r.replacementPrice&&(r.hideBodyCopy=!1),l(e.upgradePrice,e.addOnPrice,e.newPrice)&&(e.superScript=f,f++,e.disclaimer="New line or new account $"+e.newPrice+", upgrade $"+e.upgradePrice+".");var t=u.default.find(o,function(t){return t.code===e.carrierCode});t&&(e.displayName=t.name,e.carrierLogo=t.logoPath)})}else n=[],o&&o.length>0?n.push({carrierCode:o[0].code,displayName:o[0].name,carrierLogo:o[0].logoPath}):n.push({carrierCode:a.carrierId,displayName:a.displayName,carrierLogo:a.largeImageUrl});return r.carrierOptions=n,r.viewType=t,r}function l(e,t,r){var n=[];return e&&n.push(e),t&&n.push(t),r&&n.push(r),u.default.uniq(n).length>1}Object.defineProperty(exports,"__esModule",{value:!0});var c=e(6),u=t(c),d=e(4),f=t(d),p=e(13),h=t(p),g=e(5),y=t(g),b=e(12),_=t(b),v=e(11),m=t(v),w=e(3),T=t(w),E=e(2),k=e(10);exports.default=o,module.exports=exports.default}])});