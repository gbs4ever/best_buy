/* Src File:"widget-dds/provider-98dd13790ea8a0f016d514f2a8c077be.js" @ Mon Jan 28 2019 15:22:59 GMT-0600 (CST) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: origin/release/19.05 BUILD_CAUSE: MANUALTRIGGER Build Version: version-not-found */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DDSWidget=t():e.DDSWidget=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([,,,,,,,function(e,t,n){"use strict";function r(e,t){if("object"===(void 0===e?"undefined":o(e)))return e[t]}function i(e,t){return t.split(".").reduce(r,e)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.get=i},,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(16),u=n(17),c=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(t){r(this,e),this.fetchWidgetDataConfig=t||new c.default,this.buildWidgetElements=this.buildWidgetElements.bind(this),this.buildBatchRequests=this.buildBatchRequests.bind(this),this.provide=this.provide.bind(this)}return i(e,[{key:"buildWidgetElements",value:function(e){var t={};return e.forEach(function(e){var n=e.getAttribute("data-site-node-public-id");void 0===t[n]&&(t[n]=[]),t[n].push(e)}),t}},{key:"buildBatchRequests",value:function(e){var t=this;return Object.keys(e).map(function(n){return new Promise(function(r,i){var u=e[n],c=u.length;(0,o.fetchEpsAndWidgetData)(n,c,t.fetchWidgetDataConfig).then(function(e){e.forEach(function(e,t){if(e){var n=e.ep,r=e.widgetData,i=u[t];i.setAttribute("data-ep-value",n),i.setAttribute("data-child-widget",JSON.stringify(r))}}),r(e)}).catch(i)})})}},{key:"provide",value:function(e){var t=this;return new Promise(function(n,r){var i=e.el.find(".widget-dds").toArray();if(i.length>0){var o=t.buildWidgetElements(i),u=t.buildBatchRequests(o);Promise.all(u).then(function(){e.context.require(["widget-dds/client"],function(t){e.context.DDSWidget=t,e.clientHelper.setupWidgets(".widget-dds",e.el[0]),n(i)})}).catch(r)}else n()})}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2];t<1&&(t=1);var r=Array(t).fill(n.subPlacementPrefix()).map(function(e,t){return""+e+t}),i=n.recommendationsUrl(e,r.join(","));return fetch(i).then(function(e){return e.json()}).then(function(e){var t=[];return r.forEach(function(n){t.push(e[n])}),t})}function i(e,t,n){var r=n.contentUrl(e,t);return fetch(r).then(function(e){return e.json()}).then(function(e){var t=e.widget,n=e.relations;if(void 0!==t&&void 0!==n){var r=t.content["object-key"],i=n.assets.filter(function(e){return e.assetId===r});if(i.length>0){var o=i[0];o.content&&Object.keys(o.content.attributes).forEach(function(e){t.content[e]=o.content.attributes[e]})}return t}})}function o(e,t,n){return r(e,t,n).then(function(t){var r=t.map(function(t){return i(e,t.id,n).then(function(e){return{ep:t.ep,widgetData:e}})});return Promise.all(r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWidgetIdsAndEpsFromRecs=r,t.fetchWidgetDataFromContent=i,t.fetchEpsAndWidgetData=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(18),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.subPlacePrefix=t.subPlacementPrefix||"subplmt"}return i(e,[{key:"recommendationsUrl",value:function(e,t){return("www.bestbuy.com"===window.location.host?"//context.bestbuy.com/api/content/v1":"//pl.context.bestbuy.com/api/content/v1")+"?apiKey=D50&site="+("s"===(0,o.getCookieValue)("bby_rdp")?"dotcom-s":"dotcom-l")+"&plmt="+e+"&subplmt="+t+"&c_id="+(0,o.getCookieValue)("context_id")+"&ut_id="+(0,o.getCookieValue)("ut")}},{key:"contentUrl",value:function(e,t){return((0,o.get)(window,"_metaLayer.env_appServer")||"")+"/browse-api/1.0/scds/tenant/bbypres/pages/"+e+"/widgets/"+t}},{key:"subPlacementPrefix",value:function(){return this.subPlacePrefix}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(19);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,n){"use strict";function r(e){var t=document.cookie,n=t.indexOf(e);if(-1!==n){var r=t.indexOf("=",n),i=t.indexOf(";",n);if(-1===i&&(i=t.length),-1!==r&&r<i)return t.slice(r+1,i)}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.getCookieValue=r}])});