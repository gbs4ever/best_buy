/*!
 * ude-1.26.3
 * 
 * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an
 * unpublished, proprietary work which is fully protected under
 * copyright law. This code may only be used pursuant to a valid
 * license from 24/7 Customer, Inc. http://www.247-inc.com
 */
!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=704)}({10:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SECURITY:{FRAME_IN_FRAME:"frame-in-frame",THIRD_PARTY_FRAME:"third-party-frame"},IFRAME_POST_MESSAGE:{SET_IFRAME_CSS:"SET_SN_IFRAME_CSS",SET_IFRAME_VIEWPORT:"SET_VIEWPORT",GET_BODY_CSS:"GET_BODY_CSS",SET_BODY_CSS:"SET_BODY_CSS"},IFRAME_INBOUND_MESSAGE:{MESSAGE_SOURCE:"_247_",RESP_GET_BODY_CSS:"RESP_GET_BODY_CSS"},IFRAME_BODY:"IFRAME_BODY"}},107:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(12)),u=a(n(3)),s=a(n(14)),l=a(n(6)),d=a(n(9)),c=a(n(24)),f=a(n(183)),p=!1,h=void 0,v=void 0,E=void 0,_=void 0,g={},I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(e){var t=this;if(!p){h=e.storage,u.default.isObject(h,"storage"),u.default.isFunction(h.get,"storage.get"),u.default.isFunction(h.set,"storage.set");try{this._sessionStorage=new f.default("sessionStorage",o.default.TAB_STORAGE_KEY)}catch(e){this._sessionStorage={store:{},getAll:function(){return t._sessionStorage.store},set:function(e,n){t._sessionStorage.store[e]=n}}}v=o.default.STORAGE_KEY_NAMES.TAB_SESSION,E=o.default.STORAGE_KEY_NAMES.TAB_PREFIX,this.isExistingTab=!1,_=this._getTabId(),this._onStoreUpdate=e.onStoreUpdate,this.tab={set:function(e,n){return t._set(e,n,o.default.TAB_SESSION_KEY)},get:function(e){return t._get(e,o.default.TAB_SESSION_KEY)}},this.browser={set:function(e,n){return t._set(e,n,o.default.BROWSER_SESSION_KEY)},get:function(e){return t._get(e,o.default.BROWSER_SESSION_KEY)}},h.addStorageListener(function(e){try{var t=e.newValue,n=e.oldValue;if(t[o.default.SOURCE]===t[this.getTabId()])return;Object.keys(t).length>0&&(this._notifyListeners(n,t),this._onStoreUpdate(t))}catch(e){}}.bind(this));var n=e.activeSession;this._checkAndInitWorkflowSession(o.default.CHAT_SESSION_KEY),this._checkAndInitWorkflowSession(o.default.VA_SESSION_KEY),this._checkAndInitWorkflowSession(o.default.MESSAGING_SESSION_KEY);var a=this.browser.get(o.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION);n&&n!==a&&!e.interLobEnabled&&(this.removeSessionData(),this.browser.set(o.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION,n)),this.tab.set("app",{tabId:this.getTabId()}),p=!0}}},{key:"_checkAndInitWorkflowSession",value:function(e){var t,n,a,i=this.browser.get(e);if(d.default.isUndefinedorNull(i)){var r=(a={},(n=e)in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t);this.browser.set(r)}}},{key:"_getTabId",value:function(){var e=void 0;try{var t=this._sessionStorage.getAll();(e=d.default.get(["id"],t))&&e.indexOf(E)>=0?this.isExistingTab=!0:(e=E+c.default.get(5),this._sessionStorage.set("id",e))}catch(e){}return e}},{key:"_getData",value:function(e){return e===o.default.TAB_SESSION_KEY?h.get(_):e===o.default.BROWSER_SESSION_KEY?h.get(v):h.get(e)}},{key:"_setData",value:function(e,t){var n=e,a=void 0;t===o.default.BROWSER_SESSION_KEY?a=v:t===o.default.TAB_SESSION_KEY&&(a=_);var i={tabId:_};n.syncCustomStorage&&(i.syncCustomStorage=!0,delete n.syncCustomStorage),h.set(a,n,i)}},{key:"removeSessionData",value:function(e){h.remove(v,e)}},{key:"_get",value:function(e,t){var n=this._getData(t);return e?n?n[e]:void 0:n}},{key:"_set",value:function(e,t,n){if("object"!==(void 0===e?"undefined":i(e))){var a={};a[e]=t,this._setData(a,n)}else this._setData(e,n)}},{key:"addListener",value:function(e,t){u.default.isFunction(t);var n=g[e]?g[e]:[];n.push(t),g[e]=n}},{key:"removeListener",value:function(e,t){if(u.default.isFunction(t),g[e]){var n=g[e];g[e]=n.splice(n.indexOf(t),1)}}},{key:"_notifyListeners",value:function(e,t){var n=this;if(Object.keys(e).length>0){var a=(0,l.default)({},e[v],e[_]),i=(0,l.default)({},t[v],t[_]);Object.keys(g).map(function(e){return n._diff(a,i,e)})}else{var r=(0,l.default)({},t[v],t[_]);Object.keys(g).map(function(e){return r[e]&&n._notify(r[e],e),0})}}},{key:"_diff",value:function(e,t,n){var a=void 0,r=void 0;if(n.indexOf(".")>-1?(a=s.default.getObjectReference(n,e),r=s.default.getObjectReference(n,t)):(a=e[n],r=t[n]),a&&r)if(Array.isArray(a)){if(!s.default.arrayDeepEquals(a,r))return this._notify(r,n)}else{if("object"===(void 0===a?"undefined":i(a)))return this._diff(a,r,n);if(a!==r)return this._notify(r,n)}else if(a||r)return this._notify(r,n);return 0}},{key:"_notify",value:function(e,t){g[t]&&g[t].map(function(n){return n(t,e)})}},{key:"getTabId",value:function(){return _}},{key:"getSource",value:function(){return this._getData(o.default.SOURCE)}}]),e}();t.default=new I},11:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},110:function(e,t,n){var a=n(10),i=n(70),r=n(17)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},111:function(e,t,n){e.exports=n(112)},112:function(e,t){t.KEY_CANCEL=3,t.KEY_HELP=6,t.KEY_BACK_SPACE=8,t.KEY_TAB=9,t.KEY_CLEAR=12,t.KEY_RETURN=13,t.KEY_ENTER=14,t.KEY_SHIFT=16,t.KEY_CONTROL=17,t.KEY_ALT=18,t.KEY_PAUSE=19,t.KEY_CAPS_LOCK=20,t.KEY_ESCAPE=27,t.KEY_SPACE=32,t.KEY_PAGE_UP=33,t.KEY_PAGE_DOWN=34,t.KEY_END=35,t.KEY_HOME=36,t.KEY_LEFT=37,t.KEY_UP=38,t.KEY_RIGHT=39,t.KEY_DOWN=40,t.KEY_PRINTSCREEN=44,t.KEY_INSERT=45,t.KEY_DELETE=46,t.KEY_0=48,t.KEY_1=49,t.KEY_2=50,t.KEY_3=51,t.KEY_4=52,t.KEY_5=53,t.KEY_6=54,t.KEY_7=55,t.KEY_8=56,t.KEY_9=57,t.KEY_SEMICOLON=59,t.KEY_EQUALS=61,t.KEY_A=65,t.KEY_B=66,t.KEY_C=67,t.KEY_D=68,t.KEY_E=69,t.KEY_F=70,t.KEY_G=71,t.KEY_H=72,t.KEY_I=73,t.KEY_J=74,t.KEY_K=75,t.KEY_L=76,t.KEY_M=77,t.KEY_N=78,t.KEY_O=79,t.KEY_P=80,t.KEY_Q=81,t.KEY_R=82,t.KEY_S=83,t.KEY_T=84,t.KEY_U=85,t.KEY_V=86,t.KEY_W=87,t.KEY_X=88,t.KEY_Y=89,t.KEY_Z=90,t.KEY_CONTEXT_MENU=93,t.KEY_NUMPAD0=96,t.KEY_NUMPAD1=97,t.KEY_NUMPAD2=98,t.KEY_NUMPAD3=99,t.KEY_NUMPAD4=100,t.KEY_NUMPAD5=101,t.KEY_NUMPAD6=102,t.KEY_NUMPAD7=103,t.KEY_NUMPAD8=104,t.KEY_NUMPAD9=105,t.KEY_MULTIPLY=106,t.KEY_ADD=107,t.KEY_SEPARATOR=108,t.KEY_SUBTRACT=109,t.KEY_DECIMAL=110,t.KEY_DIVIDE=111,t.KEY_F1=112,t.KEY_F2=113,t.KEY_F3=114,t.KEY_F4=115,t.KEY_F5=116,t.KEY_F6=117,t.KEY_F7=118,t.KEY_F8=119,t.KEY_F9=120,t.KEY_F10=121,t.KEY_F11=122,t.KEY_F12=123,t.KEY_F13=124,t.KEY_F14=125,t.KEY_F15=126,t.KEY_F16=127,t.KEY_F17=128,t.KEY_F18=129,t.KEY_F19=130,t.KEY_F20=131,t.KEY_F21=132,t.KEY_F22=133,t.KEY_F23=134,t.KEY_F24=135,t.KEY_NUM_LOCK=144,t.KEY_SCROLL_LOCK=145,t.KEY_COMMA=188,t.KEY_PERIOD=190,t.KEY_SLASH=191,t.KEY_BACK_QUOTE=192,t.KEY_OPEN_BRACKET=219,t.KEY_BACK_SLASH=220,t.KEY_CLOSE_BRACKET=221,t.KEY_QUOTE=222,t.KEY_META=224},118:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e;return t&&t.widgets&&(t.widgets=r(t.widgets)),t}function r(e){var t=e;return t.forEach(function(e){switch(e.type){case"listinput":e.inputtype&&(e.inputType=e.inputType||e.inputtype,delete e.inputtype),e.boxcolor&&(e.optionColor=e.optionColor||e.boxcolor,delete e.boxcolor),e.options=e.options||e.boxes,delete e.boxes,e.options.forEach(function(e){e.imgsrc&&(e.imgSrc=e.imgSrc||e.imgsrc,delete e.imgsrc)});break;case"text":e.number&&s.default.isString(e.number)&&(e.number=parseInt(e.number,10));break;case"panel":e.widgets&&s.default.isArray(e.widgets)&&(e.widgets=r(e.widgets))}}),t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=a(n(6)),s=a(n(44)),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"transformPage",value:function(e){return i(e)}},{key:"transform",value:function(e){var t,n,a,o=(0,u.default)({},e);o.workflowConfig&&(o.workflowConfig=(t=o.workflowConfig,n={},t.messaging&&(n.messaging=t.messaging),t.va&&(n.va=t.va),t.chat&&(n.chat=t.chat),t.assistAccountId&&(n.chat={}),t.vaApiKey&&(n.va={}),Object.keys(t).forEach(function(e){e.indexOf("assist")>-1&&"chat"!==e&&(n.chat[e]=t[e]),e.indexOf("va")>-1&&"va"!==e&&(n.va[e]=t[e])}),n)),o.windowPosition&&(o.windowPosition="left"===(a=o.windowPosition)?"bottomleft":"right"===a?"bottomright":a);var l,d,c,f,p,h,v,E,_=function(e){if(!1===e.branding)return!1;if(e.branding&&!1===e.branding.type)return!1;if(!1===e.brandingType)return!1;if(void 0!==e.brandingType){var t={};return t.type=e.brandingType,t.logoUrl=e.brandingLogoUrl,t.avatarUrl=e.brandingAvatarUrl,t.agentDesc=e.brandingAgentDesc,t}return e.branding}(o);return _?o.branding=_:delete o.branding,e.buttonFgColor&&(o.secondaryFgColor=e.buttonFgColor,o.tertiaryFgColor=e.buttonFgColor,delete o.buttonFgColor),o.headerBorderColor&&(o.header=(0,u.default)({},o.header,(l=o.headerBorderColor,(d={}).borderColor=l,d)),delete o.headerBorderColor),o.windowFontFamily&&(o.fontFamily=o.windowFontFamily,delete o.windowFontFamily),o.borderRadius&&(o.borderRadius=(c=o.borderRadius,"string"==typeof(f=c)&&(f=parseInt(c,10)),f)),o.frontendsService&&(o.frontendsService=(p=o.frontendsService,(h=(0,u.default)({},p)).services&&(h.opts=(0,u.default)({},h.services),delete h.services),h)),o.audioNotify&&o.audioNotify.message&&o.audioNotify.message.mp3&&(o.notifications={audio:{message:o.audioNotify.message.mp3,started:o.audioNotify.message.mp3,reconciled:o.audioNotify.message.mp3}},delete o.audioNotify),o.i18n&&o.i18n.uiStrings&&(o.i18n.uiStrings=(v=o.i18n.uiStrings,E=v,Object.keys(v).forEach(function(e){Object.keys(v[e]).forEach(function(t){E[e][t]=E[e][t].replace(/(\{\{)(.*?)(\}\})/gm,"%{$2}"),"CHAT_WAIT"===t&&(E[e].CHAT_WAIT_LONG=E[e].CHAT_WAIT,E[e].CHAT_WAIT_10MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_5MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_2MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_1MIN=E[e].CHAT_WAIT)})}),E)),o=function(e){var t=e;return["prechat","busy","offline","waiting"].forEach(function(e){t[e]&&t[e].widgets&&(t[e].widgets=r(t[e].widgets))}),["postchat","vaSurvey"].forEach(function(e){t.dialog&&t.dialog[e]&&t.dialog[e].widgets&&(t.dialog[e].widgets=r(t.dialog[e].widgets))}),t.cards&&t.cards.forEach(function(e){s.default.isArray(e.pages)&&e.pages.forEach(function(e){e=i(e)})}),t}(o)}}]),e}();t.default=new l},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={TFS_HIDE_COBROWSE_ID:"tfs_hide_cobrowse",TFS_CONTAINER_ID:"tfs_container",TFS_CONTAINER_ROOT_ID:"tfs_container_root",TFS_CONTAINER_ROOT_PRE_ID:"tfs_container_root_pre",TFS_DRAG_ID:"tfs_drag",TFS_OVERLAY_ID:"tfs_overlay",TFS_IFRAME_ID:"tfs_interaction_iframe",TFS_SCRIPT_ID:"tfs-js-iframe-async",APPLE_SCRIPT_ID:"tfs-js-abc",TFS_RENDERER_SCRIPT_ID:"tfs-js-renderer",VISITOR_SESSION_ID:"visitorSessionId",INTERACTION_ID:"interactionId",CHAT:"chat",QUEUE:"queue",CHAT_STATUS:"chatStatus",TAB_SESSION_KEY:"tab-session-key",BROWSER_SESSION_KEY:"browser-session-key",PREVIOUS_WINDOW_NAME:"previous-window-name",LAST_UPDATED_TIME:"ts",SOURCE:"source",CARDS_RESOURCE_NAME:"cards.js",CARDS_MIN_RESOURCE_NAME:"cards.min.js",WIDGET_LOADER_ID:"widget-loader",XD_SCRIPT_RESOURCE_NAME:"xd.js",XD_SCRIPT_MIN_RESOURCE_NAME:"xd.min.js",REQUIRED_KEYS:["app.context.queue","app.context.accountId","chat.visitorSessionId","chat.domainAliases","chat.startTime","va.turnsId","va.noInput","va.poller","va.vaSurveyCompleted","messaging.userTokenId","messaging.pollInterval","widgetLoaded","initialWorkflow","reload","displayMode","asid","appId"],WORKFLOW:"workflow",PRECHAT_DATA_KEYS:{ACTIVE_SESSION:"asid",RULE_ID:"sc",APP_INTERACTION_ID:"appInteractionId",RULE_CATEGORY:"rc",VISITOR_ID:"vi"},STORE_UPDATE:"STORE_UPDATE",STORE_DELETE:"STORE_DELETE",DISPLAY_MODE:{FULLSCREEN:"fullscreen",FLOATING:"floating",NONE:"none"},FRAME_VIEW:{INPAGE:"inpage",POPUP:"popup"},WIDGET_STATE:{WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",CHAT_TRANSFERRED:"chatTransferred",VA_STARTED:"vaStarted",VA_ESCALATE:"vaEscalatedToChat",VA_SURVEY_COMPLETED:"vaSurveyCompleted",VA_TERMINATE:"vaTerminated",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},ORIENTATIONS:{LANDSCAPE:"landscape",PORTRAIT:"portrait"},JOURNEY:"urls",WIDGET_LOADED:"widgetLoaded",INITIAL_WORKFLOW:"initialWorkflow",INITIATOR:"initiator",SHOW_ON_RELOAD:"reload",DISPLAY_MODE_KEY:"displayMode",CONTENT_PATH:"content",UDE_CONFIG_JSON:"config.json",CONFIG_APP_ID:"appId",TAB_STORAGE_KEY:"tfs-tab",APP_SESSION_KEY:"app",CHAT_SESSION_KEY:"chat",VA_SESSION_KEY:"va",CARDS_SESSION_KEY:"cards",MESSAGING_SESSION_KEY:"messaging",XD_COMMANDS:{INITIALIZE:"init",INITIALIZE_ERROR:"init-error",SET:"set",GET:"get",REMOVE:"remove",UPDATE:"update"},ERROR_CODES:{LOCALSTORAGE_UNAVAILABLE:"LOCALSTORAGE_UNAVAILABLE"},TRACK_PLATFORMS:{chat:"CHAT",va:"VIRTUAL_AGENT"},STATE_CHANGE_EVENT:"stateChange",POSITION:{TOP_LEFT:"topleft",TOP_RIGHT:"topright",BOTTOM_LEFT:"bottomleft",BOTTOM_RIGHT:"bottomright"},INITIAL_STATE:"initialState",IS_RECONCILED:"isReconciled",IFRAME_READY:"iframeReady",VA_TURNS_ID_KEY:"va.turnsId",VISITOR_SESSION_ID_KEY:"chat.visitorSessionId",DOMAIN_ALIASES_KEY:"chat.domainAliases",DEFAULT_CONFIG:"default",USER_LOGIN:"login",USER_PROFILE:"userProfile",MAX_KEYBOARD_HEIGHT:{LANDSCAPE:[{MIN_SCREEN_HEIGHT:600,MAX_SCREEN_HEIGHT:850,KEYBOARD_HEIGHT:400},{MIN_SCREEN_HEIGHT:851,MAX_SCREEN_HEIGHT:1100,KEYBOARD_HEIGHT:475}],PORTRAIT:[{MIN_SCREEN_HEIGHT:800,MAX_SCREEN_HEIGHT:1150,KEYBOARD_HEIGHT:315},{MIN_SCREEN_HEIGHT:1151,MAX_SCREEN_HEIGHT:1500,KEYBOARD_HEIGHT:380}]},STYLE_STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",CARD:"card",PLUSCARD:"pluscard",HIDDEN:"hidden"},STYLE_TRANSITION:{IMMEDIATE:"immediate",SCROLL:"scroll",RESIZE:"resize"},STORAGE_TYPES:{LOCALSTORAGE:"localstorage",CUSTOM:"custom",XD:"xd"},STORAGE_KEY_NAMES:{USER_SESSION:"tfs-user-session",TAB_SESSION:"tfs-session",TAB_PREFIX:"tfs-tab-"}}},123:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(3)),o=a(n(61)),u=a(n(33)),s=a(n(6)),l=a(n(68)),d=a(n(682)),c=!1,f=!1,p=(new Date).getTime(),h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e,t,n){var a=this;r.default.notEmpty(e),r.default.isObject(t),r.default.notEmpty(t.baseUrl),r.default.notEmpty(t.apiKey),r.default.isObject(n),this.loggerConfig=t.opts.logger,this.loggerConfig&&(r.default.isObject(this.loggerConfig),r.default.isNumber(this.loggerConfig.level),r.default.isNumber(this.loggerConfig.flushTrigger)),this._basePath=[t.baseUrl,"clients",e,"applications"].join("/"),this._extraData=n,this._apiKey=t.apiKey,this._flushTrigger=this.loggerConfig.flushTrigger,this._logLevel=this.loggerConfig.level,this._interactions=[],window.addEventListener("beforeunload",function(){a._interactions.length>0&&a.logFlush()}),f=!0}},{key:"setAppId",value:function(e){r.default.notEmpty(e),this._appId=e,c=!0}},{key:"setAppInteractionId",value:function(e){r.default.notEmpty(e),this._extraData.appInteractionId=e}},{key:"unsetAppInteractionId",value:function(){delete this._extraData.appInteractionId}},{key:"logInteraction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c&&f){var n=e,a=n.logLevel;if(r.default.isNumber(a),a&&a<this._logLevel)return;var i={version:"ude-1.26.3",tsOffset:(new Date).getTime()-p,time:d.default.formatDate(new Date),tabVisible:l.default.documentHasFocus()};n.logLevel=u.default.LOG_LEVEL_STRING[a],n.logData=(0,s.default)({},this._extraData,n.logData,i),this._interactions.push(n),(t||this._interactions.length>=this._flushTrigger)&&this.logFlush()}}},{key:"logFlush",value:function(){var e=this._interactions;this._interactions=[];var t=this._basePath+"/"+this._appId+"/interactions";v.makeRequest("post",t,{"Content-Type":"application/json; charset=utf-8",Authorization:this._apiKey},JSON.stringify(e),function(e){},function(e){e.response&&e.response.status})}}]),e}(),v=new o.default;t.default=new h},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"isPopup",value:function(){return window._tfs&&window._tfs.isPopup}},{key:"getWindowParams",value:function(){var e=!1;try{var t=atob(window.name.replace(/_a/g,"+").replace(/_b/g,"/").replace(/_c/g,"="));e=JSON.parse(t)}catch(e){}return e}},{key:"generateSecureWindowName",value:function(e){var t=!1;try{var n=JSON.stringify(e);t=btoa(n).replace(/\+/g,"_a").replace(/\//g,"_b").replace(/=/g,"_c")}catch(e){}return t}}]),e}();t.default=new i},125:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(106)),o=a(n(9)),u=void 0,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){this.isFullScreen=e,this.isFullScreen&&(this.sendMessage(r.default.IFRAME_POST_MESSAGE.GET_BODY_CSS),window.addEventListener("message",this._onInboundMessageReceived.bind(this)))}},{key:"_onInboundMessageReceived",value:function(e){var t=o.default.get(["data"],e);if(!o.default.isUndefinedorNull(t)){try{t=JSON.parse(t)}catch(e){return}if(t.msgSrc===r.default.IFRAME_INBOUND_MESSAGE.MESSAGE_SOURCE)switch(t.msg){case r.default.IFRAME_INBOUND_MESSAGE.RESP_GET_BODY_CSS:u=t.css||{}}}}},{key:"sendMessage",value:function(e,t,n){switch(e){case r.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS:parent.postMessage(JSON.stringify({msg:e,css:t,clean:n}),"*");break;case r.default.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT:parent.postMessage(JSON.stringify({msg:e,content:t}),"*");break;case r.default.IFRAME_POST_MESSAGE.GET_BODY_CSS:parent.postMessage(JSON.stringify({msg:e}),"*");break;case r.default.IFRAME_POST_MESSAGE.SET_BODY_CSS:this.isFullScreen&&(t.isMaximized?parent.postMessage(JSON.stringify({msg:e,css:t.css,clean:n}),"*"):parent.postMessage(JSON.stringify({msg:e,css:u,clean:n}),"*"))}}}]),e}();t.default=new s},129:function(e,t,n){var a=n(31),i=n(26),r=n(50),o=n(22);e.exports=function(e,t,n,u,s){a(t);var l=i(e),d=r(l),c=o(l.length),f=s?c-1:0,p=s?-1:1;if(n<2)for(;;){if(f in d){u=d[f],f+=p;break}if(f+=p,s?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;s?f>=0:c>f;f+=p)f in d&&(u=t(u,d[f],f,l));return u}},13:function(e,t,n){var a=n(10);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(43),o=(a=r)&&a.__esModule?a:{default:a},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"lpad",value:function(e,t,n){var a=n||"0",i=""+e;return i.length>=t?i:new Array(t-i.length+1).join(a)+i}},{key:"trigger",value:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else e.fireEvent("on"+t)}},{key:"openWindow",value:function(e,t,n){var a=o.default.normalizeUrl(e);window.open(a,t,n)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isBlank",value:function(e){return!this.isString(e)||0===e.length}},{key:"arrayDeepEquals",value:function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}},{key:"setValueWithPath",value:function(e,t,n,a){var i=n.split(t);i.reduce(function(e,t,n){var r=e;return n<i.length-1?r[t]=r[t]||{}:r[t]=a,r[t]},e)}},{key:"noop",value:function(){}},{key:"getObjectReference",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return t;for(var n=t,a=e.split("."),i=0;i<a.length;i+=1)if(!(n=n[a[i]]))return;return n}},{key:"getFunctionReference",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var a=e.split("."),i=a.pop(),r=this.getObjectReference(a.join("."),t),o=r[i];if("function"!=typeof o)return;return n?o.bind(r):o}catch(e){}}}]),e}();t.default=new u},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CONFIG_API_ACTION:{PRECHAT_SUBMIT:"prechatSubmit",CHAT_TRANSFERRED:"chatTransferred",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",WIDGET_LOADING:"widgetLoading"}}},15:function(e,t,n){"use strict";(function(e,n){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){},o=window,u=function(e){if(!o&&"object"===i(n)&&n.exports)return{ieVersion:-1,safariVersion:-1,chromeVersion:-1,isMobileSafari:!1,isAndroidTablet:!1,isAndroid:!1,isIpad:!1,isTablet:!1,iosVersion:-1,isPhone:!1,getDevice:"unknown"};var t=/.*Trident.*rv:(\d+)/,a=/Edge\/(\d+)\./,r=function(){var n,i;return function(){var e=3,t=document.createElement("div"),n=void 0;do{e+=1,t.innerHTML="\x3c!--[if gt IE "+e+"]><i></i><![endif]--\x3e",n=t.getElementsByTagName("i")}while(n[0]);return e>4?e:void 0}()||(o.ActiveXObject?10:(n=void 0,(i=t.exec(e))&&(n=parseInt(i[1],10)),(i=a.exec(e))&&(n=parseInt(i[1],10)),n))}(),u=void 0,s=void 0;/Safari\/([0-9.]+)/.test(e)&&/Version\/([0-9.]+)/.test(e)&&(u=RegExp.$1),/Chrome\/([0-9.]+)/.test(e)&&(s=RegExp.$1,u=void 0),r&&(document.documentElement.className+=" ie"+r);var l=-1!==e.indexOf("AppleWebKit")&&e.match(/(iPod|iPhone|iPad)/),d=-1!==e.indexOf("Android"),c=d&&-1===e.indexOf("Mobile"),f=l&&"iPad"===l[0],p=c||f,h=(d||l)&&!p,v=e.match(/(Macintosh)/),E=e.match(/OS (\d+)_(\d+)_?(\d+)?/),_=l&&E&&E.length>1?parseInt(E[1],10):0,g=function(e){return!!e};return{ieVersion:r,safariVersion:u,chromeVersion:s,isMobileSafari:g(l),isAndroidTablet:c,isAndroid:d,isIpad:g(f),isTablet:g(p),iosVersion:_,isPhone:g(h),isMac:g(v),getDevice:function(){var e="desktop";return h&&(e="phone"),p&&(e="tablet"),e}}},s=function(e){function t(e){a(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message=e,n.name="InvalidCharacterError",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.default=new function t(){return a(this,t),o&&function(){if(!o.location.origin){var t=o.location.port,n="";t&&"80"!==t&&"443"!==t&&(n=":"+t),o.location.origin=o.location.protocol+"//"+o.location.hostname+n}o.console||(o.console={log:r,debug:r,warn:r,error:r}),o.onbeforeunload||(o.onbeforeunload=r),document.head||(document.head=document.getElementsByTagName("head")[0]),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});
// @license https://github.com/inexorabletash/polyfill/blob/master/LICENSE.md
var a=e.Element?"Element":"HTMLElement";if(!("dataset"in document.createElement("span"))&&a in e&&e[a].prototype&&Object.defineProperty&&Object.defineProperty(e[a].prototype,"dataset",{get:function(){for(var e=Object.create(null),t=0;t<this.attributes.length;++t){var n=this.attributes[t];n.specified&&"data-"===n.name.substring(0,5)&&function(t,n){var a=n.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});e[a]=t.getAttribute("data-"+n),Object.defineProperty(e,a,{get:function(){return t.getAttribute("data-"+n)},set:function(e){t.setAttribute("data-"+n,e)}})}(this,n.name.substring(5))}return e}}),"function"!=typeof o.CustomEvent){var i=function(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a};i.prototype=o.Event.prototype,o.CustomEvent=i}if(!o.atob&&!o.btoa){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.btoa=function(e){for(var t=String(e),n=void 0,a=void 0,i=0,r=u,o="";t.charAt(0|i)||(r="=",i%1);o+=r.charAt(63&n>>8-i%1*8)){if((a=t.charCodeAt(i+=.75))>255)throw new s("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|a}return o},o.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,i=0,r=0,o="";a=t.charAt(r++);~a&&(n=i%4?64*n+a:a,i++%4)?o+=String.fromCharCode(255&n>>(-2*i&6)):0)a=u.indexOf(a);return o}}}(),u(o.navigator.userAgent)}}).call(t,n(42),n(86)(e))},154:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(6)),o=a(n(21)),u=a(n(7)),s=a(n(125)),l=a(n(9)),d=a(n(15)),c=a(n(12)),f=a(n(106)),p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentBody=void 0,this._parentBodyStyle="",this._initialized=!1}return i(e,[{key:"init",value:function(e){this._parentBody=e.frameInFrame?document.body:parent.document.body,d.default.isMobileSafari||(this._initialized=!0),this._initialized||(this._parentBodyStyle=this._parentBody.hasAttribute("style")?this._parentBody.getAttribute("style"):"",this._initialized=!0),this._securityRestrictions=e}},{key:"setStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._securityRestrictions.frameInFrame?(s.default.sendMessage(f.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,t,n),o.default.setStyle(e,{height:"100%",width:"100%"})):o.default.setStyle(e,t,n)}},{key:"redrawWidget",value:function(e,t){d.default.isMobileSafari&&d.default.iosVersion<=8&&o.default.redrawElement(e,(0,r.default)({},t,{bottom:"1px"}),t)}},{key:"changeBodyStyle",value:function(e){if(e===f.default.IFRAME_BODY&&document.body&&document.body.setAttribute("style","overflow: hidden"),d.default.isMobileSafari&&!d.default.isTablet)if(e===c.default.WIDGET_STATE.MAXIMIZED){if(this._parentBody){var t="position:fixed;display:block;height:100%;width:100%;height:100vh;width:100vw;";this._securityRestrictions.frameInFrame&&s.default.sendMessage(f.default.IFRAME_POST_MESSAGE.SET_BODY_CSS,{css:t,isMaximized:!0},!0),this._parentBody.setAttribute("style",t)}o.default.getOrientation()===c.default.ORIENTATIONS.PORTRAIT&&u.default.requestTimeout(this.scrollWindowOnTopOfKeyboard.bind(this),100)}else l.default.isUndefinedorNull(this._parentBody)||this._parentBody.setAttribute("style",this._parentBodyStyle),this._securityRestrictions.frameInFrame&&s.default.sendMessage(f.default.IFRAME_POST_MESSAGE.SET_BODY_CSS,{},!0)}},{key:"scrollWindowOnTopOfKeyboard",value:function(){this._securityRestrictions.frameInFrame?window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop):parent.window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop)}}]),e}();t.default=new p},155:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=!1;return P&&(w.default.send(d.default.CONTEXT,e),t=!0),t}function o(){var e,t=i({},l.default.WIDGET_LOADED,!1);v.default.isPopup()&&M===l.default.STORAGE_TYPES.CUSTOM&&(t=(0,h.default)({},t,(i(e={},l.default.SHOW_ON_RELOAD,!1),i(e,"syncCustomStorage",!0),e))),y.default.browser.set(t)}function u(){var e={messaging:{brandUserId:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",userTokenId:"",pollInterval:""}};y.default.browser.set(e),w.default.checkIntercom()?w.default.send(d.default.INTERACTION,e):H=(0,h.default)({},H,e)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(12)),d=a(n(19)),c=a(n(33)),f=a(n(154)),p=a(n(14)),h=a(n(6)),v=a(n(124)),E=a(n(9)),_=a(n(156)),g=a(n(313)),I=a(n(15)),y=a(n(107)),T=a(n(123)),m=a(n(387)),S=a(n(80)),b=a(n(339)),A=a(n(687)),O=a(n(397)),w=a(n(340)),C=a(n(29)),k=a(n(7)),N=a(n(3)),R=a(n(20)),D=!1,M=void 0,L=!1,P=!1,Y=window,F=void 0,x=void 0,U="default",B={},K=void 0,j=void 0,H={app:{},va:{},messaging:{}},G=[];Y.addEventListener("touchstart",function e(){!D||I.default.isTablet||I.default.isPhone||(T.default.logInteraction({logLevel:c.default.LOG_LEVEL.INFO,message:c.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"USER_TOUCH_DETECTED_ON_DESKTOP"}},!0),Y.removeEventListener("touchstart",e))},!1);var V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,[{key:"init",value:function(e){var t=this;if(!D){x=e.onStateChange,j=e.metaData,U=e.appId,M=e.storageType;var n=e.windowName,a=S.default.get(U);if(O.default.init({metaData:j,securityRestrictions:e.securityRestrictions}),A.default.init({metaData:j,storageType:M}),v.default.isPopup()||y.default.addListener(l.default.WIDGET_LOADED,function(e,n){var a=!!n;b.default.setInteractionActive(a),a||t.cleanUp(),f.default.changeBodyStyle(),_.default.alter(!1)}),!v.default.isPopup()||I.default.isTablet||I.default.isPhone||y.default.addListener(l.default.DISPLAY_MODE_KEY,function(e,n){E.default.isEmptyorNull(n)&&t.closePopupView()}),y.default.browser.get(l.default.SHOW_ON_RELOAD)){var i=!1,r=y.default.browser.get(l.default.CHAT_SESSION_KEY),u=!1;if(a.apis.forceEndInteraction){var s=p.default.getFunctionReference(a.apis.forceEndInteraction);u=!!s&&s()}u&&!r&&(y.default.removeSessionData(),y.default.browser.set(l.default.WIDGET_LOADED,!1),y.default.browser.set(l.default.SHOW_ON_RELOAD,!1),i=!0),v.default.isPopup()&&(H.app.isPopup=!0,g.default.enable(),Y.addEventListener("unload",o),F=v.default.getWindowParams(),Y.name=n),i||this.reconcileWidget()}else v.default.isPopup()?(H.app.isPopup=!0,g.default.enable(),Y.addEventListener("unload",o),F=v.default.getWindowParams(),O.default.start(U,"",F.overrideConfig,K),Y.name=n):y.default.browser.set(l.default.WIDGET_LOADED,!1);D=!0}}},{key:"startInteraction",value:function(e,t,n){if(D){U=e,B=n,y.default.tab.set(l.default.INITIATOR,!0);var a=S.default.get(e);v.default.isPopup()||!a.popupWindow.initial||I.default.isTablet||I.default.isPhone?O.default.start(U,t,n,K):A.default.start(U,n)}}},{key:"sendSystemMessage",value:function(e){var t=!1;return P&&(w.default.send(d.default.SYSTEMMSG,e),t=!0),t}},{key:"sendContext",value:function(e){r(e)}},{key:"isWidgetLoaded",value:function(){return!!y.default.browser.get(l.default.WIDGET_LOADED)}},{key:"updateState",value:function(e){if(e[l.default.SOURCE]!==y.default.getTabId()&&w.default.checkIntercom()){var t=(0,h.default)({},e[l.default.STORAGE_KEY_NAMES.TAB_SESSION],e[y.default.getTabId()]);w.default.send(d.default.INTERACTION,t)}}},{key:"isWidgetReconciled",value:function(){return L}},{key:"getInitialState",value:function(){return H}},{key:"resetInitialState",value:function(){H={app:{},va:{},messaging:{}}}},{key:"update",value:function(e,t){switch(e){case l.default.INITIAL_STATE:H=(0,h.default)({},H,t);break;case l.default.IS_RECONCILED:L=t;break;case l.default.IFRAME_READY:(P=t)&&this.onIframeReady()}}},{key:"onIframeReady",value:function(){var e,t,n,a=S.default.get(U);if(L){!function(e){if(!v.default.isPopup()){var t=void 0;I.default.isPhone?t=!0:y.default.isExistingTab||(t=!e),E.default.isUndefinedorNull(t)||(H.app.minimized=t,y.default.tab.set({app:{minimized:t}}))}}(!!a.forceMaximizeInNewTab);var i=y.default.tab.get(l.default.INITIATOR);(!i||i&&a.popupWindow.initial)&&(e=y.default.browser.get(l.default.VA_SESSION_KEY)||{},t=e.poller,n=e.turnsId,!t&&n&&(H.va.poller=!0,y.default.browser.set({va:{poller:!0}})))}var r=y.default.tab.get(l.default.APP_SESSION_KEY);r&&!0===r.minimized?this.handleStateChange({widgetState:l.default.WIDGET_STATE.MINIMIZED}):this.handleStateChange({widgetState:l.default.WIDGET_STATE.MAXIMIZED})}},{key:"sendInitData",value:function(){var e=S.default.get(U),t=C.default.getContext(),n=y.default.browser.get(l.default.MESSAGING_SESSION_KEY);w.default.send(d.default.CONFIG,{config:e,context:t}),w.default.send(d.default.EXTENSIBLE_LISTENERS,{listeners:G}),L&&(H=(0,h.default)({},H,y.default.browser.get(),y.default.tab.get())),n&&(H=(0,h.default)({},H,{messaging:n})),v.default.isPopup()?H.app.storageType=F.storageType:(H.app.storageType=M,H.app.popupWindowConfig=A.default.getPopupWindowConfig(U,B)),w.default.send(d.default.INTERACTION,H)}},{key:"handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.widgetState){case l.default.WIDGET_STATE.CHAT_STARTED:r(i({},l.default.JOURNEY,m.default.getJourneyEncoded()))}try{x(e),Y.dispatchEvent(new CustomEvent(l.default.STATE_CHANGE_EVENT,{detail:e}))}catch(e){}}},{key:"onCustomCardAction",value:function(e){N.default.notEmpty(e.id,"data.id"),N.default.notEmpty(e.name,"data.name");var t=S.default.get(U),n=p.default.getFunctionReference(t.apis.onCustomCardAction);n||this.sendCustomCardResponse(e.id,e.name,!1,{}),n(e.id,e.name,{})}},{key:"login",value:function(e){e&&u(e.trim())}},{key:"logout",value:function(){u()}},{key:"getSessionContext",value:function(){var e=y.default.browser.get(l.default.CHAT_SESSION_KEY),t={};e&&(t[l.default.INTERACTION_ID]=e[l.default.INTERACTION_ID],t[l.default.VISITOR_SESSION_ID]=e[l.default.VISITOR_SESSION_ID]);var n=C.default.getContext()[l.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID];return n&&(t[l.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]=n),t}},{key:"setUserProfile",value:function(e){e&&y.default.browser.set(l.default.USER_PROFILE,e)}},{key:"setParentElement",value:function(e){N.default.isObject(e,"parentElement"),K=e}},{key:"sendCustomCardResponse",value:function(e,t,n,a){w.default.checkIntercom()&&w.default.send(d.default.CARD,{id:e,cardName:t,isSuccess:n,responseData:a,cardState:R.default.CARD_STATE.PROCESS,type:R.default.CARD_TYPES.CUSTOM})}},{key:"addExtensibleListener",value:function(e){G=e}},{key:"dispatchAction",value:function(e,t){w.default.checkIntercom()&&w.default.send(d.default.DISPATCH_ACTION,{actionName:e,actionData:t})}},{key:"cleanUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.default.noop;D&&(O.default.stop(),A.default.resetPopupWindow(),y.default.browser.set(l.default.SHOW_ON_RELOAD,!1),y.default.browser.set(l.default.DISPLAY_MODE_KEY,""),y.default.browser.set(l.default.INITIAL_WORKFLOW,""),y.default.tab.set(l.default.INITIATOR,!1),y.default.removeSessionData([l.default.CONFIG_APP_ID,l.default.APP_SESSION_KEY,l.default.CHAT_SESSION_KEY,l.default.VA_SESSION_KEY,l.default.CARDS_SESSION_KEY]),this.update(l.default.IFRAME_READY,!1),this.update(l.default.IS_RECONCILED,!1),S.default.reset(U),w.default.clear(),k.default.requestTimeout(e,300))}},{key:"reconcileWidget",value:function(){if(!L){L=!0;var e={},t=y.default.browser.get(l.default.INITIAL_WORKFLOW);t&&(e.workflow=t);var n=C.default.getContext(),a=n&&n.dockId?n.dockId:"";O.default.start(U,a,e,K)}}},{key:"hideInpageView",value:function(){y.default.browser.set(l.default.DISPLAY_MODE_KEY,l.default.DISPLAY_MODE.NONE),O.default.updateState(l.default.STYLE_STATE.HIDDEN)}},{key:"showInpageView",value:function(){y.default.browser.set(l.default.DISPLAY_MODE_KEY,"");var e=y.default.tab.get(l.default.APP_SESSION_KEY);e&&e.minimized?O.default.updateState(l.default.STYLE_STATE.MINIMIZED):O.default.updateState(l.default.STYLE_STATE.MAXIMIZED)}},{key:"closePopupView",value:function(){g.default.disable(),Y.removeEventListener("unload",o),Y.close()}}]),e}();t.default=new V},156:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(106)),o=a(n(125)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatVpContent="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no",this._oldVpContent="",this._viewport=void 0,this._initialized=!1}return i(e,[{key:"init",value:function(e){var t=document;if(p&&!this._initialized){var n=t.head||t.getElementsByTagName("head")[0];this._viewport=t.querySelector("meta[name=viewport]"),this._viewport?this._oldVpContent=this._viewport.content:(this._viewport=t.createElement("meta"),this._viewport.name="viewport",this._viewport.content="",n.appendChild(this._viewport)),this._securityRestrictions=e,this._initialized=!0}}},{key:"alter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._initialized&&(this._viewport.content=e?this._chatVpContent:this._oldVpContent,this._securityRestrictions.frameInFrame&&o.default.sendMessage(r.default.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT,this._viewport.content))}}]),e}(),s=window.navigator.userAgent,l=-1!==s.indexOf("AppleWebKit")&&s.match(/(iPod|iPhone|iPad)/),d=-1!==s.indexOf("Android"),c=d&&-1===s.indexOf("Mobile"),f=l&&"iPad"===l[0],p=(d||l)&&!(c||f);t.default=new u},157:function(e,t,n){"use strict";var a=n(2),i=n(129);a(a.P+a.F*!n(41)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},158:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(391)),r=a(n(394)),o=a(n(395)),u=a(n(14));t.default={parseConfig:function(e){var t={};return Object.keys(e).map(function(n){return function e(t,n,a){var i=t,r=!1,o=n.match(/(.+?)\.(.*)/),u=void 0,s=void 0;o?(u=o[1],s=o[2]):(u=n,r=!0);var l=u.match(/(.+?)\$(\d+)/),d=void 0,c=void 0;return l?(d=l[1],c=parseInt(l[2],10)):d=u,"number"==typeof c?(i[d]=i[d]||[],r?(i[d][c]=a,i):(i[d][c]=i[d][c]||{},e(i[d][c],s,a),i)):r?(i[n]=a,i):(i[d]=i[d]||{},e(i[d],s,a))}(t,n,e[n])}),t},getTemplate:function(e){return{generic:i.default,"client-managed":r.default,direct:o.default}[e]||u.default.getFunctionReference(e,void 0,!1)}}},16:function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},160:function(e,t,n){n(157),e.exports=n(16).Array.reduce},17:function(e,t,n){var a=n(62)("wks"),i=n(46),r=n(8).Symbol,o="function"==typeof r;(e.exports=function(e){return a[e]||(a[e]=o&&r[e]||(o?r:i)("Symbol."+e))}).store=a},171:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(68)),o=a(n(21)),u=a(n(7)),s=a(n(3)),l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContainer=o.default.createElement("div",{style:"display: none"}),"complete"!==document.readyState?u.default.requestTimeout(function(){d.body.appendChild(t.audioContainer)},100):d.body.appendChild(this.audioContainer)}return i(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.notEmpty(e,"AudioNotification::id"),!c[e]&&(c[e]=o.default.createElement("audio",{preload:"auto",controls:"false",hidden:"true"},[o.default.createElement("source",{src:t.mp3,type:"audio/mpeg"})]),this.audioContainer.appendChild(c[e]),!0)}},{key:"deregister",value:function(e){return s.default.notEmpty(e,"AudioNotification::id"),!!c[e]&&(c[e].parentNode.removeChild(c[e]),delete c[e],!0)}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c[e])return!1;if(t||r.default.documentHasFocus()){try{c[e].play()}catch(e){return!1}return!0}return!1}},{key:"volume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return!!c[e]&&(c[e].volume=t,!0)}},{key:"mute",value:function(e){return this.volume(e,0)}},{key:"unmute",value:function(e){return this.volume(e)}},{key:"destroy",value:function(){this.audioContainer.parentNode.removeChild(this.audioContainer)}}]),e}(),d=document,c={};t.default=new l},18:function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},183:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(3)),o=a(n(12)),u=a(n(44)),s=a(n(9)),l=a(n(6)),d=a(n(15)),c=a(n(99)),f=a(n(7)),p=a(n(186)),h=["localStorage","sessionStorage"],v=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1===h.indexOf(t))throw new Error("WebStorage: "+t+" is not supported");if(this._storeName=t,this._store=window[t],this._storageKey=n,!this.isStorageAvailable())throw new Error(o.default.ERROR_CODES.LOCALSTORAGE_UNAVAILABLE);this._storeExists()||this._initialize()}return i(e,[{key:"_storeExists",value:function(){return!!this._store.getItem(this._storageKey)}},{key:"_initialize",value:function(){var e={};e[o.default.LAST_UPDATED_TIME]=(new Date).getTime(),this._store.setItem(this._storageKey,c.default.encode(JSON.stringify(e)))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.default.notEmpty(e,"WebStorage: set key");var a=this.getAll()||{};if(this._pollOldValue=a,u.default.isObject(t))a[e]||(a[e]={}),a[e]=(0,l.default)({},a[e],t);else if(u.default.isString(t)||u.default.isArray(t))a[e]=t;else{if(!u.default.isBoolean(t)&&!u.default.isNumber(t))throw new Error('WebStorage::set type-mismatch for "'+t+'", expecting object, string, boolean, array or number');a[e]=t.toString()}a[o.default.LAST_UPDATED_TIME]=(new Date).getTime(),n.tabId&&(a[o.default.SOURCE]=n.tabId),this._store.setItem(this._storageKey,c.default.encode(JSON.stringify(a)))}},{key:"getAll",value:function(){var e=void 0,t=this._store.getItem(this._storageKey);if(t)try{e=JSON.parse(c.default.decode(t))}catch(e){}return e}},{key:"get",value:function(e){return r.default.notEmpty(e,"WebStorage: key"),this.getAll()[e]}},{key:"remove",value:function(e,t){var n=this.getAll()||{};t&&t.length>0?n[e]=s.default.removeSpecificKeys(n[e],t):n[e]={},this._store.setItem(this._storageKey,c.default.encode(JSON.stringify(n)))}},{key:"addStorageListener",value:function(e){var t=this;d.default.ieVersion&&9!==d.default.isVersion?this._pollForStorage(e):window.addEventListener("storage",function(n){if(n.key===t._storageKey)try{var a=JSON.parse(c.default.decode(n.oldValue))||{},i=JSON.parse(c.default.decode(n.newValue))||{};e({key:t._storageKey,oldValue:a,newValue:i})}catch(e){}})}},{key:"_pollForStorage",value:function(e){var t=this;f.default.requestTimeout(function(){try{t._store.setItem("tfs-ie11","1"),t._store.removeItem("tfs-ie11"),JSON.stringify(t._pollOldValue)!==JSON.stringify(t.getAll())&&(e({newValue:t.getAll()||{},oldValue:t._pollOldValue||{},key:t._storageKey}),t._pollOldValue=t.getAll())}catch(e){}t._pollForStorage(e)},500)}},{key:"isStorageAvailable",value:function(){return p.default[this._storeName]}}]),e}();t.default=v},186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=!1;try{var n=window[e];n.setItem("testLS","works");var a=n.getItem("testLS");n.removeItem("testLS"),t="works"===a}catch(e){}return t};t.default={localStorage:a("localStorage"),sessionStorage:a("sessionStorage")}},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={STYLE:"style",READY:"ready",INTERACTION:"interaction",CONFIG:"config",CONTEXT:"context",SYSTEMMSG:"systemmsg",DESTROY:"destroy",STATE_CHANGE:"state_change",TRACK_INTERACTION:"track_interaction",TRACK_EVENT:"track_event",TRACK:{PRE_CHAT_SHOWN:"prechatShown",PRE_CHAT_SUBMIT:"prechatSubmit",EXIT_SURVEY_SHOWN:"exitSurveyShown",EXIT_SURVEY_SUBMIT:"exitSurveySubmit",CARD_INVITED:"cardInvited",CARD_SHOWN:"cardAccepted",CARD_SUBMITTED:"cardSubmitted",QUEUE_AFTER_HOURS:"queueAfterHours"},CARD:"card",NOTIFICATION:"notification",COBROWSE:"cobrowse",EXTENSIBLE_LISTENERS:"extensible_listeners",DISPATCH_ACTION:"dispatchAction",SHOW_INPAGE_VIEW:"showInpageView",HIDE_INPAGE_VIEW:"hideInpageView"}},2:function(e,t,n){var a=n(8),i=n(16),r=n(30),o=n(36),u=n(34),s=function(e,t,n){var l,d,c,f,p=e&s.F,h=e&s.G,v=e&s.S,E=e&s.P,_=e&s.B,g=h?a:v?a[t]||(a[t]={}):(a[t]||{}).prototype,I=h?i:i[t]||(i[t]={}),y=I.prototype||(I.prototype={});for(l in h&&(n=t),n)c=((d=!p&&g&&void 0!==g[l])?g:n)[l],f=_&&d?u(c,a):E&&"function"==typeof c?u(Function.call,c):c,g&&o(g,l,c,e&s.U),I[l]!=c&&r(I,l,f),E&&y[l]!=c&&(y[l]=c)};a.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ACTIONS:{SEND:"send",SAVE:"save",CLOSE:"close"},CARD_STATE:{NONE:"none",SHOWING:"showing",OPEN:"open",PROCESS:"process",SUBMIT:"submit",CANCEL:"cancel",CLOSING:"closing",CLOSE:"close",RESET:"reset",ERROR:"error",SUBMIT_ERROR:"submit_error",SUBMIT_SUCCESS:"submit_success"},CARD_TYPES:{SLIDING:"sliding",OVERLAY:"overlay",INLINE:"inline",SLIDINGPLUS:"slidingplus",CUSTOM:"custom"},CARD_ACTIONS:{PREVIOUS:"previous",NEXT:"next",INIT:"init"},DEFAULT_PAGE_INDEX:-1}},21:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(12)),u=a(n(15)),s=a(n(3)),l=a(n(7)),d=a(n(6)),c=a(n(9)),f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"trim",value:function(e){return e.replace(/^\s+|\s+$/g,"")}},{key:"addStylesheet",value:function(e,t){s.default.notEmpty(e,"addStylesheet id"),s.default.notEmpty(t,"addStylesheet cssText");var n=this.createElement("style",{id:e,type:"text/css"});try{n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}catch(e){}return n}},{key:"get",value:function(e){return document.getElementById(e)}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement(e);return Object.keys(t).map(function(e){return a.setAttribute(e,t[e]),0}),"string"==typeof n?a.innerHTML=n:n.map(function(e){return a.appendChild(e)}),a}},{key:"removeElement",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t&&t.parentNode.removeChild(t)}},{key:"addClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.add(n):a.className+=" "+n)}},{key:"removeClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.remove(t):a.className=a.className.replace(new RegExp("(^|\\b)(\\s*)"+n.split(" ").join("(\\s*)|(\\s*)")+"(\\s*)(\\b|$)","g")," "))}},{key:"hasClass",value:function(e,t){var n=this.trim(t),a=e;return"string"==typeof a&&(a=this.get(a)),a.classList?a.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(a.className)}},{key:"hasSelector",value:function(e,t){return("string"==typeof e?this.createElement("div",void 0,e):e).querySelectorAll(t).length>0}},{key:"hide",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="none"}},{key:"show",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="block"}},{key:"getStyle",value:function(e,t){return window.getComputedStyle(e)[t]}},{key:"set",value:function(e,t,n){e&&"string"==typeof t&&"string"==typeof n&&(e.style[t]=n)}},{key:"setStyle",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e)switch(a&&e.setAttribute("style",""),void 0===t?"undefined":i(t)){case"object":Object.keys(t).map(function(a){return Object.prototype.hasOwnProperty.call(t,a)&&n.set(e,a,t[a]),0});break;case"string":e.setAttribute("style",e.style.cssText+t)}}},{key:"injectScript",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2],a=this,i=arguments[3],r=arguments[4];s.default.notEmpty(e,"injectScript url"),s.default.isNotUndefinedOrNull(n.head,"document.head");var o=!1;if(this.get(i.id))t("success");else{var u=this.createElement("script",(0,d.default)({},i,{async:!0,src:e,type:"text/javascript"}));n.head.appendChild(u);var c=void 0;u.onreadystatechange=function(){o||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(o=!0,c&&l.default.clearRequestTimeout(c),t("success"),u.onreadystatechange=null)},u.onload=function(){o||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(o=!0,c&&l.default.clearRequestTimeout(c),t("success"),u.onload=null)},u.onerror=function(){u.onreadystatechange=null,u.onload=null,c&&l.default.clearRequestTimeout(c),t("error")},r&&(c=l.default.requestTimeout(function(){u.onreadystatechange=null,u.onload=null,t("timeout")},r))}}},{key:"reduceTags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];s.default.isArray(t,"reduceTags allowedTags"),s.default.isObject(n,"reduceTags allowedAttributes"),s.default.isArray(a,"reduceTags purgeTags");var i=this.createElement("div",{},e).childNodes,r=[];if(i.length>0)for(var o=0;o<i.length;o+=1){var u=i[o],l=u.nodeName.toLowerCase();if((u=Array.isArray(n[l])?this.removeAttrs(u,n[l]):this.removeAttrs(u,[])).hasChildNodes()&&-1===a.indexOf(l))if(1===u.childNodes.length&&"#text"===u.childNodes[0].nodeName)t.indexOf(l)>-1?r.push(u.outerHTML):r.push(u.textContent);else{var d=u.innerHTML.indexOf("<"),c="";d>0&&(c=u.innerHTML.substr(0,d),u.innerHTML=u.innerHTML.substr(d));var f,p=u.innerHTML.lastIndexOf(">");f=u.innerHTML.substr(p+1),u.innerHTML=u.innerHTML.substr(0,p+1),t.indexOf(l)>-1?(u.innerHTML=c+this.reduceTags(u.innerHTML,t,n,a)+f,r.push(u.outerHTML)):r.push(c+this.reduceTags(u.innerHTML,t,n,a)+f)}else{var h=l;-1===a.indexOf(h)&&(t.indexOf(h)>-1?r.push(u.outerHTML):r.push(u.textContent))}}else r.push(e);return r.join(" ").trim()}},{key:"removeAttrs",value:function(e,t){var n=e;if(n.attributes)for(var a=n.attributes,i=a.length-1;i>=0;i-=1)-1===t.indexOf(a[i].name)&&n.removeAttribute(a[i].name);return n}},{key:"removeCSSProp",value:function(e,t){var n=e.match(/([^\s{]+?(?=:))(:\s)([^;]*);/g),a="";return n&&n.forEach(function(e){var n=e.split(":")[0];t.indexOf(n)>-1&&(a+=e)}),a}},{key:"fixAnchorTarget",value:function(e){var t=this.createElement("div",{},e),n=t.getElementsByTagName("a"),a=void 0;if(n.length>0){for(var i=0;i<n.length;i+=1){var r=n[i].getAttribute("target");c.default.isEmptyorNull(r)&&n[i].setAttribute("target","_blank")}a=t.innerHTML}else a=e;return a}},{key:"filterAttrOfTag",value:function(e,t,n){var a=this,i=this.createElement("div",{},e),r=i.getElementsByTagName(t),o=[],u=[].slice.call(r);return 0===u.length?{residueContent:i.innerHTML}:(u.map(function(e){var t={};return n.map(function(n){var a=c.default.isEmptyorNull(e.getAttribute(n))?e.getAttribute(n):e.getAttribute(n).trim();return t[n]=c.default.isEmptyorNull(e.dataset)||c.default.isEmptyorNull(e.dataset[n])?a:e.dataset[n].trim(),0}),t.innerHTML=e.innerHTML.trim(),o.push(t),a.removeElement(e),0}),{residueContent:o.length>0&&""===i.textContent.trim()&&0===i.getElementsByTagName("img").length?void 0:i.innerHTML,tagAttributes:o})}},{key:"redrawElement",value:function(e,t,n){var a=this;return e?(this.setStyle(e,t),l.default.requestTimeout(function(){a.setStyle(e,n)},40),0):0}},{key:"getOrientation",value:function(){switch(u.default.isMobileSafari?Math.abs(window.orientation):screen.width>screen.height?90:0){case 90:return o.default.ORIENTATIONS.LANDSCAPE;default:return o.default.ORIENTATIONS.PORTRAIT}}},{key:"getScreenDimensions",value:function(){var e=void 0,t=void 0;return this.getOrientation()===o.default.ORIENTATIONS.PORTRAIT?(t=screen.height>screen.width?screen.height:screen.width,e=screen.height>screen.width?screen.width:screen.height):(t=screen.height>screen.width?screen.width:screen.height,e=screen.height>screen.width?screen.height:screen.width),{width:e,height:t}}},{key:"getKeyboardHeight",value:function(){var e=this.getOrientation(),t=Object.keys(o.default.ORIENTATIONS).reduce(function(t,n){return e===o.default.ORIENTATIONS[n]?n:t}),n=window.innerHeight;if(u.default.isIpad){var a=o.default.MAX_KEYBOARD_HEIGHT[t].filter(function(e){return n>=e.MIN_SCREEN_HEIGHT&&n<=e.MAX_SCREEN_HEIGHT});if(a.length)return a[0].KEYBOARD_HEIGHT}return 0}},{key:"matches",value:function(e,t){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),a=n.length;a>=0&&n.item(a)!==e;)a-=1;return a>-1}}]),e}();t.default=new f},22:function(e,t,n){var a=n(40),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"uuid",value:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(""+e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}},{key:"get",value:function(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",a=0,i=t.length;a<e;a+=1)n+=t.substr(0|Math.random()*i,1);return n}}]),e}();t.default=new i},25:function(e,t,n){var a=n(13),i=n(93),r=n(47),o=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(a(e),t=r(t,!0),a(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},26:function(e,t,n){var a=n(39);e.exports=function(e){return Object(a(e))}},27:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(111)),o=a(n(3)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"shiftKey",value:function(e){return!!e.shiftKey}},{key:"ctrlKey",value:function(e){return!!e.ctrlKey}},{key:"altKey",value:function(e){return!!e.altKey}},{key:"shouldHandleActivate",value:function(e){return this.shouldHandle(e,[r.default.KEY_ENTER,r.default.KEY_RETURN,r.default.KEY_SPACE])}},{key:"shouldHandleCancel",value:function(e){return this.shouldHandle(e,[r.default.KEY_ESCAPE])}},{key:"shouldHandleFirst",value:function(e){return this.shouldHandle(e,[r.default.KEY_HOME])}},{key:"shouldHandleLast",value:function(e){return this.shouldHandle(e,[r.default.KEY_END])}},{key:"shouldHandlePrev",value:function(e){return this.shouldHandle(e,[r.default.KEY_UP,r.default.KEY_LEFT])}},{key:"shouldHandleNext",value:function(e){return this.shouldHandle(e,[r.default.KEY_DOWN,r.default.KEY_RIGHT])}},{key:"shouldHandle",value:function(e,t){return o.default.isObject(e),!(this.shiftKey(e)||this.altKey(e)||this.ctrlKey(e))&&t.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation(),!0)}},{key:"suppressKeyDown",value:function(e){return o.default.isObject(e),e.keyCode!==r.default.KEY_SPACE||"DIV"!==e.target.nodeName||(e.preventDefault(),!1)}}]),e}();t.default=new u},29:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(6)),o=a(n(9)),u={chat:["visitorSessionId","interactionId"],va:["turnsId"]},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialContext={},this.queuedContext=void 0}return i(e,[{key:"_listenChange",value:function(e){var t=this,n={};Object.keys(u).forEach(function(a){u[a].forEach(function(i){t.props[a]&&e[i]!==t.props[a][i]&&(n[i]=t.props[a][i])})}),Object.keys(n).length>0&&this.refreshContext(n)}},{key:"subscribe",value:function(e){var t=this;this.store=e,this.store.subscribe(function(){var e=o.default.get(["props"],t,void 0),n=o.default.get(["app","context"],e,{});t.props=t.store.getState(),e&&e.controller.performStateSync&&!t.props.controller.performStateSync&&"REFRESH_CONTEXT"!==e.logger.actionType&&t.refreshContext(),t._listenChange(n)})}},{key:"getContext",value:function(){return this.store&&this.props?this.props.app.context:this.initialContext}},{key:"refreshContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.queuedContext||o.default.get(["props","app","context"],this,this.initialContext),a=(0,r.default)({},n,e),i=o.default.get(["props","controller","performStateSync"],this,!1);this.store?i?this.queuedContext=a:(this.queuedContext=void 0,this.store.dispatch({type:"REFRESH_CONTEXT",context:a})):this.initialContext=a,t()}}]),e}();t.default=new s},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(44),u=(a=o)&&a.__esModule?a:{default:a},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assert failed";e||function(e){throw new Error(e)}(t)}},{key:"isObject",value:function(e,t){var n=t?t+" is not an object":"object expected";this.assert(u.default.isObject(e),n)}},{key:"isUndefinedOrNull",value:function(e,t){var n=t?t+" is not undefined or null":"undefined or null expected";this.assert(void 0===e||null===e,n)}},{key:"isNotUndefinedOrNull",value:function(e,t){var n=t?t+" is undefined or null":"undefined or null not expected";this.assert(void 0!==e&&null!==e,n)}},{key:"isBoolean",value:function(e,t){var n=t?t+" is not a boolean":"boolean expected";this.assert(u.default.isBoolean(e),n)}},{key:"isFunction",value:function(e,t){var n=t?t+" is not a function":"function expected";this.assert(u.default.isFunction(e),n)}},{key:"isNumber",value:function(e,t){var n=t?t+" is not a number":"number expected";this.assert(u.default.isNumber(e),n)}},{key:"notEmpty",value:function(e,t){var n=t?t+" is not a string or is empty":"non-empty string expected";this.assert(u.default.isString(e)&&!l.test(e),n)}},{key:"instanceOf",value:function(e,t,n){var a=n?"expected instance of "+n:"unexpected instance type";this.assert(e instanceof t,a)}},{key:"isScalar",value:function(e,t){var n=void 0===e?"undefined":i(e),a=(t?t+" ":"")+"must be string, number, or boolean";this.assert("string"===n||"number"===n||"boolean"===n,a),"string"===n&&this.notEmpty(e,t)}},{key:"isArray",value:function(e,t){var n=t?t+" is not an array":"array expected";this.assert(Array.isArray(e),n)}}]),e}(),l=/^\s*$/;t.default=new s},30:function(e,t,n){var a=n(25),i=n(55);e.exports=n(18)?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={workflow:"chat",workflowConfig:{},appId:"default",primaryColor:"#EF8822",primaryFgColor:"#FFFFFF",header:{borderColor:void 0},secondaryColor:"#EF8822",secondaryFgColor:"#FFFFFF",tertiaryColor:"#727272",tertiaryFgColor:"#FFFFFF",windowHeight:530,windowWidth:330,windowOffset:35,windowPosition:"bottomright",windowTitle:"Chat support",windowName:"frontends",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",minimizedDock:{customDocks:[],desktop:{offsetX:0,offsetY:0},phone:{offsetX:0,offsetY:0},tablet:{offsetX:0,offsetY:0}},popupWindow:{initial:!1,byUser:!1,windowWidth:450,windowHeight:680,windowPosition:"topleft"},surveyEndpoint:"",quickReply:{display:"horizontal",fgColor:void 0},notifications:{audio:{checkFocus:!0,message:"",reconciled:"",started:""},visual:{message:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",reconciled:"",started:""}},toastMessage:{duration:3e3,showClose:!0},scrollFromBottom:!0,legalese:[],timeFormat:"%l:%M %p",maxUserMessageLength:1500,useDefaultQueueForNewChat:!1,timestampDisplayInterval:12e4,showPoweredBy247:!0,showAbout247:!0,typingNotificationTimeout:15e3,forceCrossOrigin:!0,forceMaximizeInNewTab:!1,nonInteractiveChat:{showSurvey:!1,showTranscript:!1,showStartNewChat:!0},interactiveChat:{showSurvey:!0,showTranscript:!0,showStartNewChat:!0},branding:{type:"none",bgColor:"#EEEEEE",static:!1,logoUrl:"",logoOffset:0,avatarUrl:""},messageBgColor:{user:"#FFFFFF",agent:"#FFFFFF",va:"#FFFFFF",notification:"#5595E5"},messageFgColor:{user:"#333333",agent:"#333333",va:"#333333",system:"#9B9B9B",typing:"#999999",notification:"#FFFFFF"},messageBorderColor:{user:"#CCCCCC",agent:"#CCCCCC",va:"#CCCCCC"},loaderColor:"#BBBBBB",footerBgColor:"#FAFAFA",borderRadius:5,maskVisitorMessages:!0,maskWiredMessages:!0,maskMessagePatterns:[{patternStr:"((?:(?:4\\d{3})|(?:5[1-5]\\d{2})|6(?:011|5[0-9]{2}))(?:-?|\\s?)(?:\\d{4}(?:-?|\\s?)){3}|(?:3[4,7]\\d{2})(?:-?|\\s?)\\d{6}(?:-?|\\s?)\\d{5})",patternFlags:"gm",replaceStr:" --CREDITCARD-- "},{patternStr:"((?!666|000)[0-8][0-9\\_]{2}\\-(?!00)[0-9\\_]{2}\\-(?!0000)[0-9\\_]{4})",patternFlags:"gm",replaceStr:" --SSN-- "}],sendButtonIcon:!1,showMessageAvatar:!1,securityRestrictions:[],i18n:{locale:"auto",uiStrings:{}},prechatData:{},icons:{statusAvailable:"",statusBusy:"",statusChat:"",statusOffline:"",fileUpload:"",sendIcon:"",agentAvatar:"",vaAvatar:""},prechat:void 0,offline:{showCountdown:!0,a11yLive:!0,widgets:[{type:"text",description:"OFFLINE_DESCRIPTION",name:"offline",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"offline-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"offline-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"offline-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"offline-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},busy:{a11yLive:!0,widgets:[{type:"text",description:"BUSY_DESCRIPTION",name:"busy",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"busy-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"busy-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"busy-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"busy-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},waiting:{showWaitTime:!0,a11yLive:!0,widgets:[]},cards:[],postchatPromo:"",dialog:{postchat:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]},vaSurvey:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]}},supportHours:[{queue:"default",sunday:[{start:"0000",end:"2359"}],monday:[{start:"0000",end:"2359"}],tuesday:[{start:"0000",end:"2359"}],wednesday:[{start:"0000",end:"2359"}],thursday:[{start:"0000",end:"2359"}],friday:[{start:"0000",end:"2359"}],saturday:[{start:"0000",end:"2359"}],timeZoneOffset:0}],invites:[],disableBackgroundInvite:!1,appleBusinessChat:{enabled:!1,scriptUrl:"https://static.cdn-apple.com/businesschat/start-chat-button/1/index.js",businessId:"",theme:"light",intentId:"",groupId:""},frontendsService:{baseUrl:"https://api.247-inc.net/v1/frontends",apiKey:"UYXHhmVoZK7dDHXcoHVGBSYUwumZWnhd",opts:{configuration:!1,logger:{level:400,flushTrigger:20}}},events:{ignoreList:["queueAfterHours","caCheckFail","cardInvited","cardAccepted","cardSubmitted"]},journey:{maxUrls:5,maxUrlsLength:1500,autoPush:!0},apis:{onStateChange:"onStateChange",onTrackEvent:"SN.trackEvent",getData:"SN.getData",setData:"SN.setData",forceEndInteraction:"forceEndInteraction",onCustomCardAction:"onCustomCardAction"},fileupload:{imgRes:1024,imgQuality:.5,maxFileSizeInKb:500,minOriginalFileSizeInKb:2,maxOriginalFileSizeInKb:5e4,showCancel:!0},cobrowse:{timeout:6e5}}},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PRE_RENDER_LOADING:"Loading",PRE_RENDER_CLOSE:"Close",PRE_RENDER_TIMEOUT:"Still loading, but taking longer than usual",PRE_RENDER_FAILED_TITLE:"Loading failed",PRE_RENDER_FAILED_DESC:"Something went wrong. Make sure your Internet is up and running and reload this page."}},31:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUCKETS:["a","b"],KEY_MAP:[{key:"chat.visitorSessionId",length:45,type:"string",short:"a",bucket:"a"},{key:"chat.stackName",length:1,type:"string",short:"b",bucket:"a"},{key:"chat.stackNodesStart",length:2,type:"number",short:"c",bucket:"a"},{key:"chat.stackNodesEnd",length:2,type:"number",short:"d",bucket:"a"},{key:"va.turnsId",length:36,type:"string",short:"e",bucket:"a"},{key:"va.noInput",short:"f",length:1,type:"boolean",bucket:"a"},{key:"va.poller",short:"g",length:1,type:"boolean",bucket:"a"},{key:"va.vaSurveyCompleted",length:1,type:"boolean",short:"h",bucket:"a"},{key:"messaging.userTokenId",length:64,type:"string",short:"i",bucket:"a"},{key:"messaging.pollInterval",length:6,type:"number",short:"j",bucket:"a"},{key:"cards.currentCardId",length:45,type:"string",short:"k",bucket:"a"},{key:"widgetLoaded",length:1,type:"boolean",short:"l",bucket:"a"},{key:"initialWorkflow",length:9,type:"string",short:"m",bucket:"a"},{key:"reload",length:1,type:"boolean",short:"n",bucket:"a"},{key:"displayMode",length:10,type:"string",short:"o",bucket:"a"},{key:"asid",length:3,type:"string",short:"p",bucket:"a"},{key:"appId",length:40,type:"string",short:"q",bucket:"a"},{key:"notificationOptIn",length:1,type:"boolean",short:"r",bucket:"a"},{key:"chat.interactionId",length:45,type:"string",short:"s",bucket:"a"},{key:"vi",length:36,type:"string",short:"a",bucket:"b"},{key:"app.context.queue",length:80,type:"string",short:"b",bucket:"b"},{key:"app.context.accountId",length:40,type:"string",short:"c",bucket:"b"},{key:"app.context.appInteractionId",length:36,type:"string",short:"d",bucket:"b"},{key:"app.context.rc",length:40,type:"string",short:"e",bucket:"b"},{key:"app.context.sc",length:40,type:"string",short:"f",bucket:"b"},{key:"app.context.dockId",length:40,type:"string",short:"g",bucket:"b"},{key:"cards.submittedCards.0",length:45,type:"string",short:"h",bucket:"b"},{key:"cards.submittedCards.1",length:45,type:"string",short:"i",bucket:"b"}],STIMULI_KEYS:["visitorSessionId","turnsId","userTokenId","currentCardId","submittedCards"]}},313:function(e,t,n){"use strict";function a(e){var t=e;t.preventDefault(),t.returnValue=""}Object.defineProperty(t,"__esModule",{value:!0}),t.default={enable:function(){window.addEventListener("beforeunload",a)},disable:function(){window.removeEventListener("beforeunload",a)}}},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),o=(a=r)&&a.__esModule?a:{default:a},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this._initialized=!1,this._listeners=[]}return i(e,[{key:"send",value:function(e){this._initialized&&this._destinationWindow.postMessage(JSON.stringify(e),this._getOrigin())}},{key:"init",value:function(e){this._initialized||(o.default.isObject(e),o.default.isObject(e.dest),o.default.notEmpty(e.origin),this._destinationWindow=e.dest,this._locationOrigin=e.origin,this._onMessageBound=this._onMessage.bind(this),s.addEventListener("message",this._onMessageBound),this._initialized=!0)}},{key:"_onMessage",value:function(e){if(e.origin===this._getOrigin())try{this._notify(JSON.parse(e.data))}catch(e){}}},{key:"_notify",value:function(e){return this._listeners.map(function(t){return t.apply(null,[e]),0}),0}},{key:"_getOrigin",value:function(){return this._locationOrigin||window.location.origin}},{key:"clear",value:function(){this._initialized=!1,s.removeEventListener("message",this._onMessageBound),this._listeners.splice(0,this._listeners.length)}},{key:"addListener",value:function(e){this._listeners.push(e)}}]),e}(),s=window;t.default=u},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LOG_LEVEL:{DEBUG:100,INFO:200,WARN:300,ERROR:400},LOG_LEVEL_STRING:{100:"DEBUG",200:"INFO",300:"WARN",400:"ERROR"},LOG_EVENTS:{SESSION_UPDATE:"user.session.update",USER_ACTION:"user.action",WINDOW_ERROR:"window.error",SYSTEM_DEBUG:"system.debug",SYSTEM_ERROR:"system.error",CONFIG_ERROR:"config.error",PAGE_INIT:"page.init"},MAX_ERROR_MESSAGE_LENGTH:100,TIME_FORMAT:"%F %T.%L %z"}},337:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(12)),o=a(n(6)),u=a(n(183)),s=a(n(15)),l=a(n(9)),d=a(n(681)),c=a(n(686)),f=a(n(44)),p=a(n(124)),h={},v=!1,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){var t=this;if(!v){this._initCallback=e.initCallback,this._storageKey=(e.clientId||"default")+"||"+r.default.STORAGE_KEY_NAMES.USER_SESSION,this._useCustomStorage=!!s.default.safariVersion,this._sessionKey=r.default.STORAGE_KEY_NAMES.TAB_SESSION,this._getData=e.getData,this._setData=e.setData,this._forceCrossOrigin=e.forceCrossOrigin,this._storageType=void 0,this._store=void 0,this._storageTypeReasons=[],this._listeners=[],this._storageTypeReasons.push("FORCE_CROSS_ORIGIN_"+this._forceCrossOrigin.toString().toUpperCase());var n=function(e,n){t._store=n,t._storageType=e,v=!0,t._initCallback(t)};p.default.isPopup()&&p.default.getWindowParams()&&p.default.getWindowParams().storageType===r.default.STORAGE_TYPES.CUSTOM?this._createCustomStorage(n):this._forceCrossOrigin?s.default.safariVersion?this._createCustomStorage(n):this._store=new c.default(n,function(e){t._storageTypeReasons.push(e),t._createCustomStorage(n)},function(e){var n=e;v||Object.keys(n).forEach(function(e){h[e]=(0,o.default)({},h[e],n[e])}),n.oldValue&&!Object.keys(n.oldValue).length&&(n.oldValue=h),f.default.isObject(n.newValue)&&Object.keys(n.newValue).forEach(function(e){h[e]=n.newValue[e]});for(var a=0;a<t._listeners.length;a+=1)t._listeners[a].call(t,n)},{storageKey:this._storageKey,sessionKey:this._sessionKey,path:e.xdPath}):this._createStorage(n)}}},{key:"_createStorage",value:function(e){var t=void 0;try{var n=(t=new u.default("localStorage",this._storageKey)).getAll();h[this._sessionKey]=(0,o.default)({},h[this._sessionKey],n[this._sessionKey]),this.addStorageListener=function(e){t.addStorageListener(e)},e(r.default.STORAGE_TYPES.LOCALSTORAGE,t)}catch(t){this._createCustomStorage(e)?this._storageTypeReasons.push("XDLOCALSTORAGE_SETSTORE_ERROR"):this._storageTypeReasons.push("XDLOCALSTORAGE_NOSTORE")}}},{key:"_createCustomStorage",value:function(e){var t=this,n=void 0;return!(!this._getData||!this._setData||((n=new d.default({getData:this._getData,setData:this._setData})).get(function(a){h[t._sessionKey]=(0,o.default)({},h[t._sessionKey],a),e(r.default.STORAGE_TYPES.CUSTOM,n)}),0))}},{key:"getStorageTypeReasons",value:function(){return this._storageTypeReasons.join(",")}},{key:"getStorageType",value:function(){return this._storageType}},{key:"get",value:function(e){return h[e]}},{key:"set",value:function(e,t,n){switch(this._storageType){case r.default.STORAGE_TYPES.CUSTOM:n.syncCustomStorage&&this._store.set((0,o.default)({},h[this._sessionKey],t));break;case r.default.STORAGE_TYPES.XD:case r.default.STORAGE_TYPES.LOCALSTORAGE:this._store.set(e,t,n)}h[e]=(0,o.default)({},h[e],t),h[r.default.SOURCE]=n.tabId}},{key:"addStorageListener",value:function(e){this._listeners.push(e)}},{key:"remove",value:function(e,t){switch(t&&t.length>0?h[e]=l.default.removeSpecificKeys(h[e],t):h[e]={},this._storageType){case r.default.STORAGE_TYPES.CUSTOM:this._store.set((0,o.default)({},h[this._sessionKey]));break;case r.default.STORAGE_TYPES.XD:case r.default.STORAGE_TYPES.LOCALSTORAGE:this._store.remove(e,t)}}}]),e}();t.default=new E},338:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(14)),u=a(n(6)),s=a(n(12)),l=a(n(29)),d=a(n(3)),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"configure",value:function(e){this._onTrackEvent=e.onTrackEvent,this._logger=e.logger,this._channelSessionId=e.channelSessionId,this._ignoreEvents=e.events.ignoreList,this._onTrackEvent||(this._onTrackEvent=o.default.noop)}},{key:"exitSurveyShown",value:function(e){var t=this.exitSurveys(e);return t.name="OnlineScreenLoadEvent",t}},{key:"exitSurveySubmit",value:function(e){var t=this.exitSurveys(e),n=e.formData||{};return t.name="OnlineSurveySubmitEvent",t.questionsAndAnswers=Object.keys(n).map(function(e){return{question:e,answer:n[e]}}),t}},{key:"exitSurveys",value:function(e){d.default.notEmpty(e.interactionId,"Tracker.exitSurveys - interactionId"),d.default.notEmpty(e.queue,"Tracker.exitSurveys - queue"),d.default.notEmpty(e.ruleId,"Tracker.exitSurveys - ruleId"),d.default.notEmpty(e.ruleCategory,"Tracker.exitSurveys - ruleCategory");var t=this.commons();return t.screenType="SURVEY",t.targetChannelType="WEB",t.optSharedSessionId=e.interactionId,t.platform=e.platform,t.source=e.source,(0,u.default)(t,{clientKey:e.clientKey,Queue:e.queue,RuleId:e.ruleId,inviteType:"b"===e.ruleCategory?"BUTTON":"PROACTIVE"}),t}},{key:"prechatShown",value:function(){var e=this.commons();return e.name="OnlineScreenLoadEvent",e.screenType="PRECHAT",e.targetChannelType="WEB",e}},{key:"prechatSubmit",value:function(e){var t=this.commons(),n=e.formData||{};return t.name="OnlineSurveySubmitEvent",t.screenType="PRECHAT",t.targetChannelType="WEB",n.skill&&(t.Skill=n.skill),n.queue&&(t.Queue=n.queue),t.questionsAndAnswers=Object.keys(n).map(function(e){return{question:e,answer:n[e]}}),t}},{key:"cardInvited",value:function(e){var t=this.cards(e);return t.treatmentName="activeCardSent",t}},{key:"cardAccepted",value:function(e){var t=this.cards(e);return(0,u.default)(t,{treatmentName:"activeCardViewed",userAction:"BUTTON_CLICKED",userResponse:"ACCEPTED"}),t}},{key:"cardSubmitted",value:function(e){var t=this.cards(e);return(0,u.default)(t,{treatmentName:"activeCardSubmitted",userAction:"BUTTON_CLICKED",outcome:"COMPLETE"}),t}},{key:"cards",value:function(e){d.default.notEmpty(e.workflow,"Tracker.cards - workflow"),d.default.notEmpty(e.name,"Tracker.cards - name");var t=e.workflow,n=e.name,a=s.default.TRACK_PLATFORMS[t];return this.treatment({platform:a,invitation:{invitePageID:n}})}},{key:"inviteOffered",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationOfferEvent",t}},{key:"inviteAccepted",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="ACCEPTED",t}},{key:"inviteDeclined",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="DECLINED",t}},{key:"inviteIgnored",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="IGNORED",t}},{key:"sessionEngaged",value:function(){var e=this.commons();return e.name="OnlineSessionEngageEvent",e}},{key:"visitorIdChanged",value:function(e){return i({},e,{name:"VISITOR_ID_CHANGED"})}},{key:"queueAfterHours",value:function(e){return i({},this.application(e),{appInfo:"queueAfterHours"})}},{key:"caCheckFail",value:function(e){return i({},this.application(e),{appInfo:"caCheckFail"})}},{key:"application",value:function(e){var t={name:"Application",channel:"OMNICHANNEL",platform:"CHAT",source:"UDE",appEntity:"TIE_FRONTEND",appAction:"CHAT_SESSION_CHECK"};return(0,u.default)(t,e),t}},{key:"invites",value:function(e){var t=this.commons(),n=e.appInteractionId,a=e.ruleId,i=e.inviteId,r=(e.triggerAppId,e.state),o=e.queue,s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["appInteractionId","ruleId","inviteId","triggerAppId","state","queue"]);return d.default.notEmpty(n,"In Tracker.Invites appInteractionId"),d.default.notEmpty(a,"In Tracker.Invites ruleId"),d.default.notEmpty(i,"In Tracker.Invites inviteId"),d.default.notEmpty(r,"In Tracker.Invites state"),d.default.notEmpty(o,"In Tracker.Invites queue"),(0,u.default)(t,{appInteractionId:n,RuleId:a,inviteId:i,inviteType:"maximized"===r?"PROACTIVE":"BUTTON",Queue:o,targetChannelType:"ONLINE"},s),t}},{key:"commons",value:function(){return{appInteractionId:l.default.getContext()[s.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]}}},{key:"treatment",value:function(e){return(0,u.default)({name:"Treatment",channel:"OMNICHANNEL",source:"UDE",treatmentCategory:"INVITE",invitation:{inviteType:"CARD",targetChannel:"WEB"}},e)}},{key:"logTrackEvent",value:function(e){var t=this[e.event](e.eventData),n=t.name;delete t.name;try{this._onTrackEvent(n,o.default.noop,t)}catch(e){throw new Error("onTrackEvent API: "+(e.message||e))}}},{key:"log",value:function(e){if(!(this._ignoreEvents.indexOf(e.event)>-1))try{this.logTrackEvent(e)}catch(e){this._logger({errorMsg:e.message||e,errorStack:e.stack})}}}]),e}();t.default=new c},339:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){var t=e.appInteractionId,n=e.ruleId,a=e.queue,r=e.state,o=e.inviteId,u=(e.triggerAppId,e.trackingId),s=e.appId,l=e.dockId,d=i(e,["appInteractionId","ruleId","queue","state","inviteId","triggerAppId","trackingId","appId","dockId"]),c={chat:{assistQueue:a}},p=(0,f.default)({},{appInteractionId:t,sc:n,queue:a,rc:"maximized"===r?"p":"b",btnName:o,btnTyp:o,trackingId:u},d),v={workflowConfig:c};E.default.refreshContext(p),h.default.startInteraction(s,l,v)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=a(n(3)),s=a(n(15)),l=a(n(80)),d=a(n(388)),c=a(n(338)),f=a(n(6)),p=a(n(125)),h=a(n(155)),v=a(n(123)),E=a(n(29)),_=a(n(9)),g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"init",value:function(e){var t=e.onStateChange,n=e.securityRestrictions,a=e.appleBusinessChat,o=e.disableBackgroundInvite,u=i(e,["onStateChange","securityRestrictions","appleBusinessChat","disableBackgroundInvite"]),l="desktop";s.default.isPhone&&(l="phone"),s.default.isTablet&&(l="tablet");var f=void 0;n.frameInFrame&&(f=p.default.sendMessage);var h=c.default.log.bind(c.default);d.default.init(u,{startInteraction:r,logEvent:h,device:l,onStateChange:t,appleBusinessChat:a,disableBackgroundInvite:o,fifMessageSender:f,trackInteraction:v.default.logInteraction.bind(v.default)})}},{key:"triggerInvite",value:function(e,t){var n=l.default.get(e);_.default.isUndefinedorNull(t)?h.default.startInteraction(e):d.default.triggerInvite({appId:e,invites:n.invites,supportHours:n.supportHours,workflowConfig:n.workflowConfig.chat||{}},t)}},{key:"removeInvite",value:function(e){d.default.removeInvite(e)}},{key:"setInteractionActive",value:function(e){u.default.isBoolean(e,"InviteInterface: status"),d.default.setInteractionActive(e)}}]),e}();t.default=g},34:function(e,t,n){var a=n(31);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,i){return e.call(t,n,a,i)}}return function(){return e.apply(t,arguments)}}},340:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e,n=t._data;switch(t._name){case c.default.STYLE:u.default.updateState(n),s.default.changeBodyStyle(n),y.default.alter(n===d.default.WIDGET_STATE.MAXIMIZED);break;case c.default.READY:o.default.update(d.default.IFRAME_READY,!0),o.default.sendInitData();break;case c.default.INTERACTION:n.action&&n.action===d.default.STORE_UPDATE?n.type&&(n.type===d.default.BROWSER_SESSION_KEY?v.default.browser.set(n.interactionData):n.type===d.default.TAB_SESSION_KEY&&v.default.tab.set(n.interactionData)):n.action&&n.action===d.default.STORE_DELETE&&(v.default.removeSessionData(n.interactionData),n.showWidgetOnReload||v.default.browser.set(d.default.SHOW_ON_RELOAD,!1));break;case c.default.CONFIG:break;case c.default.STATE_CHANGE:o.default.handleStateChange(n);break;case c.default.TRACK_INTERACTION:_.default.logInteraction(n,n.forceFlush);break;case c.default.TRACK_EVENT:E.default.log(n,function(e,t){});break;case c.default.NOTIFICATION:u.default.widgetNotification(n);break;case c.default.DESTROY:v.default.browser.set(d.default.WIDGET_LOADED,!1),u.default.updateState(d.default.STYLE_STATE.HIDDEN),o.default.resetInitialState(),I.default.requestTimeout(function(){o.default.cleanUp()},1e3);break;case c.default.CARD:switch(n.cardState){case f.default.CARD_STATE.SHOWING:var a=void 0;n.cardType===f.default.CARD_TYPES.SLIDINGPLUS?a=d.default.STYLE_STATE.PLUSCARD:n.cardType===f.default.CARD_TYPES.SLIDING&&(a=d.default.STYLE_STATE.CARD),T.default.isUndefinedorNull(a)||u.default.updateState(a,!0),S.send(c.default.CARD,{cardState:f.default.CARD_STATE.OPEN});break;case f.default.CARD_STATE.OPEN:n.cardType===f.default.CARD_TYPES.CUSTOM&&o.default.onCustomCardAction(n);break;case f.default.CARD_STATE.CLOSING:u.default.updateState(d.default.STYLE_STATE.MAXIMIZED,!0),S.send(c.default.CARD,{cardState:f.default.CARD_STATE.CLOSE});break;case f.default.CARD_STATE.RESET:u.default.updateState(d.default.STYLE_STATE.MAXIMIZED,!0)}break;case c.default.COBROWSE:switch(n.state){case p.default.STATES.INITIALIZING:g.default.injectScript(n.url,function(e){"timeout"===e||"error"===e||l.default.cobrowseCreateSession(n.mode,n.timeout,n.uiStrings)},document,{id:"tfs-screenshare-js"},3e4);break;case p.default.COMMANDS.AGENT_CLOSE:l.default.disconnectCobrowse();break;case p.default.STATES.JOINED:l.default.resumeCobrowse({cobrowseId:n.cobrowseId,mode:n.mode,url:n.url,uiStrings:n.uiStrings})}break;case c.default.HIDE_INPAGE_VIEW:o.default.hideInpageView();break;case c.default.SHOW_INPAGE_VIEW:o.default.showInpageView()}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(155)),u=a(n(397)),s=a(n(154)),l=a(n(689)),d=a(n(12)),c=a(n(19)),f=a(n(20)),p=a(n(63)),h=a(n(314)),v=a(n(107)),E=a(n(338)),_=a(n(123)),g=a(n(21)),I=a(n(7)),y=a(n(156)),T=a(n(9)),m=void 0,S=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(e,t){m.send({_name:e,_data:t})}},{key:"clear",value:function(){m&&m.clear()}},{key:"checkIntercom",value:function(){return!!m}},{key:"initIntercom",value:function(e,t){(m=new h.default("parent")).init({origin:e,dest:t}),m.addListener(i)}}]),e}());t.default=S},35:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},36:function(e,t,n){var a=n(8),i=n(30),r=n(37),o=n(46)("src"),u=Function.toString,s=(""+u).split("toString");n(16).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var l="function"==typeof n;l&&(r(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(r(n,o)||i(n,o,e[t]?""+e[t]:s.join(String(t)))),e===a?e[t]=n:u?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||u.call(this)})},37:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},38:function(e,t,n){var a=n(34),i=n(50),r=n(26),o=n(22),u=n(84);e.exports=function(e,t){var n=1==e,s=2==e,l=3==e,d=4==e,c=6==e,f=5==e||c,p=t||u;return function(t,u,h){for(var v,E,_=r(t),g=i(_),I=a(u,h,3),y=o(g.length),T=0,m=n?p(t,y):s?p(t,0):void 0;y>T;T++)if((f||T in g)&&(E=I(v=g[T],T,_),e))if(n)m[T]=E;else if(E)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:m.push(v)}else if(d)return!1;return c?-1:l||d?d:m}}},386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(7),o=(a=r)&&a.__esModule?a:{default:a},u=window,s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sourceOrigin=t.origin,this._destinationWindow=t.destinationWindow,this._listener=t.listener,u.addEventListener("message",function(e){return n._listener(e)},!1)}return i(e,[{key:"sendMessage",value:function(e){var t=this;e&&o.default.requestTimeout(function(){t._destinationWindow.postMessage(e,t._sourceOrigin)},1)}}]),e}();t.default=s},387:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(){try{var e=JSON.stringify(v);s.default.browser.set(l.default.JOURNEY,e)}catch(e){}}function r(e,t){var n=s.default.getTabId(),a=(new Date).getTime();for(v.unshift({title:e,url:t,time:1,loadts:a,tabId:n});v.length>f;)v.pop();i()}function o(){var e=v[0];if(e){var t=e.time;e.tabId===s.default.getTabId()&&(v[0].time=t+c,i())}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=a(n(107)),l=a(n(12)),d=window,c=10,f=void 0,p=void 0,h=!1,v=void 0,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return u(e,[{key:"init",value:function(e,t,n){if(!h){f=e.maxUrls,p=e.maxUrlsLength;try{v=JSON.parse(s.default.browser.get(l.default.JOURNEY))}catch(e){v=[]}if(s.default.addListener(l.default.JOURNEY,function(e,t){try{t&&(v=JSON.parse(t))}catch(e){}}),e.autoPush)if(t.frameInFrame&&n)try{var a=JSON.parse(decodeURIComponent(n)||"{}");a&&a.title&&a.url&&r(a.title,a.url)}catch(e){}else r(d.document.title,d.location.href);h=!0,d.setInterval(o,1e3*c)}}},{key:"pushUrl",value:function(e,t){h&&r(e,t)}},{key:"getJourneyEncoded",value:function(e){var t=e||v.map(function(e){return e.tabId,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["tabId"])}),n=void 0,a=void 0;if(t){try{n=encodeURIComponent(JSON.stringify(t)),a=encodeURI(n)}catch(e){return}return a.length<=p?n:(t.pop(),this.getJourneyEncoded(t))}}}]),e}();t.default=new E},388:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e;return t.state=t.state||t.type,delete t.type,T[t.state]&&(t.state=T[t.state]),t.inviteId=t.inviteId||t.triggerAppId,delete t.triggerAppId,t}function r(e){for(var t=y,n=0;n<t.length;n+=1){var a=t[n];if(a&&a.getInviteId()===e)return{invite:a,index:n}}return{invite:void 0,index:-1}}function o(e,t){v.default.notEmpty(e,"inviteId");var n=r(e),a=n.invite,i=n.index;return v.default.assert(i>-1,"Invite doesn't exist"),!!a.destructor(t)&&(y[i]=void 0,!0)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=a(n(389)),l=a(n(92)),d=a(n(158)),c=a(n(21)),f=a(n(14)),p=a(n(6)),h=a(n(68)),v=a(n(3)),E=a(n(33)),_=!1,g=void 0,I=void 0,y=[],T={proactive:l.default.STATE.MAXIMIZED,button:l.default.STATE.MINIMIZED},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return u(e,[{key:"init",value:function(e,t){_||(g=t,this._supportHours=e.supportHours,c.default.addStylesheet(l.default.LOADER_CSS_ID,l.default.LOADER_CSS),_=!0)}},{key:"triggerInvite",value:function(e,t){if(_&&t){i(t);var n=t.inviteId,a=t.state,u=r(n).invite;if(u){if(u.getState()===l.default.STATE.MAXIMIZED)return void g.trackInteraction({logLevel:E.default.LOG_LEVEL.INFO,message:E.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.default.TRACK_INTERACTION.INVITE_ALREADY_MAXIMIZED,inviteId:n}},!0);this.removeInvite(t)}var c,v=function(e,t){var n=t.inviteId,a={},i={};a.engaged=I;for(var r=0;r<e.length;r+=1)if(e[r]&&e[r].inviteId===n){i=e[r];break}return(0,p.default)(a,i,t),a}(e.invites||[],t),T=h.default.documentHasFocus();v.queue||(v.queue=t.fallbackQueue||e.workflowConfig.assistQueue),v.appId=e.appId,v.device=g.device,v.appleBusinessChat=g.appleBusinessChat,v.workflowConfig=e.workflowConfig,v.tabVisibleOnTrigger=T;try{var m=d.default.getTemplate(v.template),S=e.supportHours||this._supportHours;if(g.disableBackgroundInvite&&a===l.default.STATE.MAXIMIZED&&!T)return void g.trackInteraction({logLevel:E.default.LOG_LEVEL.INFO,message:E.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.default.TRACK_INTERACTION.INVITE_PAGE_BACKGROUND}},!0);var b=new s.default({config:v,template:m,supportHours:S,apis:(c=f.default.noop,{startInteraction:g.startInteraction,removeInvite:o,logEvent:g.logEvent,fifMessageSender:g.fifMessageSender||c,onStateChange:g.onStateChange||c,trackInteraction:g.trackInteraction||c})});y.push(b)}catch(e){var A=e.message||e;g.trackInteraction({logLevel:E.default.LOG_LEVEL.INFO,message:E.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.default.TRACK_INTERACTION.INVITE_INITIALIZATION_ERROR,inviteId:n,state:a,errorMsg:A,errorStack:e.stack}},!0)}}}},{key:"setInteractionActive",value:function(e){var t;v.default.isBoolean(e,"setInteractionActive:active"),I=e,t=function(t){return t.stimulus(l.default.STIMULI_TYPE.INTERACTION,e)},y.forEach(function(e){return e&&t(e)})}},{key:"removeInvite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(e);var t=e.inviteId,n=e.force;try{return o(t,n)}catch(e){return!1}}}]),e}();t.default=new m},389:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,a){return e[e.device+"."+t+"."+n]||e[t+"."+n]||e[""+n]||a}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(390)),u=a(n(92)),s=a(n(24)),l=a(n(6)),d=a(n(90)),c=a(n(7)),f=a(n(33)),p=u.default.STATE,h="-",v=[p.MAXIMIZED,p.MINIMIZED],E=function(){function e(t){var n=this,a=t.config,r=t.template,s=t.apis,l=t.supportHours;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._desiredState=a.state,this._inviteId=a.inviteId,this._caqueue=a.queue,this._caskill=a.skill,this._engaged=a.engaged,this._dockId=a.dockId,this._appInteractionId="",this._caTrueOnce=!1,this._caChecked=!1,this._stateChangedByAction=!1,this._caPoller=void 0,this._trackingId="",this._apis=s,this._ruleId=a.ruleId,this._appId=a.appId,this._tabVisibleOnTrigger=a.tabVisibleOnTrigger,this._trackAction(u.default.TRACK_INTERACTION.INVITE_REQUESTED),this._assistAvailability=new o.default(a.workflowConfig),this._invite=new r(a,function(e,t){e.split(h).map(function(e){return n.stimulus(u.default.STIMULI_TYPE.ACTION,e,t)})},s.fifMessageSender),this._caMap={},Object.keys(p).map(function(e){var t=p[e];return n._caMap[t]=i(a,t,"caType",u.default.AVAILABILITY_CHECK.NONE),0}),this._supportHours=new d.default(l,this._caqueue),this._preCheckSupportHours=i(a,a.state,"preCheckSupportHours","false"),this._pollInterval=a.pollInterval,this._pollDuration=a.pollDuration,this._checkAndLogAfterHours(),this._requestStateUpdate()}return r(e,[{key:"_checkAndLogAfterHours",value:function(){this._supportHours.isWithinSupportHours()||this._track(u.default.EVENT.QUEUE_AFTER_HOURS,this._getInviteMetadata({}))}},{key:"_requestStateUpdate",value:function(){var e,t,n,a,i,r,o,u=this,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caTrueOnce=!1,this._caChecked=!1,this._caType=this._caMap[this._desiredState],this._stopAvailabilityPoller(),this._pollInterval&&this._pollDuration&&(this._caPoller=(e=this._invokeAvailabilityCheck.bind(this),t=function(){return!u._engaged},n=parseInt(this._pollInterval,10),a=parseInt(this._pollDuration,10),i=!1,r=c.default.requestInterval(function(){if(t()&&!i){var r=a-n;c.default.requestTimeout(function(){o()},r),i=!0}e()},n),{clear:o=function(){c.default.clearRequestInterval(r)}})),s&&this._invokeAvailabilityCheck()}},{key:"_stopAvailabilityPoller",value:function(){this._caPoller&&this._caPoller.clear()}},{key:"_invokeAvailabilityCheck",value:function(){if(this._engaged)this.stimulus(u.default.STIMULI_TYPE.INTERACTION,!0);else if("true"!==this._preCheckSupportHours||this._supportHours.isWithinSupportHours()){switch(this._caType){case u.default.AVAILABILITY_CHECK.NONE:this.stimulus(u.default.STIMULI_TYPE.AVAILABILITY,!0,{});break;case u.default.AVAILABILITY_CHECK.REPEAT:this._checkAvailability();break;case u.default.AVAILABILITY_CHECK.ONCE:this._caChecked||this._checkAvailability();break;case u.default.AVAILABILITY_CHECK.TILL_AVAILABLE:this._caTrueOnce||this._checkAvailability()}this._caChecked=!0}else this.stimulus(u.default.STIMULI_TYPE.AVAILABILITY,!1,{})}},{key:"_trackAction",value:function(e){var t=this._state||this._desiredState;this._apis.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.USER_ACTION,logData:{action:e,inviteId:this._inviteId,appInteractionId:this._appInteractionId,state:t,tabVisibleOnTrigger:this._tabVisibleOnTrigger}},t===u.default.STATE.MAXIMIZED)}},{key:"stimulus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e+"_"+t){case u.default.STIMULI.AGENT_AVAILABLE:if(!this._engaged){var a=!this._caTrueOnce&&!this._stateChangedByAction;this._stateChangedByAction=!1,this._setState(this._desiredState,a),this._trackingId=n.trackingId||"",this._caTrueOnce||(this._caTrueOnce=!0)}break;case u.default.STIMULI.AGENT_UNAVAILABLE:this._engaged||(this._supportHours.isWithinSupportHours()?(this._setState(p.BUSY),this._track(u.default.EVENT.CA_CHECK_FAIL,this._getInviteMetadata({}))):this._setState(p.OFFLINE));break;case u.default.STIMULI.INTERACTION_STARTED:this._engaged=!0,this._setState(p.ENGAGED);break;case u.default.STIMULI.INTERACTION_ENDED:this._engaged=!1,this._requestStateUpdate();break;case u.default.STIMULI.INVITE_OFFERED:this._appInteractionId=s.default.uuid(),this._track(u.default.EVENT.INVITE_OFFERED,this._getInviteMetadata(n.event)),this._trackAction(u.default.TRACK_INTERACTION.INVITE_OFFERED);break;case u.default.STIMULI.INVITE_ACCEPTED:this._track(u.default.EVENT.INVITE_ACCEPTED,this._getInviteMetadata(n.event)),this._apis.startInteraction(this._getInviteMetadata(n.interaction)),this._trackAction(u.default.TRACK_INTERACTION.INVITE_ACCEPTED);break;case u.default.STIMULI.INVITE_DECLINED:this._track(u.default.EVENT.INVITE_DECLINED,this._getInviteMetadata(n.event)),this._trackAction(u.default.TRACK_INTERACTION.INVITE_DECLINED);break;case u.default.STIMULI.INVITE_IGNORED:this._track(u.default.EVENT.INVITE_IGNORED,this._getInviteMetadata(n.event)),this._trackAction(u.default.TRACK_INTERACTION.INVITE_IGNORED);break;case u.default.STIMULI.INVITE_REMOVED:this._apis.removeInvite(this.getInviteId());break;case u.default.STIMULI.INVITE_MINIMIZED:this._desiredState=u.default.STATE.MINIMIZED,this._state=void 0,this._engaged||(this._setState(p.MINIMIZED,!0),this._stateChangedByAction=!0),this._requestStateUpdate(!1)}}},{key:"getState",value:function(){return this._state}},{key:"getInviteId",value:function(){return this._inviteId}},{key:"_checkAvailability",value:function(){this._assistAvailability.check(this._caqueue,this._caskill,this.stimulus.bind(this,u.default.STIMULI_TYPE.AVAILABILITY)),this._apis.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.USER_ACTION,logData:{action:u.default.TRACK_INTERACTION.AVAILABILITY_CHECK}})}},{key:"_track",value:function(e,t){this._apis.logEvent({event:e,eventData:t})}},{key:"_getInviteMetadata",value:function(e){var t=(0,l.default)({},{queue:this._caqueue,ruleId:this._ruleId,state:this._state,appInteractionId:this._appInteractionId,triggerAppId:this._inviteId,inviteId:this._inviteId,trackingId:this._trackingId,appId:this._appId,dockId:this._dockId},e);return this._caskill&&!t.skill&&(t.skill=this._caskill),t}},{key:"_handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.inviteId=this._inviteId,this._apis.onStateChange(e)}},{key:"_setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._invite&&this._state!==e){var n=void 0;try{n=this._invite.setState(e,t)}catch(t){var a=t.message||t;return void this._apis.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:u.default.TRACK_INTERACTION.INVITE_SET_STATE_ERROR,inviteId:this._inviteId,state:e,errorMsg:a,errorStack:t.stack}},!0)}this._state!==n&&this._handleStateChange({inviteState:n}),this._state=n}}},{key:"destructor",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]&&v.indexOf(this._state)>=0)return!1;this._stopAvailabilityPoller();try{this._invite.destructor()}catch(e){}return this._invite=void 0,!0}}]),e}();t.default=E},39:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},390:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(24)),o=a(n(3)),u=a(n(21)),s=window,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatConfig=t,this._trackingIdMap={}}return i(e,[{key:"check",value:function(e,t,n){this._makeServerCall(e,t,n)}},{key:"getTrackingId",value:function(e){return this._trackingIdMap[e]}},{key:"_makeServerCall",value:function(e,t,n){var a=this._getCallbackName("_tfs_"),i=this._chatConfig,r=i.overrideCaStatus,o=i.overrideQueue,l=e;o&&(l=o);var d=this._getResponseHandler(a,l,n);if(s[a]=d,r){var c={data:{caStatus:r}};"true"===r&&(c.data.trackingId="DEBUG01$12345"),d(c)}else u.default.injectScript(this._getURL(a,l,t),function(e){},document,{id:a},3e4)}},{key:"_getCallbackName",value:function(e){return e+r.default.get(10)}},{key:"_getResponseHandler",value:function(e,t,n){var a=this;return function(i){var r="false",o=void 0;i&&i.data&&(i.data.caStatus&&(r=i.data.caStatus),(o=i.data.trackingId)&&(a._trackingIdMap[t]=o));var u=document.getElementById(e);u&&u.parentNode.removeChild(u);try{delete s[e]}catch(t){s[e]=void 0}n(r,{trackingId:o})}}},{key:"_getURL",value:function(e,t,n){o.default.notEmpty(e,"callback name"),o.default.notEmpty(t,"queue");var a=this._chatConfig,i=a.assistCAEndpoint+"/rest/checkAvailability?",r={queueId:t,accountId:a.assistAccountId,jsonp:e};n&&(r.skillId=n);var u=this.getTrackingId(t);return u&&(r.trackingId=u),i+Object.keys(r).map(function(e){return e+"="+r[e]}).join("&")}}]),e}();t.default=l},391:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return"undefined"!=typeof AppleBusinessChat&&AppleBusinessChat.isSupported()}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){if(Array.isArray(e))return e.map(function(e,n){return u(e,t,n)});var a=m.createElement(t.tag),i=""+d.default.INVITE_PREFIX+t.inviteId+"_";if(a.id=""+i+t.name+n,e.css&&p.default.setStyle(a,e.css,!0),e.text&&(a.innerHTML=e.text),e.tooltip&&A.test(e.action)){var r=e.action.match(A)[2]?e.action.match(A)[2].split("-"):["click","hover","focus"];new O(a,e.tooltip,a.id,r)}if(e.action&&t.signal&&!A.test(e.action)&&new y.default(a).on("tap",function(){var n=e.action,a=e.queue,i=e.skill,r={event:{},interaction:{}};a&&(r.event.queue=a,r.interaction.queue=a),i&&(r.event.skill=i,r.interaction.skill=i),t.signal(n,r)}),e.attributes&&Object.keys(e.attributes).map(function(t){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return a.setAttribute(n,e.attributes[t]),0}),Array.isArray(e.animate)&&e.animate.map(function(e){var t=e.property,n=e.unit,i=e.from,r=e.to,o=e.duration,u=e.easing;return l.default.animateCSS(a,t,n,parseInt(i,10),parseInt(r,10),parseInt(o,10),u),0}),e.audio){var o=parseInt(e.audio.delay,10)||0,s=e.audio.name;I.default.register(s,e.audio),h.default.requestTimeout(function(){return I.default.play(s,!0)},o)}return t.parent&&t.parent.appendChild(a),a}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(392)),d=a(n(92)),c=a(n(106)),f=a(n(158)),p=a(n(21)),h=a(n(7)),v=a(n(156)),E=a(n(6)),_=a(n(3)),g=a(n(14)),I=a(n(171)),y=a(n(393)),T=a(n(15)),m=document,S=void 0,b={},A=/^tooltip(-(.+))?/,O=function(){function e(t,n,a,r){var o=this;i(this,e),this.element=t,this.config=n,this.inviteId=a,this.tooltipElement=void 0,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),r.forEach(function(e){switch(e){case"hover":o._handle("mouseover","mouseout");break;case"click":o._handle("click","focusout");break;case"focus":o._handle("focusin","focusout")}})}return s(e,[{key:"_showTooltip",value:function(){if(!this.tooltipElement){var e=this.config,t=this.inviteId,n=u(e.container,{name:"tooltip_container",tag:"div",inviteId:t});u(e.before,{name:"tooltip_before",tag:"div",parent:n,inviteId:t}),u(e.content,{name:"tooltip_content",tag:"div",parent:n,inviteId:t}),u(e.after,{name:"tooltip_after",tag:"div",parent:n,inviteId:t}),this.tooltipElement=n,this.element.parentNode.appendChild(n)}}},{key:"_hideTooltip",value:function(){this.tooltipElement&&(this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=void 0)}},{key:"_handle",value:function(e,t){var n=this;this.element.addEventListener(e,function(){return n._showTooltip()}),this.element.addEventListener(t,function(){return n._hideTooltip()})}}]),e}(),w=function(){function e(t,n,a){i(this,e),this._config=f.default.parseConfig(t),this._signal=n,t.appleBusinessChat&&(b=t.appleBusinessChat),S=a}return s(e,[{key:"_clearTimeout",value:function(){this._timeout&&h.default.clearRequestTimeout(this._timeout)}},{key:"setState",value:function(e,t){_.default.notEmpty(e,"GenericInviteTemplate: state"),_.default.isBoolean(t,"GenericInviteTemplate: reset"),this.destructor();var n=this._config,a=n.device,i=void 0;if(!(a&&n[a]&&n[a][e]))return e;i=n[a][e],this._stateConfig=i;var s=i.timeout||{},l=s.duration,f=s.action,I=void 0===f?"ignore-remove":f;l&&(this._timeout=h.default.requestTimeout(this._signal.bind(this,I,{}),l)),v.default.alter("true"===i.restrictViewport),this._invite=function(e,t,n){var a;e.frame&&e.frame.css&&S(c.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,e.frame.css,!0);var i=void 0,s=void 0,l=void 0;if(e.appleBusinessChat&&o()){var f=b,v=f.enabled,_=f.businessId,I=f.theme,m=f.intentId,A=f.groupId;if(v&&_){var O,w=(r(O={},d.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.CLASS_NAME,d.default.APPLE_BUSINESS_CHAT.REQUIRED_CLASS),r(O,d.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.BUSINESS_ID,_),r(O,d.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.THEME,I),O),C=g.default.getFunctionReference(m);if(C){var k=C(t);k&&"string"==typeof k&&(w[d.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.INTENT_ID]=k)}var N=g.default.getFunctionReference(A);if(N){var R=N(t);R&&"string"==typeof R&&(w[d.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.GROUP_ID]=R)}return u((0,E.default)({},e.appleBusinessChat,{attributes:w}),{name:"applebusinesschat",tag:"div",inviteId:t})}}if(e.lightbox&&"true"===e.lightbox.show){var D=d.default.LIGHTBOX_CSS;e.lightbox.css&&(D=(0,E.default)({},D,{css:e.lightbox.css})),u(D,{name:"lightbox",tag:"div",parent:s=u({},{name:"wrapper",tag:"div",inviteId:t}),inviteId:t}),i=u(e.container,{name:"container",tag:"div",parent:s,inviteId:t}),l=s}else i=u(e.container,{name:"container",tag:"div",inviteId:t}),l=i;u(e.viewBackground?(0,E.default)({},e.viewBackground,{attributes:r({},d.default.VIEW_ENABLED_ATTRIBUTE,!0)}):void 0,{name:"view",tag:"div",parent:i,inviteId:t}),u(e.decorative,{name:"decorative",tag:"div",parent:i,inviteId:t});var M=u(e.content,{name:"content",tag:"div",parent:i,inviteId:t});if(u(e.badge?(0,E.default)({},e.badge,{css:{display:"none"},attributes:(a={},r(a,d.default.BADGE_ENABLED_ATTRIBUTE,!0),r(a,d.default.BADGE_HINT_ATTRIBUTE,e.badge.hintText),a)}):void 0,{name:"badge",tag:"div",parent:M,inviteId:t,signal:n}),u(e.context,{name:"context",tag:"div",parent:M,inviteId:t}),u(e.action,{name:"action",tag:"button",parent:M,inviteId:t,signal:n}),e.touchMove){var L=new y.default(l),P=void 0,Y=function(){p.default.setStyle(l,e.container.css,!0)};L.on("sort",function(e){var t=e.start,n=e.end,a=t.x-P.left,i=t.y-P.top,r=Math.max(Math.min(n.y-i,window.innerHeight-P.height),0),o=Math.max(Math.min(n.x-a,window.innerWidth-P.width),0);p.default.setStyle(l,{top:r+"px",left:o+"px",right:"auto",bottom:"auto",transform:"initial",position:"fixed",webkitTapHighlightColor:"rgba(0,0,0,0)"})}),L.on("sortgrab",function(){P=l.getBoundingClientRect(),p.default.setStyle(l,{opacity:"0.8"}),p.default.addClass(l,"tfs-animate"),h.default.requestTimeout(function(){p.default.removeClass(l,"tfs-animate")},500)}),L.on("sortend",function(){P=void 0,p.default.setStyle(l,{opacity:"1"})}),window.addEventListener("orientationchange",Y),T.default.isPhone||T.default.isTablet||window.addEventListener("resize",Y)}return l}(i,n.inviteId,this._signal),"true"===n.cssReset&&p.default.addClass(this._invite,"tfs-reset-css"),this._lastWidgetUpdate&&this.widgetUpdate(this._lastWidgetUpdate);var A=m.querySelector(i.selector||"body");return this._invite&&A&&(A.insertBefore(this._invite,A.firstChild),o()&&AppleBusinessChat.setUpButtons()),t&&this._signal(d.default.ACTION.OFFER,{event:{state:e}}),e}},{key:"widgetUpdate",value:function(e){var t=e.unreadMessageCount,n=e.widgetView;if(this._invite){var a=this._invite.querySelector("["+d.default.BADGE_ENABLED_ATTRIBUTE+"=true]");if(a&&t){var i=a.getAttribute(d.default.BADGE_HINT_ATTRIBUTE);a.setAttribute("aria-label",t+" "+i),a.textContent=t,a.style.display="block"}var r=this._invite.querySelector("["+d.default.VIEW_ENABLED_ATTRIBUTE+"=true]");if(r&&this._stateConfig&&this._stateConfig.viewBackground){this._viewBackground||(this._viewBackground=r.style.background);var o=this._stateConfig.viewBackground[n]||this._viewBackground;r.style.background=o}}else this._lastWidgetUpdate={unreadMessageCount:t,widgetView:n}}},{key:"destructor",value:function(){try{var e=this._invite;return e&&e.parentNode.removeChild(e),this._clearTimeout(),this._invite=void 0,v.default.alter(!1),!0}catch(e){return!1}}}]),e}();t.default=w},392:function(e,t,n){var a,i,r;i=this,r=function(e){e.animate=function(e,n,a,i,r,o){if("number"==typeof e&&"number"==typeof n&&"number"==typeof a&&"function"==typeof i){"string"==typeof r&&t[r]&&(r=t[r]),"function"!=typeof r&&(r=t.linear),"function"!=typeof o&&(o=function(){});var u=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},s=!1,l=n-e;i(e);var d=window.performance&&window.performance.now?window.performance.now():+new Date;return u(function t(c){if(!s){var f=(c||+new Date)-d;f>=0&&i(r(f,e,l,a)),f>=0&&f>=a?(i(n),o()):u(t)}}),{cancel:function(){s=!0}}}},e.animateCSS=function(t,n,a,i,r,o,u,s){return e.animate(i,r,o,function(e){t.style[n]=e+a},u,s)},e.cancel=function(e){e&&e.cancel()};var t=e.easings={};t.linear=function(e,t,n,a){return n*e/a+t},t.easeInQuad=function(e,t,n,a){return n*(e/=a)*e+t},t.easeOutQuad=function(e,t,n,a){return-n*(e/=a)*(e-2)+t},t.easeInOutQuad=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},t.easeInCubic=function(e,t,n,a){return n*(e/=a)*e*e+t},t.easeOutCubic=function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},t.easeInOutCubic=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},t.easeInQuart=function(e,t,n,a){return n*(e/=a)*e*e*e+t},t.easeOutQuart=function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},t.easeInOutQuart=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},t.easeInQuint=function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},t.easeOutQuint=function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},t.easeInOutQuint=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},t.easeInSine=function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},t.easeOutSine=function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},t.easeInOutSine=function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t},t.easeInExpo=function(e,t,n,a){return 0==e?t:n*Math.pow(2,10*(e/a-1))+t},t.easeOutExpo=function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},t.easeInOutExpo=function(e,t,n,a){return 0==e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},t.easeInCirc=function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},t.easeOutCirc=function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},t.easeInOutCirc=function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},t.easeInElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return-r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)+t},t.easeOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*e)*Math.sin((e*a-o)*(2*Math.PI)/i)+n+t},t.easeInOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(2==(e/=a/2))return t+n;if(i||(i=a*(.3*1.5)),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*-.5+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*.5+n+t},t.easeInBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},t.easeOutBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},t.easeInOutBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},t.easeInBounce=function(e,n,a,i){return a-t.easeOutBounce(i-e,0,a,i)+n},t.easeOutBounce=function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},t.easeInOutBounce=function(e,n,a,i){return e<i/2?.5*t.easeInBounce(2*e,0,a,i)+n:.5*t.easeOutBounce(2*e-i,0,a,i)+.5*a+n}},void 0===(a=function(e){r(i.TinyAnimate=e)}.apply(t,[t]))||(e.exports=a)},393:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(7)),o=a(n(14)),u=a(n(27)),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touch=!1,this.action=!1,this.diffX=0,this.diffY=0,this.endX=0,this.endY=0,this.scroll=!1,this.sort=!1,this.startX=0,this.startY=0,this.swipe=!1,this._element=t,this._onEndBound=this.onEnd.bind(this),this._onMoveBound=this.onMove.bind(this),this._onKeyUpBound=this.onKeyUp.bind(this),this._onStartBound=this.onStart.bind(this),this._element.addEventListener("touchstart",this._onStartBound),this._element.addEventListener("mousedown",this._onStartBound),this._element.addEventListener("keyup",this._onKeyUpBound),this._element.addEventListener("touchmove",this._onMoveBound),this._element.addEventListener("touchend",this._onEndBound),this._element.addEventListener("touchcancel",this._onEndBound),this._onTap=o.default.noop,this._onSwipe=o.default.noop,this._onSwipeEnd=o.default.noop,this._onSort=o.default.noop,this._onSortEnd=o.default.noop,this._onSortGrab=o.default.noop}return i(e,[{key:"testTouch",value:function(e){if("touchstart"===e.type)this.touch=!0;else if(this.touch)return this.touch=!1,!1;return!0}},{key:"getCoord",value:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}},{key:"onKeyUp",value:function(e){e.preventDefault(),e.stopPropagation(),u.default.shouldHandleActivate(e)&&this._onTap()}},{key:"onStart",value:function(e){var t=this;this.testTouch(e)&&!this.action&&(this.action=!0,this.startX=this.getCoord(e,"X"),this.startY=this.getCoord(e,"Y"),this.diffX=0,this.diffY=0,this.sortTimer=r.default.requestTimeout(function(){t.sort=!0,t._onSortGrab()},200),"mousedown"===e.type&&(document.addEventListener("mousemove",this._onMoveBound),document.addEventListener("mouseup",this._onEndBound)))}},{key:"onMove",value:function(e){this.action&&(this.endX=this.getCoord(e,"X"),this.endY=this.getCoord(e,"Y"),this.diffX=this.endX-this.startX,this.diffY=this.endY-this.startY,this.sort||this.swipe||this.scroll||(Math.abs(this.diffY)>10?this.scroll=!0:Math.abs(this.diffX)>7&&(this.swipe=!0)),this.swipe&&(e.preventDefault(),this._onSwipe({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),this.sort&&(e.preventDefault(),this._onSort({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),(Math.abs(this.diffX)>5||Math.abs(this.diffY)>5)&&r.default.clearRequestTimeout(this.sortTimer))}},{key:"onEnd",value:function(e){this.action&&(this.action=!1,this.swipe?this._onSwipeEnd():this.sort?this._onSortEnd():!this.scroll&&Math.abs(this.diffX)<5&&Math.abs(this.diffY)<5&&("touchend"===e.type&&e.preventDefault(),this._onTap()),this.swipe=!1,this.sort=!1,this.scroll=!1,r.default.clearRequestTimeout(this.sortTimer),"mouseup"===e.type&&(document.removeEventListener("mousemove",this._onMoveBound),document.removeEventListener("mouseup",this._onEndBound)))}},{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.noop;switch(e){case"swipe":this._onSwipe=t;break;case"swipeend":this._onSwipeEnd=t;break;case"sort":this._onSort=t;break;case"sortend":this._onSortEnd=t;break;case"sortgrab":this._onSortGrab=t;break;case"tap":this._onTap=t}}}]),i(e,[{key:"destroy",value:function(){this._element&&(this._element.removeEventListener("touchstart",this._onStartBound),this._element.removeEventListener("mousedown",this._onStartBound),this._element.removeEventListener("keyup",this._onKeyUpBound),this._element.removeEventListener("touchmove",this._onMoveBound),this._element.removeEventListener("touchend",this._onEndBound),this._element.removeEventListener("touchcancel",this._onEndBound))}}]),e}();t.default=s},394:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(92)),o=a(n(14)),u=a(n(21)),s=a(n(3)),l=document,d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=this._processConfig(t),this._signal=n;var a=this._config.device;s.default.notEmpty(a,"device");var i=this._config[a].selector;s.default.notEmpty(i,"Selector '"+i+"'"),this._element=l.querySelector(i),s.default.isObject(this._element,i),this._actionListener=function(e,t){var n=t.currentTarget.getAttribute(r.default.ACTION_ATTRIBUTE);n&&e(n,{})}.bind(this,n),this._element.addEventListener("click",this._actionListener)}return i(e,[{key:"_processConfig",value:function(e){var t={};Object.keys(e).map(function(n){return o.default.setValueWithPath(t,".",n,e[n])});var n=t[t.device];return t.classes=[],Object.keys(n).map(function(e){var a=n[e];return a&&a.class&&t.classes.push(a.class),e.class}),t}},{key:"_searchAndReplace",value:function(e){for(var t=this._config.classes,n=this._element,a=0;a<t.length;a+=1)t[a]&&u.default.hasClass(n,t[a])&&u.default.removeClass(n,t[a]);e&&u.default.addClass(n,e)}},{key:"setState",value:function(e,t){s.default.notEmpty(e,"ClientManagedInviteTemplate: state"),s.default.isBoolean(t,"ClientManagedInviteTemplate: reset");var n=this._config,a=n.device,i=void 0;if(!(a&&n[a]&&n[a][e]))return e;(i=n[a][e]).action?this._element.setAttribute(r.default.ACTION_ATTRIBUTE,i.action):this._element.removeAttribute(r.default.ACTION_ATTRIBUTE),t&&this._signal(r.default.ACTION.OFFER,{event:{state:e}});var o=this._config[a].eventName?this._config[a].eventName:r.default.CUSTOM_EVENT_NAME,u=new CustomEvent(o,{detail:{inviteState:e,inviteId:this._config.inviteId}});return this._element.dispatchEvent(u),this._searchAndReplace(i.class),e}},{key:"destructor",value:function(){this._element.removeEventListener("click",this._actionListener)}}]),e}();t.default=d},395:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(3)),o=a(n(7)),u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._signal=n}return i(e,[{key:"setState",value:function(e,t){var n=this;return r.default.notEmpty(e,"DirectInviteTemplate: state"),r.default.isBoolean(t,"DirectInviteTemplate: reset"),t&&(this._signal("offer-accept",{event:{state:e}}),o.default.requestTimeout(function(){n._signal("remove")},1)),e}},{key:"destructor",value:function(){}}]),e}();t.default=u},396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={URL_PARAMS:{CONTEXT_INFO:"contextInfo",CLIENT_KEY:"clientKey",APP_ID:"appId",RULE_ID:"ruleId",INVITE_ID:"inviteId",LOAD_CUSTOMSCRIPT:"loadCustom",FIRE_LINK_PROPERTY:"fireLinkProperty",FIRE_TARGET_DETERMINATION:"fireTargetDetermination",IS_POPUP:"isPopup"},EXTENSIBLE:{SCRIPT_ID:"tfs-tie-extensible",PATH:"/psp/platform/",DOMAIN_PROD:"d1af033869koo7.cloudfront.net",DOMAIN_STAGE:"d2j8jkom7xmn9n.cloudfront.net",SCRIPT:"247pxe.js",SCRIPT_DEBUG:"247pxe.debug.js"},TYPE_BUTTON:"BUTTON",LOCAL_STORAGE_KEY:"tfs-directchat",DEBUG_KEY:"debug",WIDGET_STATE:{WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},EVENTS:{TARGET_DETERMINATION:"TargetDeterminationEvent",LINK_PROPERTY:"LinkPropertyEvent",CONNECTION_TO_AGENT:"OnlineInteractionConnectionToAgentEvent"},IVR:{ANI:"ani",PHONE_NUMBER:"phoneNumber"},STATE_CHANGE_EVENT:"stateChange",WINDOW:{TITLE:"Chat",NAME:"Chat"},PRIVATE_BROWSING_MESSAGE:"To enable chat, open this web page in a new window that isn't using Private/Incognito mode."}},397:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(339)),u=a(n(80)),s=a(n(107)),l=a(n(688)),d=a(n(12)),c=a(n(19)),f=a(n(149)),p=a(n(155)),h=a(n(154)),v=a(n(21)),E=a(n(43)),_=a(n(7)),g=a(n(340)),I=a(n(3)),y=a(n(124)),T=a(n(690)),m=a(n(156)),S=a(n(691)),b=a(n(29)),A=a(n(125)),O=a(n(9)),w=a(n(337)),C=a(n(123)),k=a(n(33)),N=a(n(15)),R=void 0,D=void 0,M=!1,L=void 0,P=void 0,Y=void 0,F=void 0,x=void 0,U=document,B=document.domain,K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(e){Y=e.metaData,x=e.securityRestrictions,m.default.init(x),h.default.init(x)}},{key:"updateState",value:function(e,t){S.default.updateState(e,t),l.default.setState(e,t)}},{key:"start",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];if(I.default.notEmpty(e,"appId"),o.default.setInteractionActive(!0),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll){u.default.update(e,a),F=u.default.get(e),p.default.isWidgetLoaded()||(s.default.browser.set(d.default.CONFIG_APP_ID,e),F.workflowConfig.chat&&s.default.browser.set(d.default.QUEUE,F.workflowConfig.chat.assistQueue)),(L=p.default.getInitialState()).app.displayMode=O.default.isUndefinedorNull(r)?S.default.getDisplayModeSetting(x):d.default.DISPLAY_MODE.FULLSCREEN,s.default.browser.get(d.default.DISPLAY_MODE_KEY)!==d.default.DISPLAY_MODE.NONE||y.default.isPopup()||w.default.getStorageType()!==d.default.STORAGE_TYPES.CUSTOM||(L.app.displayMode=d.default.DISPLAY_MODE.NONE),p.default.update(d.default.INITIAL_STATE,L);var h=F.i18n,m=h.locale,K=h.uiStrings;if(s.default.browser.get(d.default.QUEUE)&&F.workflowConfig.chat&&(F.workflowConfig.chat.assistQueue=s.default.browser.get(d.default.QUEUE)),U.getElementById(d.default.TFS_CONTAINER_ID)){var j=s.default.tab.get(d.default.APP_SESSION_KEY),H=void 0;switch(j&&(H=j.minimized),H){case!0:return g.default.send(c.default.STATE_CHANGE,d.default.WIDGET_STATE.MAXIMIZED),void s.default.tab.set({app:{minimized:!1}});case!1:return;default:p.default.cleanUp()}}var G=v.default.createElement("nottoshow",{id:d.default.TFS_HIDE_COBROWSE_ID});P=v.default.createElement("div",{id:d.default.TFS_CONTAINER_ID,class:"tfs-reset-css"});var V=void 0;L.app.displayMode===d.default.DISPLAY_MODE.FULLSCREEN||x.frameInFrame||(V=v.default.createElement("div",{id:d.default.TFS_DRAG_ID,class:"tfs-reset-css"}),P.appendChild(V)),R=v.default.createElement("iframe",{id:d.default.TFS_IFRAME_ID,src:"about:blank",class:"tfs-reset-css",frameborder:"0",title:F.windowTitle,style:"height: 100%; width: 100%; border: 0; background-color: transparent; overflow: hidden;",allow:"autoplay"}),P.appendChild(R);var W=l.default.initialize({appConfig:F,securityRestrictions:x,dockId:t,maximizeWidget:function(){g.default.send(c.default.STATE_CHANGE,d.default.WIDGET_STATE.MAXIMIZED)}}),q=void 0,X=s.default.browser.get(d.default.APP_SESSION_KEY);q=O.default.isUndefinedorNull(X)||O.default.isUndefinedorNull(X.context)||O.default.isEmptyorNull(X.context.frameView)?y.default.isPopup()?d.default.FRAME_VIEW.POPUP:d.default.FRAME_VIEW.INPAGE:X.context.frameView,b.default.refreshContext({dockId:W?t:"",frameView:q});var z=r||U.body;if(S.default.initialize({config:F,securityRestrictions:x,container:P,parentElement:r,dragHandle:V,hasCustomMinimize:W}),x.frameInFrame&&A.default.init(S.default.isFullScreen()),s.default.browser.get(d.default.DISPLAY_MODE_KEY)!==d.default.DISPLAY_MODE.NONE||y.default.isPopup()?this.updateState(d.default.STYLE_STATE.MAXIMIZED):this.updateState(d.default.STYLE_STATE.HIDDEN),G?(G.appendChild(P),z.appendChild(G)):z.appendChild(P),x.thirdPartyFrame)g.default.initIntercom(E.default.parseUrl(Y.path).origin,R.contentWindow),R.src=Y.path+"/renderer.html#parentOrigin="+location.origin;else{g.default.initIntercom(location.origin,R.contentWindow);try{D=R.contentWindow.document}catch(e){M=!0,R.src="javascript:var d=document.open();d.domain='"+B+"';void(0);",D=R.contentWindow.document}D.open()._load=function(e,t){M&&(D.domain=e);var n=t+"/js/renderer"+(T.default?".min":".polyfill.min")+".js";D.body.appendChild(v.default.createElement("script",{id:d.default.TFS_SCRIPT_ID},"'use strict';/** * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an * unpublished, proprietary work which is fully protected under * copyright law. This code may only be used pursuant to a valid * license from 24/7 Customer, Inc. *//** * PreRender module * @module loader/pre-render */(function () {var _doc = document;var _htmlLoadingTemplate = '<style type=\\'text/css\\'>body {background-color: transparent;overflow: hidden;}body * {box-sizing: border-box;}#tfs_loading_container {font-family: \\'Helvetica Neue\\', Helvetica, Arial, sans-serif;position: absolute;top: 50%;left: 50%;width: 160px;background: #fafafa;border: 1px solid #d6d6d6;border-radius: 10px;padding: 10px;transform: translate(-50%, -50%);-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);text-align: center;margin-top: 15px;}#tfs_loading_container * {user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}#tfs_loading_spinner {height: 60px; width: 100%;}#tfs_loading_text {font-size: 14px;color: #737373;}#tfs_loading_text:focus {outline: none;}#tfs_loading_close_button {display: none;line-height: 34px;border: none;background: #737373;color: #fafafa;border-radius: 5px;font-size: 13px;margin: 10px auto 0px;padding: 0px 20px;font-weight: bold;cursor: pointer;vertical-align: middle;outline: none;}</style><div id=\\'tfs_loading_container\\' class=\\'tfs_status_default\\'><div id=\\'tfs_loading_spinner\\' aria-hidden><svg width=\\'60\\' height=\\'60\\' viewBox=\\'0 0 60 60\\' stroke=\\'#bbb\\' focusable=\\'false\\'><g fill=\\'none\\' fill-rule=\\'evenodd\\'><g stroke-width=\\'2.5\\'><circle stroke-opacity=\\'.3\\' cx=\\'50%\\' cy=\\'50%\\' r=\\'18\\'/><path d=\\'\\'></path></g></g></svg></div><div id=\\'tfs_loading_text\\' aria-live=\\'polite\\' tabindex=\\'-1\\'>\x3c!-- PRE_RENDER_LOADING --\x3e</div><button id=\\'tfs_loading_close_button\\' type=\\'button\\'>\x3c!-- PRE_RENDER_CLOSE --\x3e</button></div>';function startAnimation() {var container = _doc.getElementById('tfs_loading_spinner');var startAngle = 0;var step = function step() {var path = container.getElementsByTagName('path')[0];if (path) {path.setAttribute('d', _describeArc(30, 30, 18, startAngle, startAngle + 90));startAngle += 2;setTimeout(step, 5);}};step();}function _polarToCartesian(centerX, centerY, radius, angleInDegrees) {var angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;return {x: centerX + radius * Math.cos(angleInRadians),y: centerY + radius * Math.sin(angleInRadians)};}function _describeArc(x, y, radius, startAngle, endAngle) {var start = _polarToCartesian(x, y, radius, endAngle);var end = _polarToCartesian(x, y, radius, startAngle);var arcSweep = endAngle - startAngle <= 180 ? '0' : '1';var d = ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');return d;}_doc.getElementById('tfs_container_root_pre').innerHTML = _htmlLoadingTemplate;_doc.getElementById('tfs_loading_text').focus();startAnimation();})();".replace("\x3c!-- PRE_RENDER_CLOSE --\x3e",v.default.reduceTags(K[m].PRE_RENDER_CLOSE)).replace("\x3c!-- PRE_RENDER_LOADING --\x3e",v.default.reduceTags(K[m].PRE_RENDER_LOADING)))),x.frameInFrame&&N.default.safariVersion&&(v.default.removeClass(P,"tfs-reset-css"),_.default.requestTimeout(function(){v.default.addClass(P,"tfs-reset-css")},10)),function(e){var t=F,n=t.frontendsService,a=t.appId,r=f.default.CONFIG_API_ACTION.WIDGET_LOADING,o=b.default.getContext();o.appInteractionId&&C.default.setAppInteractionId(o.appInteractionId),n.opts.configuration?u.default.requestConfig(n,a,o,r,function(t,n){n&&(F=u.default.get(a)),t&&C.default.logInteraction({logLevel:k.default.LOG_LEVEL.INFO,message:k.default.LOG_EVENTS.SYSTEM_ERROR,logData:i({action:"API_ERROR"},t)},!0),e()},function(e){C.default.logInteraction({logLevel:k.default.LOG_LEVEL.INFO,message:k.default.LOG_EVENTS.SYSTEM_DEBUG,logData:i({action:"API_PERF"},e)},!0)}):e()}(function(){s.default.browser.get(d.default.INITIAL_WORKFLOW)||s.default.browser.set(d.default.INITIAL_WORKFLOW,F.workflow),v.default.injectScript(n,function(e){C.default.logInteraction({logLevel:k.default.LOG_LEVEL.INFO,message:k.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_RENDERER",url:n,status:e}},!0);var t=D.getElementById("tfs_loading_spinner"),a=D.getElementById("tfs_loading_text"),i=D.getElementById("tfs_loading_close_button");switch(e){case"error":t&&v.default.hide(t),a&&(a.innerHTML="\n                    <h3>\n                      <strong>"+v.default.reduceTags(K[m].PRE_RENDER_FAILED_TITLE)+"</strong>\n                    </h3>\n                    <div>"+v.default.reduceTags(K[m].PRE_RENDER_FAILED_DESC)+"</div>\n                  ",i&&(v.default.show(i),i.addEventListener("click",function(){P.parentNode.removeChild(P)})));break;case"timeout":a&&(a.innerHTML=v.default.reduceTags(K[m].PRE_RENDER_TIMEOUT))}},D,{id:d.default.TFS_RENDERER_SCRIPT_ID},3e4)})},D.write("<!DOCTYPE html>\n        <html lang="+m+'>\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n          </head>\n          <body\n            style=\'position:relative;height:100%;height:100vh;margin:0 auto;overflow:hidden;\'\n            onload=\'document._load("'+B+'", "'+Y.path+"\");'>\n            <div id="+d.default.TFS_CONTAINER_ROOT_ID+"></div>\n            <div id="+d.default.TFS_CONTAINER_ROOT_PRE_ID+"></div>\n          </body>\n        </html>"),D.close(),s.default.browser.set(d.default.WIDGET_LOADED,!0),s.default.browser.set(d.default.SHOW_ON_RELOAD,!0),y.default.isPopup()&&s.default.browser.set(d.default.DISPLAY_MODE_KEY,d.default.DISPLAY_MODE.NONE),p.default.handleStateChange({widgetState:d.default.WIDGET_STATE.WIDGET_LOADING})}}else _.default.requestTimeout(function(){n.start(e,t,a,r)},50)}},{key:"stop",value:function(){var e=U.getElementById(d.default.TFS_HIDE_COBROWSE_ID);return!!e&&(e.parentNode.removeChild(e),S.default.terminate(),l.default.terminate(),C.default.unsetAppInteractionId(),o.default.setInteractionActive(!1),p.default.handleStateChange({widgetState:d.default.WIDGET_STATE.WIDGET_CLOSED}),P=void 0,!0)}},{key:"widgetNotification",value:function(e){l.default.widgetNotification(e)}}]),e}();t.default=new K},40:function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},41:function(e,t,n){"use strict";var a=n(11);e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},42:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),o=(a=r)&&a.__esModule?a:{default:a},u=/^([a-z0-9.+-]+:)/i,s=/(https?:)\/\/([^\/]+)(\/.*)*$/i,l=/(https?:\/\/[^\/]+)(?:\/.+)*$/i,d=/^\s*$/,c=/\/(?!.*\/).*/,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"normalizeUrl",value:function(e){o.default.notEmpty(e,"url");var t=window.location;return u.test(e)?e:/^\/\/.+/.test(e)?t.protocol+e:/^\/.+/.test(e)?t.origin+e:t.origin+t.pathname.replace(/\/[^\/]+$/,"/")+e}},{key:"getOriginFromUrl",value:function(e){o.default.assert(e,"url");var t=void 0;if(e.protocol&&e.hostname){if(!(t=e.origin)){var n=e.port,a="";n&&"80"!==n&&"443"!==n&&(a=":"+n),t=e.protocol+"//"+e.hostname+a}}else o.default.notEmpty(e,"url"),t=this.normalizeUrl(e).replace(l,"$1");return t}},{key:"formatUrl",value:function(e){o.default.isObject(e,"urlObj"),o.default.notEmpty(e.origin,"urlObj.origin");var t=[e.origin];return e.pathname&&t.push(e.pathname),e.search&&t.push(e.search),e.hash&&t.push(e.hash),t.join("")}},{key:"parseUrl",value:function(e){var t=this;o.default.notEmpty(e,"url");var n=this.normalizeUrl(e),a=s.exec(n);if(!a)return{};var i=a[1],r=a[2],u=r.split(":");if(d.test(u[0]))return{};var l="",f="",p="",h=void 0;if(a[3]){var v=a[3].split("?");if(v.length>1)p=v[0],l="?"+(h=v[1].split("#"))[0],h.length>1&&(f="#"+h[1]);else{var E=a[3].split("#");p=E[0],E.length>1&&(f="#"+E[1])}}var _=function(e){return e},g=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=arguments[4];o.default.isObject(n,"params"),o.default.assert(void 0===i||"boolean"==typeof i,"invalid encodeParams value");var r=i?encodeURIComponent:_,u=[];return e.length&&u.push(e.substring(1)),Object.keys(n).map(function(e){return u.push(e+"="+(void 0===e?"":r(n[e])))}),t+u.join(a)},I={protocol:i,host:r,hostname:u[0],port:u[1]?u[1]:"",origin:i+"//"+r,pathname:p,search:l,hash:f,href:n,replaceResource:function(e){if(c.test(I.pathname)){var n=c.exec(I.pathname)[0];I.pathname=I.pathname.replace(n,"/"+e)}return I.href=t.formatUrl(I),I},secure:function(){var e=/http:/i;return I.origin=I.origin.replace(e,"https:"),I.protocol=I.protocol.replace(e,"https:"),I.href=I.href.replace(e,"https:"),I},appendToHash:function(e,n,a){return I.hash=g(I.hash,"#",e,n,a),I.href=t.formatUrl(I),I},appendToSearch:function(e,n,a){return I.search=g(I.search,"?",e,n,a),I.href=t.formatUrl(I),I}};return I}},{key:"parseUrlParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";o.default.notEmpty(e,"url"),o.default.assert(void 0===t||"?"===t||"#"===t,"invalid separator value");var n={},a=e.split(t);a.length>2&&(a[1]=a.splice(1,a.length-1).join(t));var i=void 0,r=void 0,u=void 0,s=void 0,l=void 0;if(a.length>1)for(i=a[1].split("&"),u=0;u<i.length;u+=1)s=(r=i[u].split("="))[0],r.splice(0,1),l=r.join("")||null,n[s]=decodeURIComponent(l);return n}}]),e}();t.default=new f},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isObject=function(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e&&!t.isArray(e)},this.isString=function(e){return"string"==typeof e},this.isNumber=function(e){return"number"==typeof e},this.isArray=Array.isArray,this.isBoolean=function(e){return"boolean"==typeof e},this.isFunction=function(e){return"function"==typeof e}}},46:function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},47:function(e,t,n){var a=n(10);e.exports=function(e,t){if(!a(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!a(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},50:function(e,t,n){var a=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},51:function(e,t){e.exports=!1},52:function(e,t,n){var a=n(17)("unscopables"),i=Array.prototype;void 0==i[a]&&n(30)(i,a,{}),e.exports=function(e){i[a][e]=!0}},55:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t){var n=arguments;if(void 0===t||"object"!==(void 0===t?"undefined":a(t)))return t;for(var i=t,r=arguments.length<=1?0:arguments.length-1,o=0;o<r;o+=1)!function(t){var r=n.length<=t+1?void 0:n[t+1];void 0!==r&&"object"===(void 0===r?"undefined":a(r))&&Object.keys(r).map(function(t){return Object.prototype.hasOwnProperty.call(r,t)&&(void 0!==r[t]&&r[t].constructor&&r[t].constructor===Object?(void 0===i[t]&&(i[t]={}),"object"!==a(i[t])?i[t]=r[t]:e(i[t],r[t])):r[t]&&r[t].constructor===Array?i[t]=r[t].slice(0):i[t]=r[t]),0})}(o);return i}},61:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(3)),o=a(n(15)),u=a(n(43)),s=a(n(14)),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"createRequest",value:function(e,t){var n=new XMLHttpRequest,a="onreadystatechange";return"withCredentials"in n?(n.open(e,t,!0),""===n.responseType&&(a="onload")):"undefined"!=typeof XDomainRequest?((n=new XDomainRequest).open(e,t),a="onload"):n=null,{xhr:n,onloadHandler:a}}},{key:"makeRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.default.noop,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:s.default.noop,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.default.noop,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:s.default.noop,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:s.default.noop,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:s.default.noop;r.default.isFunction(i,"success"),r.default.isFunction(l,"error");var h=t;if("get"===e.toLowerCase()&&null!=a){var v=Object.keys(a).map(function(e){return e+"="+encodeURIComponent(a[e])}).join("&");h=h+"?"+v}9===o.default.ieVersion&&(n.Authorization&&(h=u.default.parseUrl(h).appendToSearch({api_key:n.Authorization}).href),h=h.replace(/(http(s?):)\/\//,"//"));var E=this.createRequest(e,h),_=E.xhr,g=E.onloadHandler;if(_){_.requestBeginTs=(new Date).getTime(),_.timeout=d||3e4,Object.keys(n).map(function(e){return _.setRequestHeader&&_.setRequestHeader(e,n[e]),0});var I=function(){_.requestDoneTs=(new Date).getTime(),l({url:h,errorMsg:_.statusText||"CORS error",errorInfo:_.responseText})};_[g]=function(){if("onreadystatechange"!==g||4===_.readyState){var e=void 0;try{e=_.status}catch(t){e=0}if(0===e)I();else if(_.responseText||204===e){if(204===e){var t={code:204,statusText:_.statusText};i(JSON.stringify(t))}else i(_.responseText);_.requestDoneTs=(new Date).getTime(),void 0===_.onloadstart&&void 0===_.onloadend&&p({url:h,statusCode:_.status,loadTime:-1,turnTime:_.requestDoneTs-_.requestBeginTs})}else I()}},"ontimeout"in _&&(_.ontimeout=I),_.addEventListener("progress",c,!1),_.addEventListener("error",I,!1),_.addEventListener("abort",f,!1),_.addEventListener("loadstart",function(){_.requestStartTs=(new Date).getTime()},!1),_.addEventListener("loadend",function(){_.requestEndTs=(new Date).getTime(),p({url:h,statusCode:_.status,loadTime:_.requestEndTs-_.requestStartTs,turnTime:_.requestDoneTs-_.requestBeginTs})},!1),_.onerror=I,_.send(a)}}}]),e}();t.default=l},62:function(e,t,n){var a=n(16),i=n(8),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:n(51)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={STATES:{INIT:"INIT",INVITED:"INVITED",INITIALIZED:"INITIALIZED",TIMEOUT:"TIMEOUT",STARTED:"STARTED",JOINED:"JOINED",ENDED:"ENDED"},COMMANDS:{USER_CLOSE:"USER_CLOSE",AGENT_CLOSE:"AGENT_CLOSE"},MODES:{COBROWSE:"cobrowse",COVIEW:"coview"}}},65:function(e,t,n){n(97),e.exports=n(16).Array.find},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"onChange",value:function(e){var t="hidden",n=function(n){var a=n||window.event,i={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};e(a.type in i?i[a.type]:!document[t])};if(void 0===document.hidden){var a=["moz","webkit","ms"];Object.keys(a).forEach(function(e){var i=a[e].concat("Hidden");i in document&&(t=i,document.addEventListener(a[e].concat("visibilitychange"),n))}),"onfocusin"in document?(document.onfocusin=n,document.onfocusout=n):(window.onpageshow=n,window.onpagehide=n,window.onfocus=n,window.onblur=n)}else document.addEventListener("visibilitychange",n)}}],[{key:"documentHasFocus",value:function(){return document.hasFocus?document.hasFocus():"hidden"in document?!document.hidden:!document.visibilityState||"visible"===document.visibilityState}}]),e}();t.default=i},680:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){if(U=!0,x.initdone){var e=_.default.getFunctionReference(x.initdone);"function"==typeof e&&e()}}function s(e){var t=O.default.get(e),n=k.default.getContext();m.default.init(x.key||"default",t.frontendsService,{vi:n.vi,tabId:y.default.getTabId(),userAgent:navigator.userAgent,browser:n.browser||void 0,device:n.device_id||void 0,os:n.os||void 0}),m.default.setAppId(e),S.default.configure({channelSessionId:n.vi+"::"+n.asid,events:t.events,onTrackEvent:t.apis.onTrackEvent?_.default.getFunctionReference(t.apis.onTrackEvent):void 0,logger:function(e){m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_ERROR,logData:c({},e)},!0)}});var a=function(e){T.default.isArray(e,"securityRestrictions");var t={frameInFrame:!1,thirdPartyFrame:!1};return e.forEach(function(e){switch(e){case h.default.SECURITY.FRAME_IN_FRAME:t.frameInFrame=!0;break;case h.default.SECURITY.THIRD_PARTY_FRAME:t.thirdPartyFrame=!0}}),t}(t.securityRestrictions);a===h.default.SECURITY.FRAME_IN_FRAME&&E.default.changeBodyStyle(h.default.IFRAME_BODY);var i=_.default.getFunctionReference(t.apis.onStateChange)||_.default.noop;w.default.init({metaData:x,securityRestrictions:a,onStateChange:i,appId:e,storageType:v.default.getStorageType(),windowName:t.windowName}),C.default.init({supportHours:t.supportHours,timeZoneOffset:t.timeZoneOffset,securityRestrictions:a,onStateChange:i,appleBusinessChat:t.appleBusinessChat,disableBackgroundInvite:t.disableBackgroundInvite,appId:e}),b.default.init(t.journey,a,x.currentpagedata);var r=y.default.browser.get(f.default.PRECHAT_DATA_KEYS.VISITOR_ID);if(N.default.isEmptyorNull(r)?y.default.browser.set(f.default.PRECHAT_DATA_KEYS.VISITOR_ID,B):B!==r&&(m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:"VISITOR_ID_CHANGED",prevVisitorId:r,nextVisitorId:B,widgetLoaded:w.default.isWidgetLoaded(),storage:v.default.getStorageType()}},!0),S.default.log({event:"visitorIdChanged",eventData:{eventType:"VISITOR_ID_CHANGED",eventSource:"UDE",nextVi:B,prevVi:r,version:"ude-1.26.3",tabId:y.default.getTabId()}}),y.default.browser.set(f.default.PRECHAT_DATA_KEYS.VISITOR_ID,B)),m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.PAGE_INIT,logData:{storage:v.default.getStorageType(),storageReason:v.default.getStorageTypeReasons(),ieVersion:g.default.ieVersion||void 0,safariVersion:g.default.safariVersion||void 0,chromeVersion:g.default.chromeVersion||void 0,isMobileSafari:g.default.isMobileSafari||void 0,isAndroidTablet:g.default.isAndroidTablet||void 0,isIpad:g.default.isIpad||void 0,isTablet:g.default.isTablet||void 0,iosVersion:g.default.iosVersion||void 0,isPhone:g.default.isPhone||void 0,path:""+location.origin+location.pathname,compatMode:Y.compatMode}},!0),Y.compatMode,t.appleBusinessChat.enabled&&(g.default.isMac||g.default.isMobileSafari&&g.default.iosVersion>10)){var o=t.appleBusinessChat,s=o.scriptUrl,l=o.businessId;T.default.notEmpty(s,"appleBusinessChat.scriptUrl"),T.default.notEmpty(l,"appleBusinessChat.businessId"),R.default.injectScript(s,function(e){m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_ABC",url:s,status:e}},!0),u()},Y,{id:f.default.APPLE_SCRIPT_ID},3e4)}else u()}Object.defineProperty(t,"__esModule",{value:!0});var l=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,a)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(a):void 0},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){return e?new H:new j};var f=a(n(12)),p=a(n(33)),h=a(n(106)),v=a(n(337)),E=a(n(154)),_=a(n(14)),g=a(n(15)),I=a(n(124)),y=a(n(107)),T=a(n(3)),m=a(n(123)),S=a(n(338)),b=a(n(387)),A=a(n(90)),O=a(n(80)),w=a(n(155)),C=a(n(339)),k=a(n(29)),N=a(n(9)),R=a(n(21)),D=a(n(43)),M=a(n(694)),L=a(n(695)),P=a(n(696)),Y=document,F={LISTENERS:["dispatchAction"]},x={},U=!1,B=void 0,K=function(){function e(){var t=this;o(this,e);var n=document.getElementById(f.default.WIDGET_LOADER_ID),a=D.default.parseUrl(n.src);n.setAttribute("data-path",a.origin+a.pathname.match(/(.*)\/js\/.*/)[1]),n.setAttribute("data-origin",a.origin),x=n.dataset;var i={};try{i=JSON.parse(decodeURIComponent(x.prechatdata))}catch(e){}if(i.clientId=x.key,k.default.refreshContext(i),B=i.vi,delete x.prechatdata,O.default.init({metaData:x}),"true"===x.auto){var r=x.appId;if(I.default.isPopup()){var u=I.default.getWindowParams();u&&u.appId&&(r=u.appId),u&&u.context&&k.default.refreshContext(u.context)}O.default.fetch(r,{},function(e){e.appId&&t.init(e.appId),e.err&&m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_ERROR,logData:c({action:"API_ERROR"},e.err)},!0)},function(e){m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_DEBUG,logData:c({action:"API_PERF"},e)})})}}return d(e,[{key:"init",value:function(e){var t=void 0;if(_.default.isString(e))t=e;else{var n=e;t=n.appId,O.default.set(n)}var a=O.default.get(t),i=!I.default.isPopup()&&a.forceCrossOrigin;v.default.init({initCallback:function(e){!function(e,t){var n=O.default.get(e),a=_.default.getObjectReference("workflowConfig.chat.assistAccountClientKeyMap",n),i=Array.isArray(a)&&a.length>1,r=k.default.getContext()[f.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION];y.default.init({storage:t,activeSession:r,interLobEnabled:i,onStoreUpdate:w.default.updateState.bind(w.default)});var o=y.default.browser.get(f.default.APP_SESSION_KEY);o&&o.context&&k.default.refreshContext(o.context);var u=y.default.browser.get(f.default.CONFIG_APP_ID);u?O.default.fetch(u,{},function(e){e.appId&&s(e.appId),e.err&&m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_ERROR,logData:c({action:"API_ERROR"},e.err)},!0)},function(e){m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_DEBUG,logData:c({action:"API_PERF"},e)})}):s(e)}(t,e)},clientId:x.key,xdPath:x.path,getData:a.apis.getData?_.default.getFunctionReference(a.apis.getData):void 0,setData:a.apis.setData?_.default.getFunctionReference(a.apis.setData):void 0,forceCrossOrigin:i})}},{key:"startInteraction",value:function(e,t){if(!U)return!1;var n=t,a=e,i=n&&n.appId;return a&&a.prechatData&&(k.default.refreshContext(a.prechatData),a.prechatData.queue&&(n||(n={}),n.fallbackQueue=e.prechatData.queue),delete a.prechatData),O.default.fetch(i,a,function(e){e.appId&&(m.default.setAppId(e.appId),C.default.triggerInvite(e.appId,n)),e.err&&m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_ERROR,logData:c({action:"API_ERROR"},e.err)},!0)},function(e){m.default.logInteraction({logLevel:p.default.LOG_LEVEL.INFO,message:p.default.LOG_EVENTS.SYSTEM_DEBUG,logData:c({action:"API_PERF"},e)})}),!0}},{key:"endInteraction",value:function(e){return C.default.removeInvite(e)}},{key:"sendContext",value:function(e){w.default.sendContext(e)}},{key:"pushJourneyUrl",value:function(e,t){var n,a,i;T.default.notEmpty(e,"pushJourneyUrl: Title"),T.default.notEmpty(t,"pushJourneyUrl: Url"),b.default.pushUrl(e,t),w.default.sendContext((n={},a=f.default.JOURNEY,i=b.default.getJourneyEncoded(),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n))}},{key:"sendSystemMessage",value:function(e,t){T.default.notEmpty(e,"sendSystemMessage: content is not string or empty"),void 0!==t&&T.default.notEmpty(t,"sendSystemMessage: type is not string or empty"),w.default.sendSystemMessage({content:e,type:t})}},{key:"isWithinSupportHours",value:function(e){if(!U)return!1;var t=y.default.browser.get(f.default.CONFIG_APP_ID),n=O.default.get(t||"default");return new A.default(n.supportHours,e).isWithinSupportHours()}},{key:"isInteractionActive",value:function(){return w.default.isWidgetLoaded()}},{key:"login",value:function(e){return!!U&&(w.default.login(e),!0)}},{key:"logout",value:function(){return!!U&&(w.default.logout(),!0)}},{key:"setUserProfile",value:function(e){return!!U&&(w.default.setUserProfile(e),!0)}},{key:"getSessionContext",value:function(){return!!U&&w.default.getSessionContext()}},{key:"sendCustomCardResponse",value:function(e,t,n,a){return!!U&&w.default.sendCustomCardResponse(e,t,n,a)}}]),e}(),j=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,K),d(t,[{key:"init",value:function(e){U||M.default&&L.default&&P.default&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}}]),t}(),H=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return w.default.addExtensibleListener(F.LISTENERS),e}return r(t,K),d(t,[{key:"init",value:function(e,n){U||(N.default.isUndefinedorNull(n)||w.default.setParentElement(n),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e))}},{key:"reconfigure",value:function(e,n){N.default.isUndefinedorNull(n)||w.default.setParentElement(n),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"cleanUp",value:function(e){return w.default.cleanUp(e)}},{key:"dispatchAction",value:function(e,t){w.default.dispatchAction(e,t)}}]),t}()},681:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(160);var r=a(n(3)),o=a(n(123)),u=a(n(33)),s=a(n(683)),l=a(n(12)).default.STORAGE_KEY_NAMES.USER_SESSION+".",d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getData=t.getData,this._setData=t.setData}return i(e,[{key:"_log",value:function(e){o.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:{errorMsg:e}},!0)}},{key:"_checkDataLength",value:function(e,t){e.length>500&&this._log(t+" Session data length exceeded 500")}},{key:"set",value:function(e){var t=this,n=e;r.default.isObject(e,"CustomStorage::set data");try{var a=s.default.encode(n);Object.keys(a).map(function(e){var n=a[e];return t._checkDataLength(JSON.stringify(n),e),t._setData(""+l+e,n),0})}catch(e){var i="CustomStorage::set - failed to set: "+e;this._log(i)}}},{key:"get",value:function(e){var t=this;r.default.isFunction(e,"callback");var n={},a=s.default.getBuckets().reduce(function(e,t){return e[t]=!1,e},{});s.default.getBuckets().map(function(i){return t._getData(""+l+i,function(r,o){var u=o;try{n[r.substr(l.length)]=u}catch(e){var d='CustomStorage::get - failed to get "'+r+'" "'+JSON.stringify(u)+'": '+e;t._log(d)}a[i]=!0,!0===Object.keys(a).reduce(function(e,t){return e=e&&a[t]},!0)&&e(s.default.decode(n))}),0})}}]),e}();t.default=d},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(14),o=(a=r)&&a.__esModule?a:{default:a},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"formatDate",value:function(e){var t=e.getFullYear(),n=o.default.lpad(e.getMonth()+1,2),a=o.default.lpad(e.getDate(),2),i=o.default.lpad(e.getHours(),2),r=o.default.lpad(e.getMinutes(),2),u=o.default.lpad(e.getSeconds(),2),s=o.default.lpad(e.getMilliseconds(),3),l=e.getTimezoneOffset();return t+"-"+n+"-"+a+" "+i+":"+r+":"+u+"."+s+" "+(l>0?"-":"+")+o.default.lpad(Math.floor(Math.abs(l)/60),2)+o.default.lpad(Math.abs(l)%60,2)}}]),e}();t.default=new u},683:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(684)),u=a(n(6)),s=a(n(312)),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"encode",value:function(e){var t=this.getBuckets().reduce(function(e,t){return e[t]={},e},{}),n=o.default.flatten(e),a=s.default.KEY_MAP;return Object.keys(n).map(function(e){var r=a.find(function(t){return t.key===e});if(r){var o=n[e];"boolean"===r.type&&(o=!0===n[e]?1:0),t=(0,u.default)({},t,i({},r.bucket,i({},r.short,o)))}return 0}),t}},{key:"decode",value:function(e){var t={},n=o.default.flatten(e);return s.default.KEY_MAP.map(function(e){var a=e.bucket+"."+e.short;if(void 0!==n[a]){var r=n[a];"boolean"===e.type?r=1===n[a]:"number"===e.type&&(r=""===n[a]?void 0:n[a]),t=(0,u.default)({},t,i({},e.key,r))}return 0}),o.default.unflatten(t)}},{key:"getBuckets",value:function(){return s.default.BUCKETS}}]),e}();t.default=new l},684:function(e,t,n){function a(e,t){var n=(t=t||{}).delimiter||".",a=t.maxDepth,r={};return function e(o,u,s){s=s||1,Object.keys(o).forEach(function(l){var d=o[l],c=t.safe&&Array.isArray(d),f=Object.prototype.toString.call(d),p=i(d),h=u?u+n+l:l;if(!c&&!p&&("[object Object]"===f||"[object Array]"===f)&&Object.keys(d).length&&(!t.maxDepth||s<a))return e(d,h,s+1);r[h]=d})}(e),r}var i=n(685);e.exports=a,a.flatten=a,a.unflatten=function e(t,n){function a(e){var t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||n.object?e:t}n=n||{};var r=n.delimiter||".",o=n.overwrite||!1,u={};return i(t)||"[object Object]"!==Object.prototype.toString.call(t)?t:(Object.keys(t).sort(function(e,t){return e.length-t.length}).forEach(function(i){for(var s=i.split(r),l=a(s.shift()),d=a(s[0]),c=u;void 0!==d;){var f=Object.prototype.toString.call(c[l]),p="[object Object]"===f||"[object Array]"===f;if(!o&&!p&&void 0!==c[l])return;(o&&!p||!o&&null==c[l])&&(c[l]="number"!=typeof d||n.object?{}:[]),c=c[l],s.length>0&&(l=a(s.shift()),d=a(s[0]))}c[l]=e(t[i],n)}),u)}},685:function(e,t){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},686:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=a(n(3)),u=a(n(12)),s=a(n(43)),l=a(n(386)),d=function(){function e(t,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.default.isFunction(t,"XDStorage: successCallback"),o.default.isFunction(n,"XDStorage: errorCallback"),o.default.isFunction(a,"XDStorage: updateCallback"),o.default.notEmpty(i.storageKey,"XDStorage: options.storageKey"),o.default.notEmpty(i.sessionKey,"XDStorage: options.sessionKey"),o.default.notEmpty(i.path,"XDStorage: options.path"),this._storageKey=i.storageKey,this._sessionKey=i.sessionKey,this._successCallback=t,this._errorCallback=n,this._updateCallback=a;var r=void 0;r=i.path+"/xd.html",this._xdOrigin=s.default.parseUrl(r).secure().appendToHash({origin:location.origin,storageKey:this._storageKey},void 0,!0),this._xdUrl=this._xdOrigin.href,o.default.notEmpty(this._xdUrl,"xdUrl"),this._loadXdHtml(this._xdUrl)}return r(e,[{key:"_loadXdHtml",value:function(e){var t=null;(t=document.createElement("iframe")).id="tfsxdframe",t.src=e,document.getElementsByTagName("head")[0].appendChild(t),this._communicator=new l.default({origin:this._xdOrigin.origin,listener:this._messageHandler.bind(this),destinationWindow:t.contentWindow})}},{key:"_messageHandler",value:function(e){var t={};if(e.origin===this._xdOrigin.origin){try{t=JSON.parse(e.data)}catch(e){return}switch(t.queryCommand){case u.default.XD_COMMANDS.INITIALIZE:"object"===i(t.data)&&this._updateCallback(t.data),this._successCallback(u.default.STORAGE_TYPES.XD,this);break;case u.default.XD_COMMANDS.INITIALIZE_ERROR:this._errorCallback("XDSTORAGE_"+t.error);break;case u.default.XD_COMMANDS.UPDATE:if(t.data.key!==this._storageKey)break;var n={oldValue:t.data.oldValue,newValue:t.data.newValue};this._updateCallback(n)}}}},{key:"get",value:function(){}},{key:"set",value:function(e,t,n){this._sendCommand(u.default.XD_COMMANDS.SET,e,t,n)}},{key:"addStorageListener",value:function(){}},{key:"remove",value:function(e,t){this._sendCommand(u.default.XD_COMMANDS.REMOVE,e,t)}},{key:"_sendCommand",value:function(e,t,n,a){var i={command:e,key:t,value:n,opts:a};this._communicator.sendMessage(JSON.stringify(i))}}]),e}();t.default=d},687:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(80)),o=a(n(396)),u=a(n(12)),s=a(n(124)),l=a(n(7)),d=a(n(155)),c=a(n(107)),f=a(n(43)),p=a(n(29)),h=a(n(337)),v=void 0,E=void 0,_=void 0,g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){v=e.metaData,E=e.storageType}},{key:"getPopupWindowConfig",value:function(e,t){var n,a,i=r.default.get(e),l=function(e){var t={};switch(e.popupWindow.windowPosition){case u.default.POSITION.TOP_LEFT:t.left=0,t.top=0;break;case u.default.POSITION.TOP_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=0;break;case u.default.POSITION.BOTTOM_LEFT:t.left=0,t.top=window.screen.height-e.windowHeight;break;case u.default.POSITION.BOTTOM_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=window.screen.height-e.windowHeight;break;default:t.left=0,t.top=0}return t}(i),d=(n=void 0,a=[o.default.URL_PARAMS.CLIENT_KEY+"="+v.key,o.default.URL_PARAMS.IS_POPUP+"=true"].join("&"),n=v.path+"/apploader.html",(n=f.default.parseUrl(n).secure().href)+"?"+a),c={appId:e,overrideConfig:t,context:p.default.getContext(),storageType:E};return{windowUrl:d,windowName:s.default.generateSecureWindowName(c),windowFeatures:["width="+i.popupWindow.windowWidth,"height="+i.popupWindow.windowHeight,"resizeable=yes","left="+l.left,"top="+l.top].join(",")}}},{key:"start",value:function(e,t){var n=this;if(_)_.focus();else{var a=this.getPopupWindowConfig(e,t),i=a.windowUrl,r=a.windowName,o=a.windowFeatures;if(_=parent.window.open(i,r,o),c.default.browser.set(u.default.DISPLAY_MODE_KEY,u.default.DISPLAY_MODE.NONE),c.default.addListener(u.default.VISITOR_SESSION_ID_KEY,function(e,t){!!t&&(d.default.update(u.default.INITIAL_STATE,{chat:{visitorSessionId:t}}),d.default.reconcileWidget())}),c.default.addListener(u.default.VA_TURNS_ID_KEY,function(e,t){!!t&&(d.default.update(u.default.INITIAL_STATE,{va:{turnsId:t}}),d.default.reconcileWidget())}),c.default.addListener(u.default.DOMAIN_ALIASES_KEY,function(e,t){var a=t;n.update(u.default.INITIAL_STATE,{chat:{domainAliases:a}})}),h.default.getStorageType()===u.default.STORAGE_TYPES.CUSTOM)var s=l.default.requestInterval(function(){_.closed&&(d.default.cleanUp(),l.default.clearRequestInterval(s))},1e3)}}},{key:"resetPopupWindow",value:function(){_=void 0}}]),e}();t.default=new g},688:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(158)),o=a(n(92)),u=a(n(12)),s=a(n(125)),l=a(n(15)),d=void 0,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"initialize",value:function(e){var t=e.appConfig,n=e.dockId,a=void 0===n?"":n,i=e.securityRestrictions,u=e.maximizeWidget;if(d)return!0;var c=(t.minimizedDock.customDocks||[]).filter(function(e){return e.dockId===a})[0];if(!c)return!1;c.device=l.default.getDevice(),c.inviteId=a;var f=r.default.getTemplate(c.template),p=void 0;i.frameInFrame&&(p=s.default.sendMessage);try{d=new f(c,function(e){o.default.STIMULI_TYPE.ACTION+"_"+e===o.default.STIMULI.INVITE_ACCEPTED&&u()},p)}catch(e){return!1}return!!d}},{key:"setState",value:function(e){var t=e!==u.default.STYLE_STATE.MINIMIZED?o.default.STATE.MAXIMIZED:o.default.STATE.MINIMIZED;try{d&&d.setState(t,!1)}catch(e){}}},{key:"terminate",value:function(){try{d&&d.destructor()}catch(e){}d=void 0}},{key:"widgetNotification",value:function(e){try{d&&d.widgetUpdate(e)}catch(e){}}}]),e}();t.default=c},689:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(340)),o=a(n(63)),u=a(n(7)),s=a(n(19)),l=a(n(21)),d=a(n(6)),c=void 0,f=void 0,p={CHAT_COBROWSE_IN_PROGRESS:"You are sharing this page.",CHAT_COBROWSE_STOP:"Stop sharing"},h=new(a(n(68)).default),v=window,E=document,_=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e){e&&t.cobrowseSessionData&&t.cobrowseContinueSession(t.cobrowseSessionData)}.bind(this);h.onChange(n)}return i(e,[{key:"cobrowseCreateSession",value:function(e,t,n){var a=this;p=(0,d.default)({},p,n),window.isInit&&"function"==typeof window.CreateSession?window.CreateSession(e,function(e){r.default.send(s.default.COBROWSE,{state:o.default.STATES.INITIALIZED,adminUrl:e})},function(e){r.default.send(s.default.COBROWSE,{state:o.default.STATES.STARTED,cookieData:e}),a.cobrowseSessionData=e.cookieData,a.addSharingProgressDock()},null,t):u.default.requestTimeout(function(){a.cobrowseCreateSession(e)},1e3)}},{key:"disconnectCobrowse",value:function(){v.disconnect&&(this.cobrowseSessionData=null,v.disconnect(),this.removeSharingProgressDock())}},{key:"userClickedEndCobrowse",value:function(){r.default.send(s.default.COBROWSE,{state:o.default.COMMANDS.USER_CLOSE}),this.disconnectCobrowse(),this.removeSharingProgressDock()}},{key:"resumeCobrowse",value:function(e){var t=this;p=(0,d.default)({},p,e.uiStrings),l.default.injectScript(e.url,function(n){var a=void 0;"timeout"===n||"error"===n||(a=e.cobrowseId+";"+e.mode,t.cobrowseContinueSession(a))},document,{id:"tfs-screenshare-js"},3e4)}},{key:"cobrowseContinueSession",value:function(e){var t=this;this.cobrowseSessionData=e,window.isInit&&"function"==typeof window.CreateSession?(window.ContinueSession(e),this.addSharingProgressDock()):u.default.requestTimeout(function(){t.cobrowseContinueSession(e)},1e3)}},{key:"addSharingProgressDock",value:function(){this.removeSharingProgressDock(),f=l.default.createElement("button",{id:"tfs-cobrowse-dock-cancel"},"<span aria-hidden>\n          <svg xmlns='http://www.w3.org/2000/svg' width='10' height='9' viewBox='0 0 10 10' focusable='false'>\n            <rect width='10' height='10' fill='#FFFFFF' fill-rule='evenodd' rx='2'/>\n          </svg>\n        </span>\n        <span>"+p.CHAT_COBROWSE_STOP+"</span>"),c=l.default.createElement("div",{id:"tfs-cobrowse-dock",class:"cobrowse-boundary"},[l.default.createElement("span",{id:"tfs-cobrowse-dock-span-2"},p.CHAT_COBROWSE_IN_PROGRESS),f,l.default.createElement("style",{id:"tfs-cobrowse-dock-style"},"#tfs-cobrowse-dock {\n          position: fixed;\n          top: 0px;\n          text-align: center;\n          font-size: 12px;\n          padding: 2px;\n          color: white;\n          background: rgb(0,128,0);\n          z-index: 1000000;\n          left: 50%;\n          transform: translateX(-50%);\n          -ms-transform: translateX(-50%);\n          border-radius: 0px 0px 5px 5px;\n          -ms-border-radius: 0px 0px 5px 5px;\n          margin: 0;\n          user-select: none;\n          cursor: default;\n          font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        }\n        #tfs-cobrowse-dock-cancel {\n          border-radius: 4px;\n          cursor: pointer;\n          background-color: rgba(0,0,0,0.2);\n          border: none;\n          color: inherit;\n          font-size: inherit;\n          line-height: 20px;\n        }\n        #tfs-cobrowse-dock-span-2 {\n          margin: 0 10px 0 10px;\n          line-height: 20px;\n        }")]),this.userClickedEndCobrowseBound=this.userClickedEndCobrowse.bind(this),f.addEventListener("click",this.userClickedEndCobrowseBound),E.body.appendChild(c)}},{key:"removeSharingProgressDock",value:function(){c=E.getElementById("tfs-cobrowse-dock"),f=E.getElementById("tfs-cobrowse-dock-cancel"),c&&(c.parentNode.removeChild(c),c=null,f.removeEventListener("click",this.userClickedEndCobrowseBound),f=null)}}]),e}();t.default=new _},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){try{window.eval("var test = (x) => x + 1")}catch(e){return!1}return!0}()},691:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(){N.removeEventListener("scroll",M),N.removeEventListener("orientationchange",M),N.removeEventListener("resize",M),O.default.remove(),P=!1}function r(e){var t=void 0,n=void 0,a=k.default.tab.get("position");if(a&&e){var i=s(a.x,a.y);t=i.offsetX,n=i.offsetY}else{var r=s(o()?0:100,100);t=r.offsetX,n=r.offsetY,t+=o()?H:-H}h(t,n)}function o(){return U===m.default.POSITION.BOTTOM_LEFT}function u(){return!C.default.isUndefinedorNull(j)}function s(e,t){var n=I();return v(e/100*n.screenWidth,t/100*n.screenHeight)}function l(e,t){switch(Y){case m.default.STYLE_STATE.MAXIMIZED:case m.default.STYLE_STATE.CARD:p(e,t)}d(m.default.STYLE_TRANSITION.IMMEDIATE)}function d(e){var t,n,a,i,r;K.frameInFrame?(t=E(),n=t.frameWidth,a=t.frameHeight,i=_()&&c(),r=!_()&&c(),S.default.setStyle(F,{bottom:"0",right:r?y(H):"0",width:i?"100%":y(n),height:i?"100%":y(a),position:"fixed",backgroundColor:"transparent",zIndex:"214783647",boxShadow:"none",display:"block"},!0)):_()&&c()?function(e){S.default.setStyle(F,{top:"0px",left:"0px",right:"0px",width:"100%",height:"100%",position:"fixed",display:"block",margin:"0 0 0 0",transition:f(e)})}(e):u()?S.default.setStyle(F,{width:"100%",height:"100%"}):function(e){var t=function(){var e=V.x,t=V.y,n=I(),a=n.screenWidth,i=n.screenHeight,r=function(){var e=G.desktop;return A.default.isPhone?e=G.phone:A.default.isTablet&&(e=G.tablet),e}(),u=r.offsetX,s=r.offsetY;switch(Y){case m.default.STYLE_STATE.MAXIMIZED:break;case m.default.STYLE_STATE.MINIMIZED:e=o()?u:a-q.x-u,t=i-q.y-s;break;case m.default.STYLE_STATE.CARD:U!==m.default.POSITION.BOTTOM_LEFT&&(e-=B.width-30);break;case m.default.STYLE_STATE.PLUSCARD:e=35,t=35}return v(e,t)}(),n=t.offsetX,a=t.offsetY,i=t.correctionX,r=t.correctionY,u=function(e,t){return{offsetLeft:N.pageXOffset+e,offsetTop:N.pageYOffset+t}}(n,a),s=u.offsetTop,l=u.offsetLeft,d=E(),c=d.frameWidth,h=d.frameHeight;p(i,r),S.default.setStyle(F,{top:y(s),left:y(l),right:"auto",width:y(c),height:y(h),position:"absolute",display:Y===m.default.STYLE_STATE.HIDDEN?"none":"block",margin:"auto",transition:f(e)}),x&&S.default.setStyle(x,{display:Y===m.default.STYLE_STATE.MINIMIZED?"none":"block"})}(e)}function c(){return Y===m.default.STYLE_STATE.MAXIMIZED||Y===m.default.STYLE_STATE.CARD||Y===m.default.STYLE_STATE.PLUSCARD}function f(e){switch(e){case m.default.STYLE_TRANSITION.SCROLL:return"top 800ms cubic-bezier(0.22, 0.95, 0.1, 0.88), left 800ms cubic-bezier(0.22, 0.95, 0.1, 0.88)";case m.default.STYLE_TRANSITION.RESIZE:return"top 100ms, left 100ms, height 100ms, width 100ms";default:return""}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(e||t)&&h(V.x+e,V.y+t)}function h(e,t){V.x=e,V.y=t;var n=I(),a=n.screenWidth,i=n.screenHeight;0!==a&&0!==i&&(W.x=Math.round(e/a*100),W.y=Math.round(t/i*100),L())}function v(e,t){var n=e,a=t,i=0,r=0,o=I(),u=o.screenWidth,s=o.screenHeight,l=E(),d=l.frameWidth,c=l.frameHeight;return n+d>u?i=u-(n+d):n<0&&(i=-n),n+=i,a+c>s?r=s-(a+c):a<0&&(r=-a),{offsetX:n,offsetY:a+=r,correctionX:i,correctionY:r}}function E(){var e=void 0,t=void 0;if(K.frameInFrame)e=Number.MAX_VALUE,t=Number.MAX_VALUE;else{var n=I();e=n.screenWidth,t=n.screenHeight}var a=0,i=0,r=B,o=r.width,u=r.height;switch(Y){case m.default.STYLE_STATE.MAXIMIZED:a=o>e?e:o,i=u>t?t:u;break;case m.default.STYLE_STATE.MINIMIZED:a=q.x,i=q.y;break;case m.default.STYLE_STATE.CARD:var s=2*o-30;a=s>e?e:s,i=u>t?t:u;break;case m.default.STYLE_STATE.PLUSCARD:a=e-2*H,i=t-2*H}return{frameWidth:a,frameHeight:i}}function _(){return g()===m.default.DISPLAY_MODE.FULLSCREEN}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;return A.default.isPhone||w.default.isPopup()||A.default.isTablet&&e.frameInFrame?m.default.DISPLAY_MODE.FULLSCREEN:m.default.DISPLAY_MODE.FLOATING}function I(){return{screenHeight:R.clientHeight-T.default.getKeyboardHeight(),screenWidth:R.clientWidth}}function y(e){return Math.round(e)+"px"}Object.defineProperty(t,"__esModule",{value:!0});var T=a(n(21)),m=a(n(12)),S=a(n(154)),b=a(n(692)),A=a(n(15)),O=a(n(693)),w=a(n(124)),C=a(n(9)),k=a(n(107)),N=window,R=document.documentElement,D=A.default.isAndroid?800:300,M=(0,b.default)(function(e){["resize","orientationchange"].indexOf(e.type)>-1&&r(!1),d(m.default.STYLE_TRANSITION.SCROLL)},D),L=(0,b.default)(function(){k.default.tab.set("position",W)},1e3),P=!1,Y=void 0,F=void 0,x=void 0,U=void 0,B=void 0,K=void 0,j=void 0,H=void 0,G=void 0,V={x:0,y:0},W={x:0,y:0},q={x:100,y:100};t.default={initialize:function(e){var t=e.config,n=e.container,a=e.dragHandle,o=e.securityRestrictions,s=e.hasCustomMinimize,d=e.parentElement;i(),function(e,t,n,a,i){Y=m.default.STYLE_STATE.MAXIMIZED,F=t,x=n,K=a,j=i;var r=e.windowPosition,o=e.windowWidth,u=e.windowHeight,s=e.windowOffset,l=e.minimizedDock;U=r,B={width:o,height:u},H=s,G=l}(t,n,a,o,d),u()||(r(!0),N.addEventListener("scroll",M),N.addEventListener("orientationchange",M),N.addEventListener("resize",M)),function(){var e=K.frameInFrame?{height:"100%",width:"100%",backgroundColor:"transparent",position:"fixed"}:{backgroundColor:"transparent",zIndex:"2147483647"};if(u()&&(e={height:"100%",width:"100%"}),T.default.setStyle(F,e),x){var t={position:"absolute",top:"10px",right:"90px",height:"34px",zIndex:"10",width:B.width-134+"px",cursor:"move"};T.default.setStyle(x,t),O.default.add(F,x,l,!0)}}(),s&&(q.x=0,q.y=0),P=!0},terminate:i,updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];P&&(Y=e,d(t?m.default.STYLE_TRANSITION.IMMEDIATE:m.default.STYLE_TRANSITION.RESIZE))},isFullScreen:_,getDisplayModeSetting:g}},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=this,i=void 0;return function(){for(var r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];var s=a,l=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(s,o)},t),l&&e.apply(s,o)}}},693:function(e,t,n){"use strict";function a(e){return{x:e.pageX?e.pageX:e.changedTouches[0].pageX,y:e.pageY?e.pageY:e.changedTouches[0].pageY}}function i(e){e.preventDefault(),e.stopPropagation(),p.style.cssText=_;var t=a(e),n=t.x,i=t.y;f.lastXPosition=n,f.lastYPosition=i,g.addEventListener("selectstart",r),g.addEventListener("dragstart",r),g.addEventListener("mousemove",o),g.addEventListener("mouseup",u),g.addEventListener("touchmove",o),g.addEventListener("touchend",u)}function r(){return!1}function o(e){f.style.opacity=E;var t=void 0,n=void 0;try{var i=a(e);t=i.x,n=i.y}catch(e){return}var r=t-f.lastXPosition,o=n-f.lastYPosition;h(r,o),f.lastXPosition=t,f.lastYPosition=n}function u(){g.removeEventListener("selectstart",r),g.removeEventListener("dragstart",r),g.removeEventListener("mousemove",o),g.removeEventListener("mouseup",u),g.removeEventListener("touchmove",o),g.removeEventListener("touchend",u),f.style.opacity=1,p.style.cssText=v}Object.defineProperty(t,"__esModule",{value:!0});var s,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(3),c=(s=d)&&s.__esModule?s:{default:s},f=void 0,p=void 0,h=void 0,v=void 0,E=.8,_="position: absolute; width: 100%; height: 100%;",g=document,I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return l(e,[{key:"add",value:function(e,t,n){c.default.isObject(e,"element"),c.default.isObject(t,"handle"),this.remove(),f=e,p=t,v=t.style.cssText,h=n,p.addEventListener("mousedown",i),p.addEventListener("touchstart",i)}},{key:"remove",value:function(){p&&(p.removeEventListener("mousedown",i),p.removeEventListener("touchstart",i))}}]),e}();t.default=new I},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1,t=[1],n=void 0;try{n=t.map(function(e){return e+1}),e=t[0]+1===n[0]}catch(e){}return e}()},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1;try{e="a"===Object.keys({a:1})[0]}catch(e){}return e}()},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1,t=[1],n=[];try{t.forEach(function(e,t){n[t]=e+1}),e=t[0]+1===n[0]}catch(e){}return e}()},7:function(e,t,n){"use strict";function a(e,t){do{c===e?c=0:c+=1}while(Object.prototype.hasOwnProperty.call(t,c));return c}Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=arguments,u=n(15),s=(i=u)&&i.__esModule?i:{default:i},l=function(e){return window.setTimeout(e,1e3/60)},d=void 0,c=0,f=function(){var e=void 0;if(window.Worker&&window.Blob&&!s.default.ieVersion)try{var t={},n=new Blob(["\n        var fakeIdToId = {};\n        onmessage = function (event) {\n          var data = event.data,\n            name = data.name,\n            fakeId = data.fakeId,\n            time;\n          if(data.hasOwnProperty('time')) {\n            time = data.time;\n          }\n          switch (name) {\n            case 'setInterval':\n              fakeIdToId[fakeId] = setInterval(function() {\n                postMessage({fakeId: fakeId});\n              }, time);\n              break;\n            case 'clearInterval':\n              if (fakeIdToId.hasOwnProperty (fakeId)) {\n                clearInterval(fakeIdToId[fakeId]);\n                delete fakeIdToId[fakeId];\n              }\n              break;\n            case 'setTimeout':\n              fakeIdToId[fakeId] = setTimeout(function() {\n                postMessage({fakeId: fakeId});\n                if (fakeIdToId.hasOwnProperty (fakeId)) {\n                  delete fakeIdToId[fakeId];\n                }\n              }, time);\n              break;\n            case 'clearTimeout':\n              if (fakeIdToId.hasOwnProperty (fakeId)) {\n                clearTimeout(fakeIdToId[fakeId]);\n                delete fakeIdToId[fakeId];\n              }\n              break;\n          }\n        };\n      "]),i=window.URL.createObjectURL(n);(d=new Worker(i)).onmessage=function(e){var n=e.data.fakeId,a=void 0,i=void 0,r=void 0;Object.prototype.hasOwnProperty.call(t,n)&&(r=(a=t[n]).callback,i=a.parameters,Object.prototype.hasOwnProperty.call(a,"isTimeout")&&a.isTimeout&&delete t[n]),"function"==typeof r&&r.apply(window,i)},d.onerror=function(e){},e={setInterval:function(e,n){var i=a(2147483647,t);return t[i]={callback:e,parameters:Array.prototype.slice.call(o,2)},d.postMessage({name:"setInterval",fakeId:i,time:n}),i},clearInterval:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],d.postMessage({name:"clearInterval",fakeId:e}))},setTimeout:function(e,n){var i=a(2147483647,t);return t[i]={callback:e,parameters:Array.prototype.slice.call(o,2),isTimeout:!0},d.postMessage({name:"setTimeout",fakeId:i,time:n}),i},clearTimeout:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],d.postMessage({name:"clearTimeout",fakeId:e}))}}}catch(e){}return e}(),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||l,h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"requestInterval",value:function(e,t){if(f)return f.setInterval(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,t);var n=(new Date).getTime(),a={};return a.value=p(function i(){(new Date).getTime()-n>=t&&(e.call(),n=(new Date).getTime()),a.value=p(i)}),a}},{key:"clearRequestInterval",value:function(e){f?f.clearInterval(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):window.clearInterval(e)}},{key:"requestTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(f)return f.setTimeout(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),a={};return a.value=p(function i(){(new Date).getTime()-n>=t?e.call():a.value=p(i)}),a}},{key:"clearRequestTimeout",value:function(e){f?f.clearTimeout(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):window.clearTimeout(e)}}]),e}();t.default=new h},70:function(e,t,n){var a=n(35);e.exports=Array.isArray||function(e){return"Array"==a(e)}},704:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=a(n(680)),r=a(n(6)),o=(0,i.default)(!1);window._tfs&&(0,r.default)(o,window._tfs),window._tfs=o},8:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},80:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return e===c.default.DEFAULT_CONFIG?T:e}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.get(e).appId;this.update(a,t),n({appId:a})}function o(e){var t,n,a,i,r=e;return r.i18n.locale=("auto"!==(t=r.i18n.locale)?t:document.documentElement.lang?document.documentElement.lang:"undefined"==typeof navigator?"en":navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"en").toLowerCase().split("-")[0],"auto"!==r.i18n.locale&&(r.i18n.uiStrings=(0,f.default)({},r.i18n.uiStrings,(n={},a=r.i18n.locale,i={},a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n))),Object.keys(r.i18n.uiStrings).forEach(function(e){r.i18n.uiStrings[e]=(0,f.default)({},E.default,r.i18n.uiStrings[e])}),0===r.supportHours.length&&(r.supportHours=d.default.supportHours),r}function u(e,t,n){var a=function(e){var t=void 0;if(l.default.notEmpty(e,"appId"),y.configroot)t=y.configroot;else{var n=y.key;t=[y.origin,c.default.CONTENT_PATH,n].join("/")}return[t,e,c.default.UDE_CONFIG_JSON].join("/")}(e);_.makeRequest("GET",a,void 0,void 0,function(e){var n=void 0;try{n=JSON.parse(e),t(void 0,n)}catch(e){t({url:a,errorMsg:e.message,errorStack:e.stack})}},function(e){return t(e)},void 0,void 0,void 0,n)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(3)),d=a(n(301)),c=a(n(12)),f=a(n(6)),p=a(n(61)),h=a(n(118)),v=a(n(29)),E=a(n(302)),_=new p.default,g={},I={},y=void 0,T=c.default.DEFAULT_CONFIG,m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,[{key:"init",value:function(e){y=e.metaData}},{key:"get",value:function(e){var t=g[i(e)];return t?(0,f.default)({},t):void 0}},{key:"set",value:function(e){var t=h.default.transform(e),n=o((0,f.default)({},d.default,t)),a=n.appId;g[a]=n,I[a]=(0,f.default)({},g[a])}},{key:"reset",value:function(e){var t=i(e);g[t]=I[t]}},{key:"update",value:function(e,t){var n=i(e),a=g[n];if(a){var r=o((0,f.default)(a,t));g[n]=r}}},{key:"fetch",value:function(e,t,n,a){var i=this,o=e||c.default.DEFAULT_CONFIG;this.get(o)?r.call(this,o,t,n):u(o,function(e,a){e?n({err:e}):(i.set(a),o===c.default.DEFAULT_CONFIG&&a.appId&&(T=a.appId),r.call(i,o,t,n))},a)}},{key:"requestConfig",value:function(e,t,n,a,i,r){var o=this,u=t;t||(u=c.default.DEFAULT_CONFIG);var s=y&&y.key?y.key:e.clientId,l=e.baseUrl+"/clients/"+s+"/applications/"+u+"/configuration";!function(e,t,n,a,i,r){var o={};o.action=a,o.requestData=n,_.makeRequest("post",e,{Accept:"application/json","Content-type":"application/json",Authorization:t},JSON.stringify(o),function(e){return i(void 0,e)},function(e){return i(e)},void 0,void 0,void 0,r)}(l,e.apiKey,n,a,function(e,t){if(e)i(e);else{var n={};try{n=JSON.parse(t),(n=h.default.transform(n)).prechatData&&(v.default.refreshContext(n.prechatData),delete n.prechatData)}catch(e){i({url:l,errorMsg:e.message,errorStack:e.stack})}o.update(u,n),i(void 0,n)}},r)}}]),e}();t.default=new m},83:function(e,t,n){var a=n(10),i=n(8).document,r=a(i)&&a(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},84:function(e,t,n){var a=n(110);e.exports=function(e,t){return new(a(e))(t)}},86:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.isUndefinedorNull(t)||this.isUndefinedorNull(t[e[0]])?n:1===e.length?t[e[0]]:this.get(e.slice(1),t[e[0]],n)}},{key:"isUndefinedorNull",value:function(e){return void 0===e||null===e}},{key:"isEmptyorNull",value:function(e){return this.isUndefinedorNull(e)||""===e}},{key:"createNestedObject",value:function(e,t,n){var a=e,i=t.pop();return t.map(function(e){return a[e]=a[e]||{},a=a[e],0}),a[i]=n,a=a[i]}},{key:"extractRequiredAttributes",value:function(e,t){for(var n={},a=0;a<t.length;a+=1){var i=t[a];if(i.indexOf(".")>0){var r=i.split("."),o=this.get(r,e,void 0);this.createNestedObject(n,r,o)}else this.isUndefinedorNull(e[i])||(n[i]=e[i])}return n}},{key:"removeEmpty",value:function(e){var t=this,n=e;return Object.keys(n).forEach(function(e){t.isEmptyorNull(n[e])&&delete n[e]}),n}},{key:"removeSpecificKeys",value:function(e,t){var n=e;return t.map(function(e){return delete n[e]}),n}}]),e}();t.default=new i},90:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new Date,n=e,a=60*(t.getTimezoneOffset()-n)*1e3,i=t.getTime()+a;return new Date(i)}function r(e,t,n){for(var a=[],i=0;i<e.length;i+=1){var r=e[i],u=r.start,s=r.end;u=o(u,t,n),s=o(s,t,n),a.push({start:u,end:s})}return a}function o(e,t,n){var a=parseInt(e,10),i=t.getFullYear(),r=t.getMonth(),o=t.getDate()+n,u=parseInt(a/100,10);return new Date(i,r,o,u,a%100)}function u(e,t){var n=Math.abs(e-t),a=new Date(n);return{days:a.getUTCDate()-1,hours:a.getUTCHours(),minutes:a.getUTCMinutes()}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(65);var l=a(n(9)),d=a(n(3)),c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=void 0,o=void 0;return t.forEach(function(e){e.queue===n&&(a=e),"default"===e.queue&&(o=e)}),d.default.isObject(o,"SupportHours:default queue object"),a||(a=o),this.timeZoneOffset=l.default.get(["timeZoneOffset"],a,0),this.supportRange=function(e){d.default.isNumber(e.timeZoneOffset,"SupportHours::timeZoneOffset");for(var t=[],n=i(e.timeZoneOffset),a=n.getDay(),o=a;o<=a+c.length;o+=1){var u=o-a,s=r(e[c[o%7]]||[{start:"0000",end:"2359"}],n,u);t.push(s)}return t}(a),0}return s(e,[{key:"isWithinSupportHours",value:function(){var e=this.getNextAvailableTime();return e.days+e.hours+e.minutes===0}},{key:"getNextAvailableTime",value:function(){for(var e=this.supportRange,t=i(this.timeZoneOffset),n=0;n<e.length;n+=1)for(var a=0;a<e[n].length;a+=1){var r=e[n][a];if(t>=r.start&&t<=r.end)return u(t,t);if(t<=r.start)return u(r.start,t)}return 0}}]),e}();t.default=f},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INVITE_PREFIX:"tfs_invite_",STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",BUSY:"busy",OFFLINE:"offline",ENGAGED:"engaged"},STIMULI_TYPE:{AVAILABILITY:"availability",INTERACTION:"interaction",ACTION:"action"},ACTION:{OFFER:"offer",ACCEPT:"accept",DECLINE:"decline",IGNORE:"ignore",MINIMIZE:"minimize",REMOVE:"remove"},STIMULI:{AGENT_AVAILABLE:"availability_true",AGENT_UNAVAILABLE:"availability_false",INTERACTION_STARTED:"interaction_true",INTERACTION_ENDED:"interaction_false",INVITE_OFFERED:"action_offer",INVITE_ACCEPTED:"action_accept",INVITE_DECLINED:"action_decline",INVITE_IGNORED:"action_ignore",INVITE_MINIMIZED:"action_minimize",INVITE_REMOVED:"action_remove"},EVENT:{INVITE_OFFERED:"inviteOffered",INVITE_ACCEPTED:"inviteAccepted",INVITE_DECLINED:"inviteDeclined",INVITE_IGNORED:"inviteIgnored",QUEUE_AFTER_HOURS:"queueAfterHours",CA_CHECK_FAIL:"caCheckFail"},AVAILABILITY_CHECK:{NONE:"none",REPEAT:"repeat",ONCE:"once",TILL_AVAILABLE:"till_available"},TRACK_INTERACTION:{AVAILABILITY_CHECK:"AVAILABILITY_CHECK",INVITE_REQUESTED:"INVITE_REQUESTED",INVITE_OFFERED:"INVITE_OFFERED",INVITE_ACCEPTED:"INVITE_ACCEPTED",INVITE_DECLINED:"INVITE_DECLINED",INVITE_IGNORED:"INVITE_IGNORED",INVITE_ALREADY_MAXIMIZED:"INVITE_ALREADY_MAXIMIZED",INVITE_PAGE_BACKGROUND:"INVITE_PAGE_BACKGROUND",INVITE_INITIALIZATION_ERROR:"INVITE_INITIALIZATION_ERROR",INVITE_SET_STATE_ERROR:"INVITE_SET_STATE_ERROR"},ACTION_ATTRIBUTE:"data-tfs-action",QUEUE_ATTRIBUTE:"data-tfs-queue",SKILL_ATTRIBUTE:"data-tfs-skill",BADGE_ENABLED_ATTRIBUTE:"data-badge",BADGE_HINT_ATTRIBUTE:"data-hint",VIEW_ENABLED_ATTRIBUTE:"data-view",CUSTOM_EVENT_NAME:"tfsInviteStateChange",APPLE_BUSINESS_CHAT:{ATTRIBUTES:{CLASS_NAME:"class",BUSINESS_ID:"data-apple-business-id",INTENT_ID:"data-apple-business-intent-id",GROUP_ID:"data-apple-business-group-id",THEME:"data-apple-button-theme"},DEFAULT_THEME:"dark",REQUIRED_CLASS:"apple-business-chat-button-container"},LIGHTBOX_CSS:{css:{backgroundColor:"#000000",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.85",zIndex:"2147483647"}},LOADER_CSS_ID:"tfs_loader_css",LOADER_CSS:".tfs-reset-css,.tfs-reset-css * {\n    background:none;\n    border:none;\n    bottom:auto;\n    clear:none;\n    cursor:default;\n    display:block;\n    float:none;\n    font-family:Arial, Helvetica, sans-serif;\n    font-size:medium;\n    font-style:normal;\n    font-weight:normal;\n    height:auto;\n    left:auto;\n    letter-spacing:normal;\n    line-height:normal;\n    margin:0;\n    max-height:none;\n    max-width:none;\n    min-height:0;\n    min-width:0;\n    overflow:visible;\n    outline:none;\n    position:static;\n    padding:0;\n    right:auto;\n    text-align:left;\n    text-decoration:none;\n    text-indent:0;\n    text-transform:none;\n    top:auto;\n    user-select:none;\n    -ms-user-select:none;\n    -webkit-user-select:none;\n    visibility:visible;\n    white-space:normal;\n    width:auto;\n    z-index:auto;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  } .tfs-animate {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n    -webkit-animation-name: tfsRubberBand;\n    animation-name: tfsRubberBand;\n  } @-webkit-keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}\n\n@keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}"}},93:function(e,t,n){e.exports=!n(18)&&!n(11)(function(){return 7!=Object.defineProperty(n(83)("div"),"a",{get:function(){return 7}}).a})},97:function(e,t,n){"use strict";var a=n(2),i=n(38)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),a(a.P+a.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)("find")},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"encode",value:function(e){try{return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}}},{key:"decode",value:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(e){}}},{key:"parse",value:function(e,t){var n=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i.exec(e);if(null!==n){var a=n[1],i=";base64"===n[3]?this.decode(n[4]):void 0;return t===a?i:void 0}}}]),e}();t.default=new i}});